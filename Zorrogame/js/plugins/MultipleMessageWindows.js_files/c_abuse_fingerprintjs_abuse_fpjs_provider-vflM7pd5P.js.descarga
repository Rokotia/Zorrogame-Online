!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="93cef00d-e010-3be3-a6f8-3319aeb96e14")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./e_edison","./c_lodash-es_lodash","./c_fingerprintjs_fpjs-pro-static_fp","./e_core_exception","./c_src_sink_index","./c_memoize-one"],(function(e,t,n,r,o,i,c,a,s){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var l=u(t),d=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var c=i[o];if(!e(t[c],n[c]))return!1}return!0}return t!=t&&n!=n},f=o.getDefaultExportFromCjs(d);var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var R={default:"endpoint"},p={default:"tlsEndpoint"},v="Client timeout",E="Network connection error",g="Network request aborted",_="Response cannot be parsed",O="Blocked by CSP",m="The endpoint parameter is not a valid URL";function y(e){for(var t="",n=0;n<e.length;++n)if(n>0){var r=e[n].toLowerCase();r!==e[n]?t+=" ".concat(r):t+=e[n]}else t+=e[n].toUpperCase();return t}var I=y("WrongRegion"),w=y("SubscriptionNotActive"),S=y("UnsupportedVersion"),T=y("InstallationMethodRestricted"),N=y("HostnameRestricted"),b=y("IntegrationFailed"),A=y("NetworkRestricted"),P=y("InvalidProxyIntegrationSecret"),C=y("InvalidProxyIntegrationHeaders"),L="API key required",x="API key not found",D="API key expired",j="Request cannot be parsed",F="Request failed",k="Request failed to process",M="Too many requests, rate limit exceeded",K="Not available for this origin",V="Not available with restricted header",U=L,q=x,B=D,G="Failed to load the JS script of the agent",J="9319";function Y(e,t){var n,r,o,i,c,a=[],s=(n=function(e){var t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0);return{current:function(){return t[0]},postpone:function(){var e=t.shift();void 0!==e&&t.push(e)},exclude:function(){t.shift()}}}(e),100,3e3,i=0,r=function(){return Math.random()*Math.min(3e3,100*Math.pow(2,i++))},o=new Set,[n.current(),function(e,t){var i,c=t instanceof Error?t.message:"";if(c===O||c===m)n.exclude(),i=0;else if(c===J)n.exclude();else if(c===G){var a=Date.now()-e.getTime()<50,s=n.current();s&&a&&!o.has(s)&&(o.add(s),i=0),n.postpone()}else n.postpone();var u=n.current();return void 0===u?void 0:[u,null!=i?i:e.getTime()+r()-Date.now()]}]),u=s[0],l=s[1];if(void 0===u)return Promise.reject(new TypeError("The list of script URL patterns is empty"));return function e(n){var r=new Date,o=function(e){return a.push({url:n,startedAt:r,finishedAt:new Date,error:e})},i=t(n);return i.then((function(){return o()}),o),i.catch((function(t){if(null!=c||(c=t),a.length>=5)throw c;var n=l(r,t);if(!n)throw c;var o,i=n[0],s=n[1];return(o=s,new Promise((function(e){return setTimeout(e,o)}))).then((function(){return e(i)}))}))}(u).then((function(e){return[e,a]}))}var H="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",W=H;function X(e){var t;e.scriptUrlPattern;var n=e.token,r=e.apiKey,o=void 0===r?n:r,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["scriptUrlPattern","token","apiKey"]),c=null!==(t=function(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}(e,"scriptUrlPattern"))&&void 0!==t?t:H,a=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(document,"visibilitychange",t);return t(),[e,n]}(),s=a[0],u=a[1];return Promise.resolve().then((function(){if(!o||"string"!=typeof o)throw new Error(L);return Y(function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return"<version>"===e?"3":"<apiKey>"===e?n(t):"<loaderVersion>"===e?n("3.11.7"):e}))}(String(e),t)}))}(c,o),$)})).catch((function(e){throw u(),function(e){return e instanceof Error&&e.message===J?new Error(G):e}(e)})).then((function(e){var t=e[0],n=e[1];return u(),t.load(h(h({},i),{ldi:{attempts:n,visibilityStates:s}}))}))}function $(e){return function(e,t,n,r){var o,i=document,c="securitypolicyviolation",a=function(t){var n=new URL(e,location.href),r=t.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=t,s())};i.addEventListener(c,a);var s=function(){return i.removeEventListener(c,a)};return null==r||r.then(s,s),Promise.resolve().then(t).then((function(e){return s(),e}),(function(e){return new Promise((function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)})).then((function(){if(s(),o)return n(o);throw e}))}))}(e,(function(){return function(e){return new Promise((function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(e){if(e instanceof Error&&"TypeError"===e.name)return!0;throw e}}(e))throw new Error(m);var r=document.createElement("script"),o=function(){var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},i=document.head||document.getElementsByTagName("head")[0];r.onload=function(){o(),t()},r.onerror=function(){o(),n(new Error(G))},r.async=!0,r.src=e,i.appendChild(r)}))}(e)}),(function(){throw new Error(O)})).then(z)}function z(){var e=window,t="__fpjs_p_l_b",n=e[t];if(function(e,t){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==n?void 0:n.load))throw new Error(J);return n}var Q={load:X,defaultScriptUrlPattern:W,ERROR_SCRIPT_LOAD_FAIL:G,ERROR_API_KEY_EXPIRED:D,ERROR_API_KEY_INVALID:x,ERROR_API_KEY_MISSING:L,ERROR_BAD_REQUEST_FORMAT:j,ERROR_BAD_RESPONSE_FORMAT:_,ERROR_CLIENT_TIMEOUT:v,ERROR_CSP_BLOCK:O,ERROR_FORBIDDEN_ENDPOINT:N,ERROR_FORBIDDEN_HEADER:V,ERROR_FORBIDDEN_ORIGIN:K,ERROR_GENERAL_SERVER_FAILURE:F,ERROR_INSTALLATION_METHOD_RESTRICTED:T,ERROR_INTEGRATION_FAILURE:b,ERROR_INVALID_ENDPOINT:m,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:C,ERROR_INVALID_PROXY_INTEGRATION_SECRET:P,ERROR_NETWORK_ABORT:g,ERROR_NETWORK_CONNECTION:E,ERROR_NETWORK_RESTRICTED:A,ERROR_RATE_LIMIT:M,ERROR_SERVER_TIMEOUT:k,ERROR_SUBSCRIPTION_NOT_ACTIVE:w,ERROR_TOKEN_EXPIRED:B,ERROR_TOKEN_INVALID:q,ERROR_TOKEN_MISSING:U,ERROR_UNSUPPORTED_VERSION:S,ERROR_WRONG_REGION:I,defaultEndpoint:R,defaultTlsEndpoint:p},Z=Object.freeze({__proto__:null,ERROR_API_KEY_EXPIRED:D,ERROR_API_KEY_INVALID:x,ERROR_API_KEY_MISSING:L,ERROR_BAD_REQUEST_FORMAT:j,ERROR_BAD_RESPONSE_FORMAT:_,ERROR_CLIENT_TIMEOUT:v,ERROR_CSP_BLOCK:O,ERROR_FORBIDDEN_ENDPOINT:N,ERROR_FORBIDDEN_HEADER:V,ERROR_FORBIDDEN_ORIGIN:K,ERROR_GENERAL_SERVER_FAILURE:F,ERROR_INSTALLATION_METHOD_RESTRICTED:T,ERROR_INTEGRATION_FAILURE:b,ERROR_INVALID_ENDPOINT:m,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:C,ERROR_INVALID_PROXY_INTEGRATION_SECRET:P,ERROR_NETWORK_ABORT:g,ERROR_NETWORK_CONNECTION:E,ERROR_NETWORK_RESTRICTED:A,ERROR_RATE_LIMIT:M,ERROR_SCRIPT_LOAD_FAIL:G,ERROR_SERVER_TIMEOUT:k,ERROR_SUBSCRIPTION_NOT_ACTIVE:w,ERROR_TOKEN_EXPIRED:B,ERROR_TOKEN_INVALID:q,ERROR_TOKEN_MISSING:U,ERROR_UNSUPPORTED_VERSION:S,ERROR_WRONG_REGION:I,default:Q,defaultEndpoint:R,defaultScriptUrlPattern:W,defaultTlsEndpoint:p,load:X});const ee="@fpjs@client@",te=()=>Date.now();class ne{constructor(e){var t;this.tag=e.tag||null,this.linkedId=e.linkedId||null,this.extendedResult=null!==(t=e.extendedResult)&&void 0!==t&&t}toKey(){return`${JSON.stringify(this.tag)}__${JSON.stringify(this.linkedId)}__${this.extendedResult}`}}function re(e,t){return`${t}__${e}`}function oe(e,t){return e.replace(`${t}__`,"")}class ie{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;this.prefix=e}set(e,t){window.localStorage.setItem(re(e,this.prefix),JSON.stringify(t))}get(e){const t=window.localStorage.getItem(re(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.localStorage.removeItem(re(e,this.prefix))}allKeys(){return Object.keys(window.localStorage).filter((e=>e.startsWith(this.prefix))).map((e=>oe(e,this.prefix)))}}class ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;this.prefix=e}set(e,t){window.sessionStorage.setItem(re(e,this.prefix),JSON.stringify(t))}get(e){const t=window.sessionStorage.getItem(re(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.sessionStorage.removeItem(re(e,this.prefix))}allKeys(){return Object.keys(window.sessionStorage).filter((e=>e.startsWith(this.prefix))).map((e=>oe(e,this.prefix)))}}class ae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600,n=arguments.length>2?arguments[2]:void 0;this.cache=e,this.cacheTime=t,this.nowProvider=n||te}get(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield this.cache.get(e.toKey());if(!t)return;const n=yield this.nowProvider(),r=Math.floor(n/1e3);if(!(t.expiresAt<r))return t.body;yield this.cache.remove(e.toKey())}))}set(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield this.wrapCacheEntry(t);yield this.cache.set(e.toKey(),n)}))}clearCache(){return n.__awaiter(this,void 0,void 0,(function*(){const e=yield this.cache.allKeys();yield Promise.all(e.map((e=>this.cache.remove(e))))}))}wrapCacheEntry(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield this.nowProvider(),n=Math.floor(t/1e3)+this.cacheTime;return{body:e,expiresAt:n}}))}}class se{constructor(){this.enclosedCache=function(){const e={};return{set(t,n){e[t]=n},get(t){const n=e[t];if(n)return n},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class ue{set(){}get(){}remove(){}allKeys(){return[]}}var le;!function(e){e.Memory="memory",e.LocalStorage="localstorage",e.SessionStorage="sessionstorage",e.NoCache="nocache"}(le||(le={}));const de={[le.Memory]:()=>(new se).enclosedCache,[le.LocalStorage]:e=>new ie(e),[le.SessionStorage]:e=>new ce(e),[le.NoCache]:()=>new ue},fe=e=>de[e];class he{constructor(e){var t;let n;if(this.inFlightRequests=new Map,this.agentPromise=null,this.customAgent=null==e?void 0:e.customAgent,this.agent={get:()=>{throw new Error("FPJSAgent hasn't loaded yet. Make sure to call the init() method first.")}},this.loadOptions=null==e?void 0:e.loadOptions,(null==e?void 0:e.cache)&&(null==e?void 0:e.cacheLocation)&&console.warn("Both `cache` and `cacheLocation` options have been specified in the FpjsClient configuration; ignoring `cacheLocation` and using `cache`."),null==e?void 0:e.cache)n=e.cache;else{if(this.cacheLocation=(null==e?void 0:e.cacheLocation)||le.SessionStorage,!fe(this.cacheLocation))throw new Error(`Invalid cache location "${this.cacheLocation}"`);(e=>{switch(e){case le.SessionStorage:try{window.sessionStorage.getItem("item")}catch(e){return!1}return!0;case le.LocalStorage:try{window.localStorage.getItem("item")}catch(e){return!1}return!0;default:return!0}})(this.cacheLocation)||(this.cacheLocation=le.Memory),n=fe(this.cacheLocation)(null==e?void 0:e.cachePrefix)}if((null==e?void 0:e.cacheTimeInSeconds)&&e.cacheTimeInSeconds>86400)throw new Error("Cache time cannot exceed 86400 seconds (24 hours)");const r=null!==(t=null==e?void 0:e.cacheTimeInSeconds)&&void 0!==t?t:3600;this.cacheManager=new ae(n,r)}init(e){return n.__awaiter(this,void 0,void 0,(function*(){var t,n;if(!this.loadOptions&&!e)throw new TypeError("No load options provided");const r=Object.assign(Object.assign(Object.assign({},this.loadOptions),e),{integrationInfo:[...(null===(t=this.loadOptions)||void 0===t?void 0:t.integrationInfo)||[],...(null==e?void 0:e.integrationInfo)||[],"fingerprintjs-pro-spa/1.3.2"]});if(!this.agentPromise){const e=null!==(n=this.customAgent)&&void 0!==n?n:Z;this.agentPromise=e.load(r).then((e=>(this.agent=e,e))).catch((e=>{throw this.agentPromise=null,e}))}return this.agentPromise}))}getVisitorData(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const r=he.makeCacheKey(t).toKey();if(!e.inFlightRequests.has(r)){const o=e._identify(t,n).finally((()=>{e.inFlightRequests.delete(r)}));e.inFlightRequests.set(r,o)}return yield e.inFlightRequests.get(r)}()}))}getVisitorDataFromCache(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=he.makeCacheKey(t),r=yield e.cacheManager.get(n);return r?Object.assign(Object.assign({},r),{cacheHit:!0}):void 0}()}))}isInCache(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return Boolean(yield e.getVisitorDataFromCache(t))}()}))}clearCache(){return n.__awaiter(this,void 0,void 0,(function*(){yield this.cacheManager.clearCache()}))}static makeCacheKey(e){return new ne(e)}_identify(e){return n.__awaiter(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const r=he.makeCacheKey(e);if(!n){const e=yield t.cacheManager.get(r);if(e)return Object.assign(Object.assign({},e),{cacheHit:!0})}const o=yield t.agent.get(e);return yield t.cacheManager.set(r,o),Object.assign(Object.assign({},o),{cacheHit:!1})}()}))}}var Re=function(){throw new Error("You forgot to wrap your component in <FpjsProvider>.")},pe={getVisitorData:Re,clearCache:Re},ve=t.createContext(pe),Ee=function(e,t){return Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ee(e,t)};var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ge.apply(this,arguments)};function _e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Oe(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}))}function me(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function ye(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Ie="2.6.2",we=function(){return"undefined"==typeof window||void 0===window.document};function Se(e){var t=e.checkCondition,n=e.intervalMs,r=void 0===n?250:n,o=e.timeoutMs,i=void 0===o?2e3:o;return new Promise((function(e,n){var o=setTimeout((function(){clearInterval(c),n(new Error("Timeout"))}),i),c=setInterval((function(){t()&&(clearTimeout(o),clearInterval(c),e())}),r)}))}var Te;function Ne(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"==typeof window)return!1;for(var n=0,r=e;n<r.length;n++)if((0,r[n])())return!0;return!1}((function(){return"next"in window&&Boolean(window.next)}),(function(){return document.querySelector("script[id=__NEXT_DATA__]")}))}function be(){var e;return null===(e=null===window||void 0===window?void 0:window.next)||void 0===e?void 0:e.version}function Ae(e){try{var t=JSON.parse("%DETECTED_ENV%");if("object"==typeof t)return t}catch(e){}return n=e.context,Ne()?{name:Te.Next,version:be()}:function(e){return e.classRenderReceivesAnyArguments}(n)?{name:Te.Preact}:function(e){return!e.classRenderReceivesAnyArguments}(n)?{name:Te.React}:{name:Te.Unknown};var n}!function(e){e.React="react",e.Preact="preact",e.Next="next",e.Unknown="unknown"}(Te||(Te={}));var Pe=function(e){function n(t){return e.call(this,t)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.render=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.detectedEnv){var r={context:{classRenderReceivesAnyArguments:e.length>0}};this.detectedEnv=Ae(r)}return t.cloneElement(this.props.children,{env:this.detectedEnv})},n}(t.Component),Ce="@fingerprintjs/fingerprintjs-pro-react".split("/")[1];function Le(e){var t=e;return n.jsxRuntimeExports.jsx(Pe,{children:n.jsxRuntimeExports.jsx(xe,ge({},t))})}function xe(e){var r=this,o=e.children,i=e.forceRebuild,c=e.cache,a=e.cacheTimeInSeconds,s=e.cachePrefix,u=e.cacheLocation,l=e.customAgent,d=e.loadOptions,f=e.env,h=t.useRef(),R=t.useRef(),p=t.useMemo((function(){return{cache:c,cacheTimeInSeconds:a,cachePrefix:s,cacheLocation:u,customAgent:l,loadOptions:d}}),[d,c,a,s,u,l]),v=t.useCallback((function(){var e="".concat(Ce,"/").concat(Ie);if(f){var t=f.version?"".concat(f.name,"/").concat(f.version):f.name;e+="/".concat(t)}var n=ge(ge({},p),{loadOptions:ge(ge({},d),{integrationInfo:ye(ye([],d.integrationInfo||[],!0),[e],!1)})}),r=new he(n);return R.current=r.init(),r}),[p,f,d]),E=t.useCallback((function(){return Oe(r,void 0,void 0,(function(){var e=this;return me(this,(function(t){switch(t.label){case 0:if(we())throw new Error("FpjsProvider client cannot be used in SSR");return h.current?[3,2]:[4,Se({checkCondition:function(){return Boolean(h.current)}}).catch((function(){return Oe(e,void 0,void 0,(function(){return me(this,(function(e){return v(),[2]}))}))}))];case 1:t.sent(),t.label=2;case 2:return[2,h.current]}}))}))}),[v]),g=t.useCallback((function(e,t){return Oe(r,void 0,void 0,(function(){var n;return me(this,(function(r){switch(r.label){case 0:return[4,E()];case 1:return n=r.sent(),[4,R.current];case 2:return r.sent(),[2,n.getVisitorData(e,t)]}}))}))}),[E]),_=t.useCallback((function(){return Oe(r,void 0,void 0,(function(){return me(this,(function(e){switch(e.label){case 0:return[4,E()];case 1:return[4,e.sent().clearCache()];case 2:return e.sent(),[2]}}))}))}),[E]),O=t.useMemo((function(){return{clearCache:_,getVisitorData:g}}),[_,g]);return t.useEffect((function(){h.current&&!i||(h.current=v())}),[i,p,v]),n.jsxRuntimeExports.jsx(ve.Provider,ge({value:O},{children:o}))}function De(e,t){if(!e)throw new TypeError("".concat(t," must not be null or undefined"))}function je(e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n=Fe),De(e,"getOptions");var o,i,c=(o=e,i=t.useRef(),t.useEffect((function(){i.current=o}),[o]),i.current),a=n.immediate,s=t.useContext(ve).getVisitorData,u=t.useState({isLoading:!1}),l=u[0],d=u[1],h=t.useCallback((function(t){return void 0===t&&(t={}),Oe(r,void 0,void 0,(function(){var n,r,o,i,c,a,u,l;return me(this,(function(f){switch(f.label){case 0:De(t,"getDataParams"),n=t.ignoreCache,r=_e(t,["ignoreCache"]),f.label=1;case 1:return f.trys.push([1,3,4,5]),d((function(e){return ge(ge({},e),{isLoading:!0})})),o=e.ignoreCache,i=_e(e,["ignoreCache"]),c=ge(ge({},i),r),[4,s(c,"boolean"==typeof n?n:o)];case 2:return a=f.sent(),d((function(e){return ge(ge({},e),{data:a,isLoading:!1,error:void 0})})),[2,a];case 3:throw u=f.sent(),l=function(e){return e instanceof Error?e:new Error(String(e))}(u),l.name="FPJSAgentError",d((function(e){return ge(ge({},e),{data:void 0,error:l})})),l;case 4:return d((function(e){return e.isLoading?ge(ge({},e),{isLoading:!1}):e})),[7];case 5:return[2]}}))}))}),[e,s]);t.useEffect((function(){!a||c&&f(e,c)||h().catch((function(e){console.error("Failed to fetch visitor data on mount: ".concat(e))}))}),[a,h,c,e]);var R=l.isLoading,p=l.data,v=l.error;return{getData:h,isLoading:R,data:p,error:v}}var Fe={immediate:!0};const ke="abuse",Me=new n.HiveLogger;function Ke(e,t,n,r,o){const i=a.getMetricsReporter(),c=i.createCounter({ns:"abuse",name:"fingerprintjs/loading_result"},{is_success:String(t),event:e,err:n,region:o});c.increment(),c.record();i.createStats({ns:ke,name:"fingerprintjs/loading_latency"},{is_success:String(t),event:e,err:n,region:o}).record(r)}const Ve={getVisitorData:()=>(c.reportException({err:new Error("Missing <AbuseFpjsProvider> in component tree"),severity:c.SEVERITY.USER_ERROR,tags:["fingerprintjs"]}),Promise.resolve({visitorId:"",requestId:"",sealedResult:""}))},Ue=t.createContext(Ve),qe=()=>s.isSeleniumTest()||"undefined"!=typeof jest,Be=async(e,t,n=2e3,r=!1)=>qe()?{visitorId:"test_visitor_id",requestId:"test_request_id",sealedResult:"test_sealed_result"}:{visitorId:"",requestId:"",sealedResult:""};function Ge({region:e,shouldInvokeFPJS:r,children:o}){const{getData:i}=je({extendedResult:!0},{immediate:!1}),s=t.useMemo((()=>i),[]),u=l.default.useCallback((async(t,o,i=2e3,u=!1)=>{if(qe()||!r)return await Be(0,0,i,u);!function(e,t){const n=a.getMetricsReporter().createCounter({ns:"abuse",name:"fingerprintjs/invocation"},{event:e,region:t});n.increment(),n.record()}(t,e);const l=Date.now();try{const r=await s({timeout:i,ignoreCache:u}),a=Date.now(),d=void 0!==r.sealedResult;return function(e,t,r){if(!r.sealedResult)try{Me.log(new n.FingerprintJsLogsRow({email:t,event:e,request_id:r.requestId,visitor_id:r.visitorId,visitor_found:r.visitorFound,confidence_score:void 0,confidence_comment:r.confidence?r.confidence.comment:"",browser_name:r.browserName,browser_version:r.browserVersion,device:r.device,incognito:r.incognito,ip:r.ip,latitude:r.ipLocation?String(r.ipLocation.latitude):"",longitude:r.ipLocation?String(r.ipLocation.longitude):"",timezone:r.ipLocation?String(r.ipLocation.timezone):"",city:r.ipLocation&&r.ipLocation.city?r.ipLocation.city.name:void 0,country:r.ipLocation&&r.ipLocation.country?r.ipLocation.country.name:void 0,os:r.os,os_version:String(r.osVersion),confidence_score_double:r.confidence.score}))}catch(e){c.reportException({err:e,severity:c.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}}(t,o,r),Ke(t,d,"None",a-l,e),{visitorId:r.visitorId,requestId:r.requestId,sealedResult:r.sealedResult?r.sealedResult:""}}catch(r){const i=Date.now();return function(e,t){try{Me.log(new n.FingerprintJsLogsRow({email:t,event:e,request_id:"",visitor_id:"",visitor_found:!1,confidence_score:void 0,confidence_comment:"",browser_name:"",browser_version:void 0,device:"",incognito:void 0,ip:"",latitude:"",longitude:"",timezone:"",city:"",country:"",os:"",os_version:"",confidence_score_double:void 0}))}catch(e){c.reportException({err:e,severity:c.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}}(t,o),Ke(t,!1,r instanceof Error?r.message:"Unknown error",i-l,e),c.reportException({err:r,severity:c.SEVERITY.NONCRITICAL,tags:["fingerprintjs"]}),{visitorId:"",requestId:"",sealedResult:""}}}),[s,e,r]),d=l.default.useMemo((()=>({getVisitorData:u})),[u]);return l.default.createElement(l.default.Fragment,null,l.default.createElement(Ue.Provider,{value:d},o))}e.AbuseFpjsProvider=({children:e,loadInTest:t=!1,loadingComponent:o=null})=>{const[a,s]=l.default.useState();l.default.useMemo((()=>{qe()?s(new n.FingerPrintJSConstants({token:"test_token",region:"US",shouldInvoke:!1})):async function(e){return await r.Edison.fetch(n.FingerPrintJSService,"FetchConstants",e?{currentUrl:e}:void 0)}().then((e=>{s(e)})).catch((e=>{c.reportException({err:e,severity:c.SEVERITY.NONCRITICAL,tags:["fingerprintjs"]}),s(new n.FingerPrintJSConstants({token:"",region:"US",shouldInvoke:!1}))}))}),[]);const u=l.default.useMemo((()=>({getVisitorData:Be})),[]);return qe()&&!t?l.default.createElement(Ue.Provider,{value:u},e):a?l.default.createElement(l.default.Fragment,null,l.default.createElement(Le,{loadOptions:{apiKey:a.token,endpoint:"https://fp.dropbox.com",modules:[i.Pc(),i.dc(),i.Fc()],urlHashing:{path:!0,query:!0,fragment:!0},cacheTimeInSeconds:3600},customAgent:i.FingerprintJS},l.default.createElement(Ge,{shouldInvokeFPJS:a.shouldInvoke,region:a.region},e))):l.default.createElement(l.default.Fragment,null,o)},e.useAbuseFpjsContext=()=>t.useContext(Ue),e.withAbuseFpjsContext=function(e){const t=t=>l.default.createElement(Ue.Consumer,null,(n=>l.default.createElement(e,{...t,fpjsContext:n})));var n;return t.displayName=`WithAbuseFpjsContext(${n=e,n.displayName||n.name||"Component"})`,t}}));
//# sourceMappingURL=c_abuse_fingerprintjs_abuse_fpjs_provider.js-vfl3ceKbL.map

//# debugId=93cef00d-e010-3be3-a6f8-3319aeb96e14