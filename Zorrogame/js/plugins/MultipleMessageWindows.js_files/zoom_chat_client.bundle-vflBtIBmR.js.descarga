!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="051168fe-eb2e-33c5-8816-72f41d331000")}catch(e){}}();
(() => {const define = dbxPithosConfig._define, require = dbxPithosConfig._require; define((()=>(()=>{"use strict";var e={8732:(e,t,n)=>{n.d(t,{q:()=>r});let i=!0,a=null;const o="undefined"==typeof jest?"initial data wasn't initialized yet, you need to call js/init_data/init_raw:initRaw function first":"initial data wasn't initialized yet, you need to call js/init_data/init_test.test_util:initTest function first";function r(e,t=!0){t?globalThis.__init_data_raw__=e:(a=e,i=!1)}function s(){if(i){if("string"!=typeof globalThis.__init_data_raw__)throw new Error(o);return globalThis.__init_data_raw__}if("string"!=typeof a)throw new Error(o);return a}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{var e=n(8732);function t(t,n=!0){(0,e.q)(t,n)}t(window.dbxPithosConfig.base64InitData,!1)})(),(()=>{var e,t,a,o,r,s,l,d,c,u,h,f;n.r(i),function(e){e.Critical="critical",e.NonCritical="non-critical",e.Operational="operational",e.UserError="user-error",e.Uncaught="uncaught"}(e||(e={})),function(e){e.ChatIsNotRequested="CHAT_IS_NOT_REQUESTED",e.ChatIsRequested="CHAT_IS_REQUESTED"}(t||(t={})),function(e){e.DoNotTerminateChatSession="DO_NOT_TERMINATE_CHAT_SESSION"}(a||(a={})),function(e){e.Hiddden="HIDDEN",e.Visible="VISIBLE"}(o||(o={})),function(e){e.ChatBubble="CHAT_BUBBLE",e.ChatWindow="CHAT_WINDOW"}(r||(r={})),function(e){e.UserSwtichCompany="USER_SWTICHED_COMPANY",e.UserNotSwtichCompany="USER_NOT_SWTICHED_COMPANY"}(s||(s={})),function(e){e.WWW_DBX_HOST="TRUSTED_DBX_HOST",e.DOCSEND_HOST="TRUSTED_DOCSEND_HOST",e.HELP_CENTER_HOST="TRUSTED_HELP_CENTER",e.EXPERIENCE_HOST="TRUSTED_EXPERIENCE_HOST",e.SIGN_CENTER_HOST="TRUSTED_SIGN_CENTER",e.DASH_DBX_HOST="TRUSTED_DASH_HOST",e.HELLOSIGN_HOST="TRUSTED_HELLOSIGN_HOST",e.UNSUPPORTED_HOST="UNSUPPORTED_HOST"}(l||(l={})),function(e){e.DOCSEND_CHAT="DOCSEND_CHAT",e.DASH_SALES_CHAT="DASH_SALES_CHAT",e.DASH_CX_CHAT="DASH_CX_CHAT",e.DBX_SALES_CHAT="DBX_SALES_CHAT",e.DBX_CX_CHAT="DBX_CX_CHAT",e.HELLOSIGN_CX_CHAT="HELLOSIGN_CX_CHAT",e.HELLOSIGN_CX_CHATBOT="HELLOSIGN_CX_CHATBOT",e.UNSUPPORTED_CHAT="UNSUPPORTED_CHAT"}(d||(d={})),function(e){e.DOCSEND_ENTITLEMENTS="docsendEntitlements",e.WWW_DBX_ENTITLEMENTS="wwwDbxEntitlements",e.HELP_CENTER_ENTITLEMENTS="helpCenterEntitlements",e.EXPERIENCE_ENTITLEMENTS="experienceEntitlements",e.SIGN_CENTER_ENTITLEMENTS="signCenterEntitlements",e.DASH_DBX_ENTITLEMENTS="dashDbxEntitlements",e.UNSUPPORTED_ENTITLEMENTS="unsupportedEntitlements",e.HELLOSIGN_ENTITLEMENTS="hellosignEntitlements"}(c||(c={})),function(e){e.PROACTIVE_CHAT="proactive_chat",e.REACTIVE_CHAT="reactive_chat",e.UNSUPPORTED_CHAT="unsupported_chat"}(u||(u={})),function(e){e.INITIALIZED="zoomChatInitiated",e.SUCCESS="zoomChatInitiationSuccess",e.FAILED="zoomChatInitiationFailed",e.NETWORK_FAILED="zoomChatNetworkFailed",e.TIMEOUT_FAILED="zoomChatTimeOutFailed",e.EXPAND="zoomChatMaximized",e.MINIMIZE="zoomChatMinimized",e.END="zoomChatEnded",e.CHATREQUESTED="zoomChatRequested",e.DISPLAYED="zoomChatInitialDisplay",e.LOGOUT="zoomChatLogoutByUser",e.CONSENTDECLINED="zoomChatConsentDeclined",e.SALESCHAT_DISALLOWED_COUNTRY="zoomSalesChatDisallowedCountry",e.SALES_EXPERIMENT_PRESENTED="zoomSalesChatExperimentPresented"}(h||(h={})),function(e){e.ZOOM="ZOOM",e.DECAGON="DECAGON"}(f||(f={}));const C=60,E=10,g=1e3,S=3e3,T=100,_=100,m="unified_chat_init",I="unified_dash_chat_init",p="dbx_sales_chat_login_init",N="db-snapengage-visible",O="__Secure-dbx_consent",A="performance and functionality",D="dbx_unified_chat_iframe",b="dbx-unified-chat-container",R=1,v="dbx_unified_chat_state",y="zoom_chat_requested_start_time",w="zoom_chat_initial_display_time",L="zoom_chat_session_end_time",H="dbx_unified_chat_session_logout",U="dbx_unified_chat_on_checkout",P="dbx_unified_chat_end_to_chat_state",F="dbxSalesChatCookieInit",k="dbxSalesChatLoginCookieInit",B="dbxCxChatCookieInit",M="dbxDashChatCookieInit",W="helloSignCXChatCookieInit",x="_tk",X="ios_upgrade_trigger_",G=".dropbox.com",Z={[d.DBX_SALES_CHAT]:F,[d.DBX_CX_CHAT]:B,[d.DASH_SALES_CHAT]:M,[d.HELLOSIGN_CX_CHAT]:W},z=[d.DOCSEND_CHAT,d.DASH_SALES_CHAT,d.DBX_CX_CHAT,d.DBX_SALES_CHAT],$=[d.DOCSEND_CHAT,d.DBX_CX_CHAT,d.DASH_SALES_CHAT],V=new Set([d.DOCSEND_CHAT,d.DBX_SALES_CHAT,d.DBX_CX_CHAT,d.HELLOSIGN_CX_CHAT]),K={"/plans":10,"/business":10,"/upgrade":10,"/sign":10,"/backup":10,"/contact":10,"/individual":10,"/business/try":10,"/buy":10,"/low-space":10,"/official-site":10,"/official-teams-page":10,"/plus":10,"/replay":10,"/space-upgrade":10,"/buy/plus":10,"/try/teams":10,"/try/business":10,"/overview/teams":10,"/features/share/send-large-files":10,"/features/cloud-storage":10,"/buy/business/advanced":10,"/buy/professional":10,"/buy/business/standard":10,"/login":3},J="/login",q="/checkout",j={"/products/dropbox-fax":25,"/dropbox-esignature-solution":10,"/features":10,"/integrations/dropbox":10,"/dropbox-sign-api":10,"/products/dropbox-sign/pricing":10,"/integrations":10,"/products/dropbox-sign-api":10,"/products/dropbox-sign":10,"/":10},Y={"/get_help":0,"/get_help/*/contact-us":0,"/get_help/chat":0,"/premium-support":0},Q=["/get_help","/get_help/*/contact-us","/get_help/chat","/premium-support"],ee="French",te="Italian",ne="German",ie="Spanish",ae="Portuguese",oe="Korean",re="Mandarin or Cantonese",se="Mandarin (Simplified Chinese)",le="Mandarin (Traditional Chinese)",de="Cantonese (Hong Kong Chinese)",ce="Cantonese (Macau Chinese)",ue="Hindi",he=["ID"],fe=5,Ce=1e3;var Ee,ge,Se,Te;!function(e){e.GET_BROWSER_STATUS="To check browser is Safari",e.SCRIPT_TAG_SUCCESS="Success in adding script tag to iframe",e.SCRIPT_TAG_ERROR="Failed to add script tag to iframe",e.EXPAND_BUTTON_CLICKED="User clicked expand button",e.MINIMIZE_BUTTON_CLICKED="User clicked minimize button",e.CHAT_WIDGET_LOADED="Chat widget loaded successfully inside iframe",e.CHAT_WIDGET_NOT_LOADED="Failed to load chat inside iframe widget maximum retries reached",e.FETCH_ZOOM_CHAT_CREDENTIALS="Fetching Zoom chat credentials",e.FETCH_DOCSEND_CURRENT_USER_INFO="Fetching DocSend current user info",e.FETCH_DROPBOX_CURRENT_USER_INFO="Fetching Dropbox current user info",e.FETCH_HELLOSIGN_CURRENT_USER_INFO="Fetching Hellosign current user info",e.FETCH_BROWSER_LANGUAGE_INFO="Fetching browser language info",e.FETCH_CX_CHAT_REQUESTED_LANGUAGE_INFO="Fetching CX chat requested language info",e.FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO="Fetching User selected product support package info",e.FETCH_BROWSER_PATH_INFO="Fetching DBX browser path info",e.FETCH_CHAT_TYPE_INFO="Fetch chat type info",e.END_CHAT_BUTTON_CLICKED="User clicked end chat button",e.PROACTIVE_END_CHAT_BUTTON_CLICKED="User clicked proactive chat feature end button",e.DELETE_ATTACHED_IFRAME_ON_END_CHAT_BUTTON_CLICK="Delete attached iframe as user clicked end chat button",e.RELOAD_PAGE_AFTER_CHAT_ENDS="Requesting reload page after chat ends",e.UNHANDLED_ACTION_MESSAGES="Unhandled action from top window",e.SET_COOKIE_FOR_DBX_SALES_CHAT="Setting cookie for DBX sales chat",e.RESPONSE_FOR_IS_CHATTING_STATUS="RES_TO_SEND_STATUS_OF_IS_CHATTING"}(Ee||(Ee={})),function(e){e.SEND_BROWSER_STATUS="Sending browser status",e.SEND_ZOOM_CHAT_CREDENTIALS="Sending Zoom chat credentials",e.CHECK_CHAT_WIDGET_STATUS="Checking chat widget status",e.SEND_DOCSEND_CURRENT_USER_INFO="Sending DocSend current user info",e.SEND_BROWSER_PATH_INFO="Sending DBX browser path info",e.SEND_DROPBOX_CURRENT_USER_INFO="Sending Dropbox current user info",e.SEND_HELLOSIGN_CURRENT_USER_INFO="Sending Hellosign current user info",e.SEND_BROWSER_CURRENT_LANGUAGE_INFO="Sending browser current language info",e.SEND_CURRENT_CHAT_TYPE_INFO="Sending current chat type info",e.LOGOUT_CALLBACK="Performing logout callback as user DocSend ends the chat",e.SET_ZOOM_CHAT_WIDGET_TO_OPEN_WINDOW="Requesting chat window to open mode when the user requests a chat",e.SWITCH_COMPANY_CALLBACK_MESSAGE="Sending as user performs switch company",e.UNHANDLED_ACTION_MESSAGES="Unhandled action from iframe",e.SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO="Send CX chat requested language info",e.SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO="Send user selected product support package info",e.REQUEST_IS_CHATTING_MESSAGE="Requesting iframe to fetch the status of isChatting under zoomCampaignSdk"}(ge||(ge={})),function(e){e.CHAT_WIDGET_NOT_LOADED_MAX_RETRY_REACHED="Failed to load chat inside iframe - maximum retries reached",e.TOGGLE_REGISTRATION_FAILED_ERROR="Failed to register Open/Close Zoom Campaign events",e.END_BUTTON_NOT_FOUND_ERROR="Failed to find Zoom Chat widget end button",e.MINIMIZE_BUTTON_NOT_FOUND_ERROR="Unable to find minimize button for the Zoom chat widget campaign",e.MESSAGE_BOX_HEIGHT_SET_ERROR="Unable to set height for chat message box for Safari check of Zoom chat widget campaign",e.CHAT_END_BUTTON_NOT_FOUND_ERROR="Unable to find chat end button for the Zoom chat widget campaign",e.START_CHAT_BUTTON_NOT_FOUND_ERROR="Unable to find start new chat button for the Zoom chat widget campaign",e.ZOOM_CAMPAIGN_SDK_DOES_NOT_HAVE_AN_OPEN_METHOD="zoomCampaignSdk does not have an open method",e.ZOOM_CAMPAIGN_SDK_IS_NOT_AVAILABLE="Zoom Campaign SDK is not available",e.FAILED_WHEN_TRYING_TO_REGISTER_THE_ZOOM_CAMPAIGN_SDK_EVENT="Failed when trying to register the zoom Campaign SDK event",e.WEB_CHAT_DIV_NOT_FOUND="webChatDiv of zoom chat widget not found",e.SHADOW_DOM_NOT_AVAILABLE="Shadow DOM of zoom chat widget not available",e.START_NEW_CHAT_BUTTON_NOT_FOUND="Start New Chat button footer inside Shadow DOM not found",e.WINDOW_MASK_END_BUTTON_NOT_FOUND="Window mask of end button inside Shadow DOM not found"}(Se||(Se={})),function(e){e.IDENTIFIED_HOST_OR_SUPPORTED_ENTITLEMENTS_NULL="Identified host or supported entitlements is null or undefined",e.TIMER_VALUE_FETCH_ERROR="Error occurred while fetching timer value of Invalid URL",e.IFRAME_EXECUTION_ERROR="Error executing function in iframe",e.IFRAME_CONTENT_WINDOW_NULL_ERROR="Iframe contentWindow is null",e.IFRAME_NOT_FOUND_ERROR="Iframe not found",e.SCRIPT_TAG_ATTACHMENT_ERROR="Error during script tag attachment to iframe",e.CHAT_CLIENT_SETUP_INITIALIZATION_ERROR="Error initializing chat client setup",e.CHAT_IFRAME_LOAD_TIMEOUT_ERROR="Timed-out while waiting for chat iframe load event",e.ERROR_ATTACHING_MESSAGE_EVENT_LISTENER="Error attaching message event listener",e.ERROR_CLEARING_TIMEOUT="Error while clearing timeout",e.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET="Iframe not found or cookie already set",e.ERROR_ZOOM_CHAT_RELOAD_FAILED="Zoom chat reload failed. Steps were not executed",e.ERROR_OPEN_CHAT_WINDOW_METHOD_UNAVAILABLE="Zoom chat client or handleOpenChatWindowCallback method is not available",e.ERROR_CONSENT_METHOD_UNAVAILABLE="Zoom chat client or consentGrantedProceedDBXSalesChatToLoad method is not available as we DE-REG this callback explicitly.",e.INVALID_ENTRY_PAGE_KEY="Detected an invalid entry page key.",e.NO_ENTRY_PATH="Entry path is missing or invalid.",e.ENTRY_PAGE_KEY_NULL_OR_UNDEFINED="Entry page key is null or undefined.",e.NO_VALID_ENTRY_PAGE="No valid entry page found.",e.DETECTED_LOGIN_PAGE_WITHOUT_COOKIE="Chat should not be loaded in /login page without loginPageCookie.",e.INVALID_CHAT_COOKIE="Detected an invalid chat cookie.",e.NO_VALID_CHAT_COOKIE="No valid chat cookie present.",e.INVALID_CHAT_TYPE="Unrecognized or invalid chat type.",e.UNIFIED_CHAT_COOKIE_NOT_SET="Unified chat cookie is missing.",e.INITIALIZATION_FAILED="Failed to initialize supported entitlements.",e.NO_MATCHING_DOMAIN="No matching domain for initialization.",e.INVALID_ENTRY_POINT="Failed to validate the entry point.",e.PAGE_PATH_VERIFICATION="Current page path verification failed.",e.FETCH_HOSTNAME="Unable to fetch hostname from the URL.",e.FETCH_PATHNAME="Unable to fetch pathname from the URL.",e.UNSUPPORTED_ENTITLEMENTS="Unsupported entitlements detected during chat configuration.",e.OUTSIDE_OPERATIONAL_HOURS="Unable to load chat during non-operational hours.",e.MISSING_CHAT_OPERATIONAL_HOURS="Missing chat operational hours, unable to proceed with chat initialization.",e.ZOOM_CHAT_CONSENT_LOADER="Failed to load the Zoom chat client or the consentGrantedProceedDBXSalesChatToLoad method is missing.",e.MISSING_BUSINESS_HOURS_CONFIG="Missing configuration data for business hours.",e.MISSING_BUSINESS_TIMEZONE="Missing business timezone configuration.",e.MISSING_BUSINESS_HOURS="Missing business hours.",e.MISSING_CUSTOM_HOUR_RANGES="Business hours configuration does not contain customHourRanges.",e.ZOOM_CHAT_CONSENT_DECLINED="User declined consent, did not load the Zoom chat client.",e.MISSING_RELOAD_ZOOM_CHAT_CLIENT="Zoom Chat client is not available or reloadZoomChatClient is missing."}(Te||(Te={}));const _e={type:e.Critical,message:Te.INVALID_ENTRY_PAGE_KEY},me={type:e.Operational,message:Te.NO_ENTRY_PATH},Ie={type:e.NonCritical,message:Te.ENTRY_PAGE_KEY_NULL_OR_UNDEFINED},pe={type:e.Operational,message:Te.NO_VALID_ENTRY_PAGE},Ne={type:e.Operational,message:Te.DETECTED_LOGIN_PAGE_WITHOUT_COOKIE},Oe={type:e.Critical,message:Te.INVALID_CHAT_COOKIE},Ae={type:e.Critical,message:Te.NO_VALID_CHAT_COOKIE},De={type:e.Critical,message:Te.INVALID_CHAT_TYPE},be={type:e.Operational,message:Te.UNIFIED_CHAT_COOKIE_NOT_SET},Re={type:e.Critical,message:Te.INITIALIZATION_FAILED},ve={type:e.Operational,message:Te.NO_MATCHING_DOMAIN},ye={type:e.Critical,message:Te.INVALID_ENTRY_POINT},we={type:e.Critical,message:Te.PAGE_PATH_VERIFICATION},Le={type:e.UserError,message:Te.FETCH_HOSTNAME},He={type:e.UserError,message:Te.FETCH_PATHNAME},Ue={type:e.Critical,message:Te.UNSUPPORTED_ENTITLEMENTS},Pe={type:e.Operational,message:Te.OUTSIDE_OPERATIONAL_HOURS},Fe={type:e.Critical,message:Te.ZOOM_CHAT_CONSENT_LOADER},ke=e.Critical,Be=Te.MISSING_BUSINESS_HOURS_CONFIG,Me=e.Critical,We=Te.MISSING_BUSINESS_TIMEZONE,xe=e.Critical,Xe=Te.MISSING_BUSINESS_HOURS,Ge=e.Critical,Ze=Te.MISSING_CUSTOM_HOUR_RANGES,ze=e.Critical,$e=Te.ZOOM_CHAT_CONSENT_DECLINED,Ve={type:e.NonCritical,message:Te.ERROR_CONSENT_METHOD_UNAVAILABLE},Ke={type:e.Critical,message:Te.ERROR_OPEN_CHAT_WINDOW_METHOD_UNAVAILABLE},Je={type:e.Critical,message:Te.MISSING_RELOAD_ZOOM_CHAT_CLIENT};function qe(e,t){if(!e)throw new Error(t)}const je=34028234663852886e22,Ye=-34028234663852886e22,Qe=4294967295,et=2147483647,tt=-2147483648;function nt(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>et||e<tt)throw new Error("invalid int 32: "+e)}function it(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Qe||e<0)throw new Error("invalid uint 32: "+e)}function at(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>je||e<Ye))throw new Error("invalid float 32: "+e)}const ot=Symbol("@bufbuild/protobuf/enum-type");function rt(e){const t=e[ot];return qe(t,"missing enum type on enum object"),t}function st(e,t,n,i){e[ot]=lt(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))),i)}function lt(e,t,n){const i=Object.create(null),a=Object.create(null),o=[];for(const e of t){const t=ct(e);o.push(t),i[e.name]=t,a[e.no]=t}return{typeName:e,values:o,findName:e=>i[e],findNumber:e=>a[e]}}function dt(e,t,n){const i={};for(const e of t){const t=ct(e);i[t.localName]=t.no,i[t.no]=t.localName}return st(i,e,t,n),i}function ct(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class ut{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=undefined,i=this.getType().runtime.bin,a=i.makeReadOptions(t);return i.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,a=i.makeReadOptions(t);return i.readMessage(n,e,a,this),this}fromJsonString(e,t){return this.fromJson(JSON.parse(e),t)}toBinary(e){const t=undefined,n=this.getType().runtime.bin,i=n.makeWriteOptions(e),a=i.writerFactory();return n.writeMessage(this,a,i),a.finish()}toJson(e){const t=undefined,n=this.getType().runtime.json,i=n.makeWriteOptions(e);return n.writeMessage(this,i)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}getType(){return Object.getPrototypeOf(this).constructor}}function ht(e,t,n,i){var a;const o=null!==(a=null==i?void 0:i.localName)&&void 0!==a?a:t.substring(t.lastIndexOf(".")+1),r={[o]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[o];return Object.setPrototypeOf(r.prototype,new ut),Object.assign(r,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new r).fromBinary(e,t),fromJson:(e,t)=>(new r).fromJson(e,t),fromJsonString:(e,t)=>(new r).fromJsonString(e,t),equals:(t,n)=>e.util.equals(r,t,n)}),r}function ft(e,t,n,i){return{syntax:e,json:t,bin:n,util:i,makeMessageType(e,t,n){return ht(this,e,t,n)},makeEnum:dt,makeEnumType:lt,getEnumType:rt}}var Ct;function Et(){let e=0,t=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(e|=(127&i)<<n,0==(128&i))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(t|=(127&i)<<n,0==(128&i))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function gt(e,t,n){for(let i=0;i<28;i+=7){const a=e>>>i,o=!(a>>>7==0&&0==t),r=255&(o?128|a:a);if(n.push(r),!o)return}const i=e>>>28&15|(7&t)<<4,a=!(t>>3==0);if(n.push(255&(a?128|i:i)),a){for(let e=3;e<31;e+=7){const i=t>>>e,a=!(i>>>7==0),o=255&(a?128|i:i);if(n.push(o),!a)return}n.push(t>>>31&1)}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(Ct||(Ct={}));const St=4294967296;function Tt(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let i=0,a=0;function o(t,o){const r=Number(e.slice(t,o));a*=n,i=i*n+r,i>=St&&(a+=i/St|0,i%=St)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?Nt(i,a):pt(i,a)}function _t(e,t){let n=pt(e,t);const i=2147483648&n.hi;i&&(n=Nt(n.lo,n.hi));const a=mt(n.lo,n.hi);return i?"-"+a:a}function mt(e,t){if(({lo:e,hi:t}=It(e,t)),t<=2097151)return String(St*t+e);const n=undefined,i=16777215&(e>>>24|t<<8),a=t>>16&65535;let o=(16777215&e)+6777216*i+6710656*a,r=i+8147497*a,s=2*a;const l=1e7;return o>=l&&(r+=Math.floor(o/l),o%=l),r>=l&&(s+=Math.floor(r/l),r%=l),s.toString()+Ot(r)+Ot(o)}function It(e,t){return{lo:e>>>0,hi:t>>>0}}function pt(e,t){return{lo:0|e,hi:0|t}}function Nt(e,t){return t=~t,e?e=1+~e:t+=1,pt(e,t)}const Ot=e=>{const t=String(e);return"0000000".slice(t.length)+t};function At(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Dt(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}function bt(){const e=new DataView(new ArrayBuffer(8)),t=undefined;if(void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),i=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const i="bigint"==typeof e?e:BigInt(e);if(i>n||i<t)throw new Error(`int64 invalid: ${e}`);return i},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>a||t<i)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const n=e=>qe(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),i=e=>qe(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),i(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),n(e),Tt(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),i(e),Tt(e)),dec:(e,t)=>_t(e,t),uDec:(e,t)=>mt(e,t)}}const Rt=bt();var vt;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(vt||(vt={}));class yt{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(it(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return nt(e),At(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){at(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){it(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){nt(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return nt(e),At(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=Rt.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=Rt.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=Rt.enc(e);return gt(t.lo,t.hi,this.buf),this}sint64(e){let t=Rt.enc(e),n=t.hi>>31,i,a;return gt(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Rt.uEnc(e);return gt(t.lo,t.hi,this.buf),this}}class wt{constructor(e,t){this.varint64=Et,this.uint32=Dt,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case vt.Varint:for(;128&this.buf[this.pos++];);break;case vt.Bit64:this.pos+=4;case vt.Bit32:this.pos+=4;break;case vt.LengthDelimited:let t=this.uint32();this.pos+=t;break;case vt.StartGroup:let n;for(;(n=this.tag()[1])!==vt.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return Rt.dec(...this.varint64())}uint64(){return Rt.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,Rt.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Rt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Rt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Lt(e,t){if(t instanceof e)return t;if(e.fieldWrapper)return e.fieldWrapper.wrapField(t);throw new Error(`cannot unwrap field value, ${e.typeName} does not define a field wrapper`)}function Ht(e,t){return e.fieldWrapper?e.fieldWrapper.unwrapField(t):t}function Ut(e){if("message"===e.fieldKind&&!e.repeated&&null==e.oneof)return Pt[e.message.typeName]}const Pt={"google.protobuf.DoubleValue":Ct.DOUBLE,"google.protobuf.FloatValue":Ct.FLOAT,"google.protobuf.Int64Value":Ct.INT64,"google.protobuf.UInt64Value":Ct.UINT64,"google.protobuf.Int32Value":Ct.INT32,"google.protobuf.UInt32Value":Ct.UINT32,"google.protobuf.BoolValue":Ct.BOOL,"google.protobuf.StringValue":Ct.STRING,"google.protobuf.BytesValue":Ct.BYTES};function Ft(e,t,n){if(t===n)return!0;if(e==Ct.BYTES){if(!(t instanceof Uint8Array&&n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case Ct.UINT64:case Ct.FIXED64:case Ct.INT64:case Ct.SFIXED64:case Ct.SINT64:return t==n}return!1}function kt(e){switch(e){case Ct.BOOL:return!1;case Ct.UINT64:case Ct.FIXED64:case Ct.INT64:case Ct.SFIXED64:case Ct.SINT64:return Rt.zero;case Ct.DOUBLE:case Ct.FLOAT:return 0;case Ct.BYTES:return new Uint8Array(0);case Ct.STRING:return"";default:return 0}}function Bt(e,t){const n=void 0===t;let i=vt.Varint,a=0===t;switch(e){case Ct.STRING:a=n||!t.length,i=vt.LengthDelimited;break;case Ct.BOOL:a=!1===t;break;case Ct.DOUBLE:i=vt.Bit64;break;case Ct.FLOAT:i=vt.Bit32;break;case Ct.INT64:case Ct.UINT64:a=n||0==t;break;case Ct.FIXED64:a=n||0==t,i=vt.Bit64;break;case Ct.BYTES:a=n||!t.byteLength,i=vt.LengthDelimited;break;case Ct.FIXED32:case Ct.SFIXED32:i=vt.Bit32;break;case Ct.SFIXED64:a=n||0==t,i=vt.Bit64;break;case Ct.SINT64:a=n||0==t}const o=undefined;return[i,Ct[e].toLowerCase(),n||a]}const Mt=Symbol("@bufbuild/protobuf/unknown-fields"),Wt={readUnknownFields:!0,readerFactory:e=>new wt(e)},xt={writeUnknownFields:!0,writerFactory:()=>new yt};function Xt(e){return e?Object.assign(Object.assign({},Wt),e):Wt}function Gt(e){return e?Object.assign(Object.assign({},xt),e):xt}function Zt(){return{makeReadOptions:Xt,makeWriteOptions:Gt,listUnknownFields(e){var t;return null!==(t=e[Mt])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[Mt]},writeUnknownFields(e,t){const n=undefined,i=e[Mt];if(i)for(const e of i)t.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,t,n,i){const a=e;Array.isArray(a[Mt])||(a[Mt]=[]),a[Mt].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i){const a=e.getType(),o=void 0===n?t.len:t.pos+n;for(;t.pos<o;){const[n,o]=t.tag(),r=a.fields.find(n);if(!r){const a=t.skip(o);i.readUnknownFields&&this.onUnknownField(e,n,o,a);continue}let s=e,l=r.repeated,d=r.localName;switch(r.oneof&&(s=s[r.oneof.localName],s.case!=d&&delete s.value,s.case=d,d="value"),r.kind){case"scalar":case"enum":const e="enum"==r.kind?Ct.INT32:r.T;if(l){let n=s[d];if(o==vt.LengthDelimited&&e!=Ct.STRING&&e!=Ct.BYTES){let i=t.uint32()+t.pos;for(;t.pos<i;)n.push($t(t,e))}else n.push($t(t,e))}else s[d]=$t(t,e);break;case"message":const n=r.T;l?s[d].push(n.fromBinary(t.bytes(),i)):s[d]instanceof n?s[d].fromBinary(t.bytes(),i):s[d]=Ht(n,n.fromBinary(t.bytes(),i));break;case"map":let[a,c]=zt(r,t,i);s[d][a]=c}}}}}function zt(e,t,n){const i=t.uint32(),a=t.pos+i;let o,r;for(;t.pos<a;){let[i]=t.tag();switch(i){case 1:o=$t(t,e.K);break;case 2:switch(e.V.kind){case"scalar":r=$t(t,e.V.T);break;case"enum":r=t.int32();break;case"message":r=e.V.T.fromBinary(t.bytes(),n)}}}if(void 0===o){let t=kt(e.K);o=e.K==Ct.BOOL?t.toString():t}if("string"!=typeof o&&"number"!=typeof o&&(o=o.toString()),void 0===r)switch(e.V.kind){case"scalar":r=kt(e.V.T);break;case"enum":r=0;break;case"message":r=new e.V.T}return[o,r]}function $t(e,t){let[,n]=Bt(t);return e[n]()}function Vt(e,t,n,i,a){e.tag(n.no,vt.LengthDelimited),e.fork();let o=i;switch(n.K){case Ct.INT32:case Ct.FIXED32:case Ct.UINT32:case Ct.SFIXED32:case Ct.SINT32:o=Number.parseInt(i);break;case Ct.BOOL:qe("true"==i||"false"==i),o="true"==i}switch(Jt(e,n.K,1,o,!0),n.V.kind){case"scalar":Jt(e,n.V.T,2,a,!0);break;case"enum":Jt(e,Ct.INT32,2,a,!0);break;case"message":Kt(e,t,n.V.T,2,a)}e.join()}function Kt(e,t,n,i,a){if(void 0!==a){const o=Lt(n,a);e.tag(i,vt.LengthDelimited).bytes(o.toBinary(t))}}function Jt(e,t,n,i,a){let[o,r,s]=Bt(t,i);s&&!a||e.tag(n,o)[r](i)}function qt(e,t,n,i){if(!i.length)return;e.tag(n,vt.LengthDelimited).fork();let[,a]=Bt(t);for(let t=0;t<i.length;t++)e[a](i[t]);e.join()}function jt(){return Object.assign(Object.assign({},Zt()),{writeMessage(e,t,n){const i=e.getType();for(const a of i.fields.byNumber()){let i,o=a.repeated,r=a.localName;if(a.oneof){const t=e[a.oneof.localName];if(t.case!==r)continue;i=t.value}else i=e[r];switch(a.kind){case"scalar":case"enum":let e="enum"==a.kind?Ct.INT32:a.T;if(o)if(a.packed)qt(t,e,a.no,i);else for(const n of i)Jt(t,e,a.no,n,!0);else void 0!==i&&Jt(t,e,a.no,i,!!a.oneof||a.opt);break;case"message":if(o)for(const e of i)Kt(t,n,a.T,a.no,e);else Kt(t,n,a.T,a.no,i);break;case"map":for(const[e,o]of Object.entries(i))Vt(t,n,a,e,o)}}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}let Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Qt=[];for(let e=0;e<Yt.length;e++)Qt[Yt[e].charCodeAt(0)]=e;Qt["-".charCodeAt(0)]=Yt.indexOf("+"),Qt["_".charCodeAt(0)]=Yt.indexOf("/");const en={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n=new Uint8Array(t),i=0,a=0,o,r=0;for(let t=0;t<e.length;t++){if(o=Qt[e.charCodeAt(t)],void 0===o)switch(e[t]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:r=o,a=1;break;case 1:n[i++]=r<<2|(48&o)>>4,r=o,a=2;break;case 2:n[i++]=(15&r)<<4|(60&o)>>2,r=o,a=3;break;case 3:n[i++]=(3&r)<<6|o,a=0}}if(1==a)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(e){let t="",n=0,i,a=0;for(let o=0;o<e.length;o++)switch(i=e[o],n){case 0:t+=Yt[i>>2],a=(3&i)<<4,n=1;break;case 1:t+=Yt[a|i>>4],a=(15&i)<<2,n=2;break;case 2:t+=Yt[a|i>>6],t+=Yt[63&i],n=0}return n&&(t+=Yt[a],t+="=",1==n&&(t+="=")),t}},tn={ignoreUnknownFields:!1},nn={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function an(e){return e?Object.assign(Object.assign({},tn),e):tn}function on(e){return e?Object.assign(Object.assign({},nn),e):nn}function rn(e){const t=e(cn,un);return{makeReadOptions:an,makeWriteOptions:on,readMessage(e,t,n,i){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${this.debug(t)}`);i=null!=i?i:new e;const a={};for(const[o,r]of Object.entries(t)){const t=e.fields.findJsonName(o);if(!t){if(!n.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${o}" is unknown`);continue}let s=t.localName,l=i;if(t.oneof){if(null===r&&"scalar"==t.kind)continue;const n=a[t.oneof.localName];if(n)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${n}", "${o}"`);a[t.oneof.localName]=o,l=l[t.oneof.localName]={case:s},s="value"}if(t.repeated){if(null===r)continue;if(!Array.isArray(r))throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`);const i=l[s];for(const a of r){if(null===a)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(a)}`);let o;switch(t.kind){case"message":o=t.T.fromJson(a,n);break;case"enum":if(o=dn(t.T,a,n.ignoreUnknownFields),void 0===o)continue;break;case"scalar":try{o=ln(t.T,a)}catch(n){let i=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(a)}`;throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}}i.push(o)}}else if("map"==t.kind){if(null===r)continue;if(Array.isArray(r)||"object"!=typeof r)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`);const i=l[s];for(const[a,o]of Object.entries(r)){if(null===o)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: map value null`);let s;switch(t.V.kind){case"message":s=t.V.T.fromJson(o,n);break;case"enum":if(s=dn(t.V.T,o,n.ignoreUnknownFields),void 0===s)continue;break;case"scalar":try{s=ln(t.V.T,o)}catch(n){let i=`cannot decode map value for field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}}try{i[ln(t.K,t.K==Ct.BOOL?"true"==a||"false"!=a&&a:a).toString()]=s}catch(n){let i=`cannot decode map key for field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}}}else switch(t.kind){case"message":const i=t.T;if(null===r&&"google.protobuf.Value"!=i.typeName){if(t.oneof)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: null is invalid for oneof field "${o}"`);continue}const a=void 0===l[s]?new i:Lt(i,l[s]);l[s]=Ht(i,a.fromJson(r,n));break;case"enum":const d=dn(t.T,r,n.ignoreUnknownFields);void 0!==d&&(l[s]=d);break;case"scalar":try{l[s]=ln(t.T,r)}catch(n){let i=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}}}return i},writeMessage(e,n){const i=e.getType(),a={};let o;try{for(const r of i.fields.byMember()){let i;if("oneof"==r.kind){const a=e[r.localName];if(void 0===a.value)continue;if(o=r.findField(a.case),!o)throw"oneof case not found: "+a.case;i=t(o,a.value,n)}else o=r,i=t(o,e[o.localName],n);void 0!==i&&(a[n.useProtoFieldName?o.name:o.jsonName]=i)}}catch(e){const t=o?`cannot encode field ${i.typeName}.${o.name} to JSON`:`cannot encode message ${i.typeName} to JSON`,n=e instanceof Error?e.message:String(e);throw new Error(t+(n.length>0?`: ${n}`:""))}return a},readScalar:ln,writeScalar:un,debug:sn}}function sn(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return e.toString()}}function ln(e,t){switch(e){case Ct.DOUBLE:case Ct.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const n=Number(t);if(Number.isNaN(n))break;if(!Number.isFinite(n))break;return e==Ct.FLOAT&&at(n),n;case Ct.INT32:case Ct.FIXED32:case Ct.SFIXED32:case Ct.SINT32:case Ct.UINT32:if(null===t)return 0;let i;if("number"==typeof t?i=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(i=Number(t)),void 0===i)break;return e==Ct.UINT32?it(i):nt(i),i;case Ct.INT64:case Ct.SFIXED64:case Ct.SINT64:if(null===t)return Rt.zero;if("number"!=typeof t&&"string"!=typeof t)break;return Rt.parse(t);case Ct.FIXED64:case Ct.UINT64:if(null===t)return Rt.zero;if("number"!=typeof t&&"string"!=typeof t)break;return Rt.uParse(t);case Ct.BOOL:if(null===t)return!1;if("boolean"!=typeof t)break;return t;case Ct.STRING:if(null===t)return"";if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(e){throw new Error("invalid UTF8")}return t;case Ct.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!=typeof t)break;return en.dec(t)}throw new Error}function dn(e,t,n){if(null===t)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(i||n)return null==i?void 0:i.no}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${sn(t)}`)}function cn(e,t,n,i){var a;if(void 0===t)return t;if(0===t&&!n)return;if(i)return t;if("google.protobuf.NullValue"==e.typeName)return null;const o=e.findNumber(t);return null!==(a=null==o?void 0:o.name)&&void 0!==a?a:t}function un(e,t,n){if(void 0!==t)switch(e){case Ct.INT32:case Ct.SFIXED32:case Ct.SINT32:case Ct.FIXED32:case Ct.UINT32:return qe("number"==typeof t),0!=t||n?t:void 0;case Ct.FLOAT:case Ct.DOUBLE:return qe("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":0!==t||n?t:void 0;case Ct.STRING:return qe("string"==typeof t),t.length>0||n?t:void 0;case Ct.BOOL:return qe("boolean"==typeof t),t||n?t:void 0;case Ct.UINT64:case Ct.FIXED64:case Ct.INT64:case Ct.SFIXED64:case Ct.SINT64:return qe("bigint"==typeof t||"string"==typeof t||"number"==typeof t),n||0!=t?t.toString(10):void 0;case Ct.BYTES:return qe(t instanceof Uint8Array),n||t.byteLength>0?en.enc(t):void 0}}function hn(){return rn(((e,t)=>function n(i,a,o){if("map"==i.kind){const n={};switch(i.V.kind){case"scalar":for(const[e,o]of Object.entries(a)){const a=t(i.V.T,o,!0);qe(void 0!==a),n[e.toString()]=a}break;case"message":for(const[e,t]of Object.entries(a))n[e.toString()]=t.toJson(o);break;case"enum":const r=i.V.T;for(const[t,i]of Object.entries(a)){qe(void 0===i||"number"==typeof i);const a=e(r,i,!0,o.enumAsInteger);qe(void 0!==a),n[t.toString()]=a}}return o.emitDefaultValues||Object.keys(n).length>0?n:void 0}if(i.repeated){const n=[];switch(i.kind){case"scalar":for(let e=0;e<a.length;e++)n.push(t(i.T,a[e],!0));break;case"enum":for(let t=0;t<a.length;t++)n.push(e(i.T,a[t],!0,o.enumAsInteger));break;case"message":for(let e=0;e<a.length;e++)n.push(Lt(i.T,a[e]).toJson(o))}return o.emitDefaultValues||n.length>0?n:void 0}switch(i.kind){case"scalar":return t(i.T,a,!!i.oneof||i.opt||o.emitDefaultValues);case"enum":return e(i.T,a,!!i.oneof||i.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return void 0!==a?Lt(i.T,a).toJson(o):void 0}}))}function fn(){return{setEnumType:st,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const i of n.fields.byMember()){const n=i.localName,a=t,o=e;if(void 0!==o[n])switch(i.kind){case"oneof":const e=o[n].case;if(void 0===e)continue;const t=i.findField(e);let r=o[n].value;!t||"message"!=t.kind||r instanceof t.T||(r=new t.T(r)),a[n]={case:e,value:r};break;case"scalar":case"enum":a[n]=o[n];break;case"map":switch(i.V.kind){case"scalar":case"enum":Object.assign(a[n],o[n]);break;case"message":const e=i.V.T;for(const t of Object.keys(o[n])){let i=o[n][t];e.fieldWrapper||(i=new e(i)),a[n][t]=i}}break;case"message":const s=i.T;if(i.repeated)a[n]=o[n].map((e=>e instanceof s?e:new s(e)));else if(void 0!==o[n]){const e=o[n];s.fieldWrapper?a[n]=e:a[n]=e instanceof s?e:new s(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const i=t[e.localName],a=n[e.localName];if(e.repeated){if(i.length!==a.length)return!1;switch(e.kind){case"message":return i.every(((t,n)=>e.T.equals(t,a[n])));case"scalar":return i.every(((t,n)=>Ft(e.T,t,a[n])));case"enum":return i.every(((e,t)=>Ft(Ct.INT32,e,a[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(i,a);case"enum":return Ft(Ct.INT32,i,a);case"scalar":return Ft(e.T,i,a);case"oneof":if(i.case!==a.case)return!1;const t=i.case,n=e.findField(t);if(void 0===n)return!0;switch(n.kind){case"message":return n.T.equals(i[t],a[t]);case"enum":return Ft(Ct.INT32,i,a);case"scalar":return Ft(n.T,i,a)}throw new Error(`oneof cannot contain ${n.kind}`);case"map":const o=Object.keys(i);if(o.some((e=>void 0===a[e])))return!1;switch(e.V.kind){case"message":const t=e.V.T;return o.every((e=>t.equals(i[e],a[e])));case"enum":return o.every((e=>Ft(Ct.INT32,i[e],a[e])));case"scalar":const n=e.V.T;return o.every((e=>Ft(n,i[e],a[e])))}}})),clone(e){const t=e.getType(),n=new t,i=n;for(const n of t.fields.byMember()){const t=e[n.localName];let a;if(n.repeated)a=t.map((e=>Cn(n,e)));else if("map"==n.kind){a=i[n.localName];for(const[e,i]of Object.entries(t))a[e]=Cn(n.V,i)}else if("oneof"==n.kind){const e=n.findField(t.case);a=e?{case:t.case,value:Cn(e,t.value)}:{case:void 0}}else a=Cn(n,t);i[n.localName]=a}return n}}}function Cn(e,t){if(void 0===t)return t;switch(e.kind){case"enum":return t;case"scalar":if(e.T===Ct.BYTES){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t;case"message":return e.T.fieldWrapper?e.T.fieldWrapper.unwrapField(e.T.fieldWrapper.wrapField(t).clone()):t.clone()}}class En{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function gn(e){switch(e.kind){case"field":return Sn(e.name,void 0!==e.oneof);case"oneof":return Tn(e.name);case"enum":case"message":case"service":{const t=e.file.proto.package,n=void 0===t?0:t.length+1,i=e.typeName.substring(n).replace(/\./g,"_");return Nn[i]?i+"$":i}case"enum_value":{const t=e.parent.sharedPrefix;if(void 0===t)return e.name;const n=e.name.substring(t.length);return On[n]?n+"$":n}case"rpc":{let t=e.name;return 0==t.length?t:(t=t[0].toLowerCase()+t.substring(1),On[t]?t+"$":t)}}}function Sn(e,t){let n=pn(e);return t||(On[n]||An[n])&&(n+="$"),n}function Tn(e){return Sn(e,!1)}const _n=pn;function mn(e,t){const n=In(e)+"_";for(const e of t){if(!e.toLowerCase().startsWith(n))return;const t=e.substring(n.length);if(0==t.length)return;if(/^\d/.test(t))return}return n}function In(e){return(e.substring(0,1)+e.substring(1).replace(/[A-Z]/g,(e=>"_"+e))).toLowerCase()}function pn(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let a=e.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),n.push(a)}}return n.join("")}const Nn={break:!0,case:!0,catch:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,else:!0,export:!0,extends:!0,false:!0,finally:!0,for:!0,function:!0,if:!0,import:!0,in:!0,instanceof:!0,new:!0,null:!0,return:!0,super:!0,switch:!0,this:!0,throw:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,yield:!0,enum:!0,implements:!0,interface:!0,let:!0,package:!0,private:!0,protected:!0,public:!0,static:!0,Object:!0,bigint:!0,number:!0,boolean:!0,string:!0,object:!0,globalThis:!0,Uint8Array:!0,Partial:!0},On={constructor:!0,toString:!0,toJSON:!0,valueOf:!0},An={getType:!0,clone:!0,equals:!0,fromBinary:!0,fromJson:!0,fromJsonString:!0,toBinary:!0,toJson:!0,toJsonString:!0,toObject:!0};class Dn{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Tn(e)}addField(e){qe(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const bn=ft("proto3",hn(),jt(),Object.assign(Object.assign({},fn()),{newFieldList:e=>new En(e,Rn),initFields(e){for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated)i[n]=[];else switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=kt(t.T)}}}}));function Rn(e){var t,n,i;const a=[];let o;for(const r of"function"==typeof e?e():e){const e=r;if(e.localName=Sn(r.name,void 0!==r.oneof),e.jsonName=null!==(t=r.jsonName)&&void 0!==t?t:_n(r.name),e.repeated=null!==(n=r.repeated)&&void 0!==n&&n,e.packed=null!==(i=r.packed)&&void 0!==i?i:"enum"==r.kind||"scalar"==r.kind&&r.T!=Ct.BYTES&&r.T!=Ct.STRING,void 0!==r.oneof){const t="string"==typeof r.oneof?r.oneof:r.oneof.name;o&&o.name==t||(o=new Dn(t)),e.oneof=o,o.addField(e)}a.push(e)}return a}class vn extends ut{constructor(e){super(),this.seconds=Rt.zero,this.nanos=0,bn.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${bn.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Rt.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return vn.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new vn({seconds:Rt.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new vn).fromBinary(e,t)}static fromJson(e,t){return(new vn).fromJson(e,t)}static fromJsonString(e,t){return(new vn).fromJsonString(e,t)}static equals(e,t){return bn.util.equals(vn,e,t)}}var yn,wn,Ln,Hn,Un,Pn,Fn;vn.runtime=bn,vn.typeName="google.protobuf.Timestamp",vn.fields=bn.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])),function(e){e[e.UNKNOWN_AVAILABILITY=0]="UNKNOWN_AVAILABILITY",e[e.MF_BUSINESS_HOURS=1]="MF_BUSINESS_HOURS",e[e.MF_24_HOURS=2]="MF_24_HOURS",e[e.ALWAYS_AVAILABLE_247=3]="ALWAYS_AVAILABLE_247"}(yn||(yn={})),bn.util.setEnumType(yn,"support.Availability",[{no:0,name:"UNKNOWN_AVAILABILITY"},{no:1,name:"MF_BUSINESS_HOURS"},{no:2,name:"MF_24_HOURS"},{no:3,name:"ALWAYS_AVAILABLE_247"}]),function(e){e[e.UNKNOWN_CHANNEL=0]="UNKNOWN_CHANNEL",e[e.CHATBOT=1]="CHATBOT",e[e.LIMITED_EMAIL=2]="LIMITED_EMAIL",e[e.EMAIL=3]="EMAIL",e[e.CHAT=4]="CHAT",e[e.LIMITED_PHONE=5]="LIMITED_PHONE",e[e.PHONE=6]="PHONE"}(wn||(wn={})),bn.util.setEnumType(wn,"support.Channel",[{no:0,name:"UNKNOWN_CHANNEL"},{no:1,name:"CHATBOT"},{no:2,name:"LIMITED_EMAIL"},{no:3,name:"EMAIL"},{no:4,name:"CHAT"},{no:5,name:"LIMITED_PHONE"},{no:6,name:"PHONE"}]),function(e){e[e.UNKNOWN_LANGUAGE=0]="UNKNOWN_LANGUAGE",e[e.ENGLISH=1]="ENGLISH",e[e.SPANISH=2]="SPANISH",e[e.FRENCH=3]="FRENCH",e[e.GERMAN=4]="GERMAN",e[e.JAPANESE=5]="JAPANESE",e[e.PORTUGUESE=6]="PORTUGUESE"}(Ln||(Ln={})),bn.util.setEnumType(Ln,"support.Language",[{no:0,name:"UNKNOWN_LANGUAGE"},{no:1,name:"ENGLISH"},{no:2,name:"SPANISH"},{no:3,name:"FRENCH"},{no:4,name:"GERMAN"},{no:5,name:"JAPANESE"},{no:6,name:"PORTUGUESE"}]);class kn extends ut{constructor(e){super(),this.days="",this.hours="",this.timezone="",bn.util.initPartial(e,this)}static fromBinary(e,t){return(new kn).fromBinary(e,t)}static fromJson(e,t){return(new kn).fromJson(e,t)}static fromJsonString(e,t){return(new kn).fromJsonString(e,t)}static equals(e,t){return bn.util.equals(kn,e,t)}}kn.runtime=bn,kn.typeName="support.DaysHours",kn.fields=bn.util.newFieldList((()=>[{no:1,name:"days",kind:"scalar",T:9},{no:2,name:"hours",kind:"scalar",T:9},{no:3,name:"start_time",kind:"message",T:vn},{no:4,name:"end_time",kind:"message",T:vn},{no:5,name:"timezone",kind:"scalar",T:9}]));class Bn extends ut{constructor(e){super(),this.isDuringOperatingHours=!1,this.description={case:void 0},this.isAvailable247=!1,bn.util.initPartial(e,this)}static fromBinary(e,t){return(new Bn).fromBinary(e,t)}static fromJson(e,t){return(new Bn).fromJson(e,t)}static fromJsonString(e,t){return(new Bn).fromJsonString(e,t)}static equals(e,t){return bn.util.equals(Bn,e,t)}}Bn.runtime=bn,Bn.typeName="support.AvailabilityDescriptor",Bn.fields=bn.util.newFieldList((()=>[{no:1,name:"is_during_operating_hours",kind:"scalar",T:8},{no:2,name:"days_hours",kind:"message",T:kn,oneof:"description"},{no:3,name:"single_description",kind:"scalar",T:9,oneof:"description"},{no:4,name:"is_available_247",kind:"scalar",T:8}]));class Mn extends ut{constructor(e){super(),this.language=Ln.UNKNOWN_LANGUAGE,bn.util.initPartial(e,this)}static fromBinary(e,t){return(new Mn).fromBinary(e,t)}static fromJson(e,t){return(new Mn).fromJson(e,t)}static fromJsonString(e,t){return(new Mn).fromJsonString(e,t)}static equals(e,t){return bn.util.equals(Mn,e,t)}}Mn.runtime=bn,Mn.typeName="support.ChannelOption",Mn.fields=bn.util.newFieldList((()=>[{no:1,name:"language",kind:"enum",T:bn.getEnumType(Ln)},{no:2,name:"availability",kind:"message",T:Bn}]));class Wn extends ut{constructor(e){super(),this.channel=wn.UNKNOWN_CHANNEL,this.alternativeOptions=[],bn.util.initPartial(e,this)}static fromBinary(e,t){return(new Wn).fromBinary(e,t)}static fromJson(e,t){return(new Wn).fromJson(e,t)}static fromJsonString(e,t){return(new Wn).fromJsonString(e,t)}static equals(e,t){return bn.util.equals(Wn,e,t)}}function xn(t,n,i){const a=null!=n?n:"";switch(t){case e.Critical:if(i){const e=i instanceof Error?i.message:String(i),t=i instanceof Error?i.stack:null,a={message:null!=n?n:"Error encountered during process",error:null!=e?e:"No additional error details provided",stack:null!=t?t:"No stack trace available",timestamp:(new Date).toISOString()};console.error("Critical error:",JSON.stringify(a,null,2))}else console.error("Critical error:",a);break;case e.NonCritical:console.warn(`Non-critical error: ${a}`);break;case e.Operational:console.warn(`Operational error: ${a}`);break;case e.UserError:console.error(`User error: ${a}`);break;case e.Uncaught:console.error(`Uncaught error: ${a}`);break;default:console.error(`Unknown error severity: ${a}`)}}function Xn(t){const n=`Initialization aborted: No unified chat cookie found for ${t} chat.`;xn(e.Operational,n)}function Gn(t){const n=`Initialization aborted: Entry page key is null or undefined for ${t}.`;xn(e.NonCritical,n)}function Zn(t){const n=`Initialization aborted: Invalid entry page key detected (${t}).`;xn(e.NonCritical,n)}function zn(){const t="Initialization aborted: Chat disabled during non-operational hours.";xn(e.Operational,t)}function $n(t){const n=`Initialization aborted: No valid entry page detected at ${t}.`;xn(e.Operational,n)}function Vn(){const t="Initialization aborted: LoginPageCookie not found to load chat at /login page.";xn(e.Operational,t)}function Kn(t){const n=`Initialization aborted: Unsupported chat type detected during ${t} setup.`;xn(e.Critical,n)}function Jn(){const t="Initialization failed: Missing or invalid configuration details.";xn(e.Operational,t)}function qn(t){const n=`Support Chat Initialization skipped. Is ${t} User.`;xn(e.Operational,n)}function jn(){const t="Chat initialization skipped because chat is not allowed to load on this entry page when accessed from a mobile device.";xn(e.Operational,t)}function Yn(){const t="Support Chat Initialization skipped. User identifiers are not available.";xn(e.Operational,t)}function Qn(){const t="Allowing Support Chat Initialization. User identifiers are not available.";xn(e.NonCritical,t)}function ei(t){const n=`DBX Chat Initialization: Skipped due to subdomain flag. Is DBX Chat enabled for subdomains: ${t}.`;xn(e.Operational,n)}function ti(){const t="Initialization aborted: Unrecognized or untrusted domain detected.";xn(e.UserError,t)}function ni(t,n){const i=`Initialization aborted: Missing entry path for host '${t}' at '${n}'.`;xn(e.Critical,i)}function ii(){const e=window;return e._DBX_ZOOM_CHAT_CLIENT||(e._DBX_ZOOM_CHAT_CLIENT={}),e._DBX_ZOOM_CHAT_CLIENT}function ai(){const e=window;return void 0===e.zoomChatManagerDebugEnabled&&(e.zoomChatManagerDebugEnabled=!1),window.localStorage&&window.localStorage.getItem("zoom_chat_manager_debug")?e.zoomChatManagerDebugEnabled=!0:console.log('Debugging is not enabled because "zoom_chat_manager_debug" is not set in localStorage.'),e.zoomChatManagerDebugEnabled}function oi(e){const t=undefined;window.zoomChatManagerDebugEnabled&&console.debug&&console.debug(e)}function ri(e,t,n,i){let a=`${e}=${t};expires=${n.toUTCString()};path=/`;i&&(a+=`;domain=${i}`),document.cookie=a}function si(e){const t=e+"=",n=document.cookie.split(";");for(const e of n){const n=e.trim();if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}function li(e){const t=new Date;t.setTime(t.getTime()+36e5);const n=Z[e];e===d.DBX_SALES_CHAT||e===d.DBX_CX_CHAT?ri(m,n,t,G):e===d.DASH_SALES_CHAT?ri(I,n,t,G):e===d.HELLOSIGN_CX_CHAT&&ri(m,n,t)}function di(){const e=new Date;e.setMinutes(e.getMinutes()+2),buildAndSetCookie(DBX_SALES_CHAT_LOGIN_COOKIE_KEY,DBX_SALES_CHAT_LOGIN_COOKIE,e)}function ci(e,t){let n=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;t&&(n+=` domain=${t};`),document.cookie=n}function ui(e){switch(e){case F:return d.DBX_SALES_CHAT;case B:return d.DBX_CX_CHAT;default:return d.UNSUPPORTED_CHAT}}function hi(){const e=si(m);return null==e?"":e}function fi(){const e=window;if(e._DBX_ZOOM_CHAT_CLIENT&&"function"==typeof e._DBX_ZOOM_CHAT_CLIENT.handleOnLogoutCallback){const t=getCookieValue(UNIFIED_CHAT_COOKIE_NAME);deleteUnifiedChatCookie(UNIFIED_CHAT_COOKIE_NAME,DBX_CHAT_WILDCARD_DOMAIN),e._DBX_ZOOM_CHAT_CLIENT.handleOnLogoutCallback(),t===SALES_CHAT_COOKIE_KEY&&createLoginCookieForDbxSalesChat()}}function Ci(e){console.error(e)}function Ei(e,t){var n,i,a,o,r,s,d;return(null===(n=t.docsendEntitlements)||void 0===n?void 0:n.includes(e))?l.DOCSEND_HOST:(null===(i=t.wwwDbxEntitlements)||void 0===i?void 0:i.includes(e))?l.WWW_DBX_HOST:(null===(a=t.helpCenterEntitlements)||void 0===a?void 0:a.includes(e))?l.HELP_CENTER_HOST:(null===(o=t.experienceEntitlements)||void 0===o?void 0:o.includes(e))?l.EXPERIENCE_HOST:(null===(r=t.signCenterEntitlements)||void 0===r?void 0:r.includes(e))?l.SIGN_CENTER_HOST:(null===(s=t.dashDbxEntitlements)||void 0===s?void 0:s.includes(e))?l.DASH_DBX_HOST:(null===(d=t.hellosignEntitlements)||void 0===d?void 0:d.includes(e))?l.HELLOSIGN_HOST:l.UNSUPPORTED_HOST}function gi(){return new Date}function Si(e){return new Date(e.toLocaleString("en-US",{timeZone:"America/Los_Angeles"}))}function Ti(e){try{const t=undefined;return new URL(e).hostname}catch(e){return xn(Le.type,Le.message,e),""}}function _i(e){try{const t=undefined;return new URL(e).pathname}catch(e){return xn(He.type,He.message,e),""}}function mi(e){const t=new URL(e),n={};for(const[e,i]of t.searchParams.entries())n[e.trim()]=i.trim();return n}function Ii(e){var t;const n=e[x];return null!==(t=null==n?void 0:n.startsWith(X))&&void 0!==t&&t}function pi(e,t){var n,i;const a=undefined,o=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e),r=parseInt((null===(n=o.find((e=>"hour"===e.type)))||void 0===n?void 0:n.value)||"0",10),s=parseInt((null===(i=o.find((e=>"minute"===e.type)))||void 0===i?void 0:i.value)||"0",10),l=new Date(e);return l.setHours(r,s),l}function Ni(e){if(!e)return zoomChatManagerExceptionHandler(ERROR_MISSING_BUSINESS_HOURS_CONFIG.type,ERROR_MISSING_BUSINESS_HOURS_CONFIG.message),!1;try{if(!e.businessTimezone)return zoomChatManagerExceptionHandler(ERROR_MISSING_BUSINESS_TIMEZONE.type,ERROR_MISSING_BUSINESS_TIMEZONE.message),!1;if(!e.businessHours)return zoomChatManagerExceptionHandler(ERROR_MISSING_BUSINESS_HOURS.type,ERROR_MISSING_BUSINESS_HOURS.message),!1;const t=new Date,n=t.getDay();if(n<1||n>5)return!1;const i=pi(t,e.businessTimezone);if(!e.businessHours.customHourRanges)return zoomChatManagerExceptionHandler(ERROR_MISSING_CUSTOM_HOUR_RANGES.type,ERROR_MISSING_CUSTOM_HOUR_RANGES.message),!1;const a=e.businessHours.customHourRanges,o=new Date(i);o.setHours(parseInt(a.startTimeHours,10)),o.setMinutes(parseInt(a.startTimeMins,10)),o.setSeconds(0),o.setMilliseconds(0);const r=new Date(i);return r.setHours(parseInt(a.endTimeHours,10)),r.setMinutes(parseInt(a.endTimeMins,10)),r.setSeconds(0),r.setMilliseconds(0),i>=o&&i<=r||(handleChatOnNonOperationalHours(),!1)}catch(e){return zoomChatManagerExceptionHandler(ErrorSeverity.Critical,"Unexpected error in isWithinBusinessHours",e),!1}}function Oi(e){const t=e.toLowerCase();return t in supportedLanguages?{languageName:supportedLanguages[t],description:`Supported language found: ${supportedLanguages[t]}`}:{languageName:"English",description:"Default to English as no supported/identified language was found"}}Wn.runtime=bn,Wn.typeName="support.LiveChannel",Wn.fields=bn.util.newFieldList((()=>[{no:1,name:"channel",kind:"enum",T:bn.getEnumType(wn)},{no:2,name:"primary_option",kind:"message",T:Mn},{no:3,name:"alternative_options",kind:"message",T:Mn,repeated:!0},{no:4,name:"escalation_option",kind:"message",T:Mn}])),function(t){function n(e){const t=localStorage.getItem(e);return null===t?(r(`No state found in local storage for key: ${e}`),null):JSON.parse(t)}function i(e){localStorage.removeItem(e)}function a(e,t){localStorage.setItem(e,JSON.stringify(t))}function o(e,t,i){try{const o=n(e);o&&i in o&&(o[i]=t,a(e,o))}catch(t){r(`Error updating local storage for key ${e}`,t)}}function r(t,n){xn(e.NonCritical,t,n)}t.getStateFromLocalStorage=n,t.deleteUnifiedChatStateFromLocalStorage=i,t.saveStateToLocalStorage=a,t.updateStateInLocalStorage=o,t.handleLocalStorageError=r}(Hn||(Hn={})),function(e){e[e.UNKNOWN_PRODUCT=0]="UNKNOWN_PRODUCT",e[e.DROPBOX=1]="DROPBOX",e[e.DASH=2]="DASH",e[e.DOCSEND=3]="DOCSEND",e[e.FORMSWIFT=4]="FORMSWIFT",e[e.REPLAY=5]="REPLAY"}(Un||(Un={})),bn.util.setEnumType(Un,"support.Product",[{no:0,name:"UNKNOWN_PRODUCT"},{no:1,name:"DROPBOX"},{no:2,name:"DASH"},{no:3,name:"DOCSEND"},{no:4,name:"FORMSWIFT"},{no:5,name:"REPLAY"}]),function(e){e.getBrowserStatus="FETCH_BROWSER_STATUS",e.deleteAttachedIframe="DELETE_ATTACHED_IFRAME",e.reloadPageAfterChatEnds="RELOAD_PAGE_AFTER_CHAT_ENDS",e.getDocsendCurrentUserInfo="FETCH_DOCSEND_CURRENT_USER_INFO",e.getDropboxCurrentUserInfo="FETCH_DROPBOX_CURRENT_USER_INFO",e.getHellosignCurrentUserInfo="FETCH_HELLOSIGN_CURRENT_USER_INFO",e.getBrowserLanguageInfo="FETCH_BROWSER_LANGUAGE_INFO",e.getBrowserPathInfo="FETCH_DBX_BROWSER_PATH_INFO",e.getIsProactiveFeatureStatus="FETCH_IS_PROACTIVE_FEATURE_STATUS",e.getChatTypeInfo="FETCH_CHAT_TYPE_INFO",e.getUserSelectedProductSupportPackageInfo="FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO",e.endChatButtonClicked="END_CHAT_BUTTON_CLICKED",e.proactiveEndChatButtonClicked="PROACTIVE_END_CHAT_BUTTON_CLICKED",e.proactiveEndChatButtonDisappeared="PROACTIVE_END_CHAT_BUTTON_DISAPPEARED",e.proactiveEndChatButtonAppeared="PROACTIVE_END_CHAT_BUTTON_APPEARED",e.fetchZoomChatCredentials="FETCH_ZOOM_CHAT_CREDENTIALS",e.addScriptTagSuccess="ADD_SCRIPT_TAG_SUCCESS",e.addScriptTagError="ADD_SCRIPT_TAG_ERROR",e.expandButtonClicked="EXPAND_BUTTON_CLICKED",e.minimizeButtonClicked="MINIMIZE_BUTTON_CLICKED",e.chatWidgetLoaded="CHAT_WIDGET_LOADED_INSIDE_IFRAME",e.chatWidgetNotLoaded="CHAT_WIDGET_NOT_LOADED_INSIDE_IFRAME",e.setCookieForDBXSalesChat="SET_COOKIE_FOR_DBX_SALES_CHAT",e.getCxChatRequestedLanguageInfo="GET_CX_CHAT_REQUESTED_LANGUAGE_INFO",e.getIsChattingStatus="GET_STATUS_OF_IS_CHATTING_MODE",e.ResponseForIsChattingStatus="RES_TO_GET_STATUS_OF_IS_CHATTING",e.userAuthInfoLoaded="USER_AUTH_INFO_LOADED",e.initiatedChatFromTransfer="INITIATED_CHAT_FROM_TRANSFER",e.zoomCampaignSdkReady="ZOOM_CAMPAIGN_SDK_READY"}(Pn||(Pn={})),function(e){e.RequestToGetIsChattingStatus="REQ_TO_GET_STATUS_OF_IS_CHATTING",e.sendBrowserStatus="SEND_BROWSER_STATUS",e.sendIsProactiveFeatureStatus="SEND_PROACTIVE_FEATURE_STATUS",e.sendDocsendCurrentUserInfo="SEND_DOCSEND_CURRENT_USER_INFO",e.sendDropboxCurrentUserInfo="SEND_DROPBOX_CURRENT_USER_INFO",e.sendHellosignCurrentUserInfo="SEND_HELLOSIGN_CURRENT_USER_INFO",e.sendCurrentChatTypeInfo="SEND_CURRENT_CHAT_TYPE_INFO",e.sendUserSelectedProductSupportPackageInfo="SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO",e.sendBrowserPathInfo="SEND_DBX_BROWSER_CURRENT_PATH_INFO",e.sendBrowserCurrentLanguageInfo="SEND_BROWSER_CURRENT_LANGUAGE_INFO",e.sendZoomChatCredentials="SEND_ZOOM_CHAT_CREDENTIALS",e.isChatWidgetLoadedInsideIframe="IS_CHAT_WIDGET_LOADED_INSIDE_IFRAME",e.performLogoutCallback="ZOOM_CHAT_LOGOUT_CALLBACK",e.setZoomChatWidgetToOpenWindow="SET_CHAT_WINDOW_TO_OPEN_MODE",e.callbackWhenUserSwitchesCompany="USER_PERRFOMS_SWITCH_COMMPANY_ONGOING_CHAT_SESSION",e.sendCxChatRequestedLanguageInfo="SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO"}(Fn||(Fn={}));const Ai=()=>{oi("onInitComplete: zoom_chat_client module Initialization : [SUCCESSFUL]")};function Di(e){let t;return t=e===l.WWW_DBX_HOST?c.WWW_DBX_ENTITLEMENTS:e===l.SIGN_CENTER_HOST?c.SIGN_CENTER_ENTITLEMENTS:e===l.HELP_CENTER_HOST?c.HELP_CENTER_ENTITLEMENTS:e===l.EXPERIENCE_HOST?c.EXPERIENCE_ENTITLEMENTS:c.UNSUPPORTED_ENTITLEMENTS,t}function bi(e,t){let n;if(e===c.WWW_DBX_ENTITLEMENTS)n={wwwDbxEntitlements:t[e]};else if(e===c.HELP_CENTER_ENTITLEMENTS)n={helpCenterEntitlements:t[e]};else if(e===c.EXPERIENCE_ENTITLEMENTS)n={experienceEntitlements:t[e]};else if(e===c.SIGN_CENTER_ENTITLEMENTS)n={signCenterEntitlements:t[e]};else{if(e!==c.HELLOSIGN_ENTITLEMENTS){const e=undefined;throw new Error("Invalid entitlements key")}n={hellosignEntitlements:t[e]}}return n}function Ri(e,t){t&&(e.cxChatButtonLanguage=t)}function vi(e,t,n){oi(`logUnifiedChatStatus: [PRE-CHECKS] Unified chat cookie Key: ${t}`),oi(`logUnifiedChatStatus: [PRE-CHECKS]  Unified chat cookie availability: ${e}`),oi(`logUnifiedChatStatus: [PRE-CHECKS] Domain message: ${n}`)}function yi(){return window.location.href}function wi(e){const t=window;t.dbxCxChatButtonLanguage||(t.dbxCxChatButtonLanguage={}),Ri(t.dbxCxChatButtonLanguage,e)}async function Li(){const e=ii();if(e&&"function"==typeof e.initZoomChatReloadProcess){const t=undefined;return!!await e.initZoomChatReloadProcess()}return!1}const Hi=async e=>{if(e){let t;switch(e){case Language.UNKNOWN_LANGUAGE||Language.ENGLISH:t="en-US";break;case Language.SPANISH:t="es-ES";break;case Language.FRENCH:t="fr-FR";break;case Language.GERMAN:t="de-DE";break;case Language.JAPANESE:t="ja-JP";break;case Language.PORTUGUESE:t="pt-PT";break;default:t="UNKNOWN"}const n=await Fi(ChatType.DBX_CX_CHAT);return n&&wi(t),n}return!1},Ui=async(e=DEFAULT_MAX_SECONDS_TO_WAIT_FOR_EXPAND_CHAT)=>new Promise((t=>{const n=getOrInitZoomChatClient();if(!n)return void t(!1);let i=!1;const a=setTimeout((()=>{i||(i=!0,t(!1))}),e*SECONDS_TO_MS_MULTIPLIER);n.onAction&&n.onAction(ZoomChatIframeServiceAction.expandButtonClicked,(()=>{i||(i=!0,clearTimeout(a),t(!0))}))})),Pi=async()=>{await Fi(ChatType.DBX_SALES_CHAT)},Fi=async e=>{const t=undefined;if(!document.getElementById(UNIFIED_CHAT_IFRAME_ID)||document.cookie.includes(UNIFIED_CHAT_COOKIE_NAME))return zoomChatManagerExceptionHandler(ErrorSeverity.Critical,ZoomChatIframeEmbedderErrorMessages.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET),!1;const n=undefined;if(!await Li())return zoomChatManagerExceptionHandler(ErrorSeverity.Critical,ZoomChatIframeEmbedderErrorMessages.ERROR_ZOOM_CHAT_RELOAD_FAILED),!1;const i=JSON.parse(localStorage.getItem(UNIFIED_CHAT_LOCAL_STORAGE_KEY)||"{}");return e===ChatType.DBX_SALES_CHAT?ZoomChatLocalStorageManager.saveStateToLocalStorage(DBX_SALES_CHAT_ON_CHECKOUT_FLAG,"true"):e===ChatType.DBX_CX_CHAT&&(i.reload=!0,ZoomChatLocalStorageManager.saveStateToLocalStorage(UNIFIED_CHAT_LOCAL_STORAGE_KEY,i)),!0};function ki(){const e=ii();e&&"function"==typeof e.handleOpenChatWindowCallback?e.handleOpenChatWindowCallback():xn(Ke.type,Ke.message)}const Bi=e=>{e.style.display=""};function Mi(){const e=undefined,t=(new Date).getDay();return 0===t||6===t}function Wi(){if(document.cookie.includes(UNIFIED_CHAT_COOKIE_NAME)){fi();const e=document.getElementById(UNIFIED_CHAT_IFRAME_ID);e&&(e.style.display="none")}}function xi(){try{const e=getOrInitZoomChatClient();e&&"function"==typeof e.consentNotGrantedDidNotLoadChatClient&&e.consentNotGrantedDidNotLoadChatClient()}catch(e){zoomChatManagerExceptionHandler(ERROR_ZOOM_CHAT_CONSENT_DECLINED.type,ERROR_ZOOM_CHAT_CONSENT_DECLINED.message,e)}}function Xi(){try{const e=ii();if(!e||"function"!=typeof e.consentGrantedProceedDBXSalesChatToLoad)return void xn(Ve.type,Ve.message);e.consentGrantedProceedDBXSalesChatToLoad()}catch(e){xn(Fe.type,Fe.message,e)}}function Gi(){const e=undefined;return si(k)===p}function Zi(e,t){t&&(e.selectedProductSupportPackage=t)}function zi(e){const t=window;t.dbxSelectedProductSupportPackage||(t.dbxSelectedProductSupportPackage={}),Zi(t.dbxSelectedProductSupportPackage,e)}const $i=async e=>{let t;if(t="",e&&(e.product===Product.DASH?t="PREMIUM_SUPPORT_DASH_CHAT":e.product===Product.DROPBOX&&(t="PREMIUM_SUPPORT_CX_CHAT")),!t)return!1;const n=await Fi(ChatType.DBX_CX_CHAT);return n&&zi(t),n};function Vi(){return"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}const Ki=()=>getUnifiedChatCookieValue().length>0;var Ji,qi,ji;!function(e){e.UNI_NAV="UNI_NAV",e.ZOOM_CHAT="ZOOM_CHAT",e.INTEGRATION_TEST="INTEGRATION_TEST"}(Ji||(Ji={})),function(e){e.BOOTSTRAP="BOOTSTRAP"}(qi||(qi={})),function(e){e.EMBEDDER_READY="EMBEDDER_READY",e.CLIENT_MESSAGE="CLIENT_MESSAGE"}(ji||(ji={}));var Yi=function(){function e(e,t,n,i){var a=this,o;this.port=new Promise((function(e,t){o=e}));var r=new URL(n),s=new URLSearchParams(r.search);if(e===Ji.ZOOM_CHAT){var l="".concat(location.origin).concat(location.pathname);s.append("origin",l)}else s.append("origin",location.origin);i&&s.append("locale",i),r.search=String(s),this.iframe=Object.assign(document.createElement("iframe"),{src:String(r),style:"border:none;background-color:transparent;",width:"100%",height:"1",frameBorder:"0",allowTransparency:"true",name:e});var d=function(n){if(n.origin===r.origin&&n.source===a.iframe.contentWindow&&n.data.key===qi.BOOTSTRAP){if(n.data.namespace!==e)return;removeEventListener("message",d);var i=n.ports[0];i.onmessage=function(e){e.data.key===ji.CLIENT_MESSAGE&&t(e.data.clientData)},i.postMessage({key:ji.EMBEDDER_READY}),o(i)}};addEventListener("message",d)}return e.prototype.sendMessage=function(e){var t={key:ji.CLIENT_MESSAGE,clientData:e};this.port.then((function(e){e.postMessage(t)}))},e}(),Qi=function(){function e(e,t){var n=new MessageChannel,i=new URLSearchParams(location.search).get("origin")||"";if(e===Ji.ZOOM_CHAT){if(!/^https?:\/\/[a-zA-Z0-9.-]+(:\d+)?(\/[^\s]*)?$/.test(i))throw new Error("Invalid parent origin")}else if(!/^https?:\/\/[a-zA-Z0-9.-]+(:[0-9]+)?$/.test(i))throw new Error("Invalid parent origin");var a=n.port1,o;if(this.port=new Promise((function(e,t){o=e})),a.onmessage=function(e){e.data.key===ji.EMBEDDER_READY?o(a):e.data.key===ji.CLIENT_MESSAGE&&t(e.data.clientData)},i.length){var r={key:qi.BOOTSTRAP,namespace:e};window.parent.postMessage(r,i,[n.port2])}}return e.prototype.sendMessage=function(e){var t={key:ji.CLIENT_MESSAGE,clientData:e};this.port.then((function(e){e.postMessage(t)}))},e}(),ea,ta,na;!function(e){e.REQUEST="REQUEST",e.RESPONSE="RESPONSE"}(ea||(ea={})),function(e){e.REQUEST="REQUEST",e.RESPONSE="RESPONSE"}(ta||(ta={})),function(e){e.success="SUCCESS",e.failure="FAILED"}(na||(na={}));const ia={action:Fn.performLogoutCallback,message:ge.LOGOUT_CALLBACK,messagetype:ea.REQUEST},aa=Pn.setCookieForDBXSalesChat,oa=Ee.SET_COOKIE_FOR_DBX_SALES_CHAT,ra=ta.REQUEST,sa=Pn.fetchZoomChatCredentials,la=Ee.FETCH_ZOOM_CHAT_CREDENTIALS,da=ta.REQUEST,ca={action:Fn.isChatWidgetLoadedInsideIframe,message:ge.CHECK_CHAT_WIDGET_STATUS,messagetype:ea.REQUEST},ua={action:Fn.setZoomChatWidgetToOpenWindow,message:ge.SET_ZOOM_CHAT_WIDGET_TO_OPEN_WINDOW,messagetype:ea.REQUEST},ha=Pn.deleteAttachedIframe,fa=Ee.DELETE_ATTACHED_IFRAME_ON_END_CHAT_BUTTON_CLICK,Ca=ta.REQUEST,Ea=Pn.getDocsendCurrentUserInfo,ga=Ee.FETCH_DOCSEND_CURRENT_USER_INFO,Sa=ta.REQUEST,Ta=Pn.getDropboxCurrentUserInfo,_a=Ee.FETCH_DROPBOX_CURRENT_USER_INFO,ma=ta.REQUEST,Ia=Pn.getBrowserLanguageInfo,pa=Ee.FETCH_BROWSER_LANGUAGE_INFO,Na=ta.REQUEST,Oa=Pn.getHellosignCurrentUserInfo,Aa=Ee.FETCH_HELLOSIGN_CURRENT_USER_INFO,Da=ta.REQUEST,ba=Pn.getBrowserPathInfo,Ra=Ee.FETCH_BROWSER_PATH_INFO,va=ta.REQUEST,ya=Pn.getIsProactiveFeatureStatus,wa=Ee.FETCH_BROWSER_PATH_INFO,La=ta.REQUEST,Ha=Pn.getCxChatRequestedLanguageInfo,Ua=Ee.FETCH_CX_CHAT_REQUESTED_LANGUAGE_INFO,Pa=ta.REQUEST,Fa=Pn.getUserSelectedProductSupportPackageInfo,ka=Ee.FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO,Ba=ta.REQUEST,Ma=Pn.getChatTypeInfo,Wa=Ee.FETCH_CHAT_TYPE_INFO,xa=ta.REQUEST,Xa=Pn.endChatButtonClicked,Ga=Ee.END_CHAT_BUTTON_CLICKED,Za=ta.REQUEST,za=Pn.proactiveEndChatButtonClicked,$a=Ee.PROACTIVE_END_CHAT_BUTTON_CLICKED,Va=ta.REQUEST,Ka=Pn.proactiveEndChatButtonDisappeared,Ja=Ee.PROACTIVE_END_CHAT_BUTTON_CLICKED,qa=ta.REQUEST,ja=Pn.proactiveEndChatButtonAppeared,Ya=Ee.PROACTIVE_END_CHAT_BUTTON_CLICKED,Qa=ta.REQUEST,eo=Pn.getBrowserStatus,to=Ee.GET_BROWSER_STATUS,no=ta.REQUEST,io=Pn.addScriptTagSuccess,ao=Ee.SCRIPT_TAG_SUCCESS,oo=ta.RESPONSE,ro=Pn.addScriptTagError,so=Ee.SCRIPT_TAG_ERROR,lo=ta.RESPONSE,co=Pn.expandButtonClicked,uo=Ee.EXPAND_BUTTON_CLICKED,ho=ta.RESPONSE,fo=Pn.minimizeButtonClicked,Co=Ee.MINIMIZE_BUTTON_CLICKED,Eo=ta.RESPONSE,go=Pn.chatWidgetLoaded,So=Ee.CHAT_WIDGET_LOADED,To=ta.RESPONSE,_o=Pn.chatWidgetLoaded,mo=na.success,Io=Ee.CHAT_WIDGET_LOADED,po=ta.RESPONSE,No=r.ChatBubble,Oo=Pn.chatWidgetLoaded,Ao=na.success,Do=Ee.CHAT_WIDGET_LOADED,bo=ta.RESPONSE,Ro=r.ChatWindow,vo=Pn.chatWidgetNotLoaded,yo=Ee.CHAT_WIDGET_NOT_LOADED,wo=na.failure,Lo=ta.RESPONSE,Ho=Pn.userAuthInfoLoaded,Uo=Pn.initiatedChatFromTransfer,Po=Pn.zoomCampaignSdkReady,Fo={currentEndToChatState:a.DoNotTerminateChatSession},ko={currentIframeState:o.Hiddden,currentUserActionState:t.ChatIsNotRequested,currentWidgetState:r.ChatBubble,currentCompanyState:s.UserNotSwtichCompany},Bo={currentIframeState:o.Visible,currentUserActionState:t.ChatIsRequested,currentWidgetState:r.ChatWindow,currentCompanyState:s.UserNotSwtichCompany},Mo={currentIframeState:o.Visible,currentUserActionState:t.ChatIsRequested,currentWidgetState:r.ChatBubble,currentCompanyState:s.UserNotSwtichCompany},Wo="undefined"!=typeof self&&self?self:window;function xo(e){const t=undefined;(Wo._DBX_UXA_bufferedClosures=Wo._DBX_UXA_bufferedClosures||[]).push(e),Go()}function Xo(){Wo._DBX_UXA_isUxaListening=!0,Go()}function Go(){if(!Wo._DBX_UXA_isUxaListening)return;const e=Wo._DBX_UXA_bufferedClosures=Wo._DBX_UXA_bufferedClosures||[],t=[...e];e.length=0;for(const e of t)e()}function Zo(){Wo._DBX_UXA_isUxaListening=void 0,Wo._DBX_UXA_bufferedClosures=void 0;try{delete Wo._DBX_UXA_isUxaListening,delete Wo._DBX_UXA_bufferedClosures}catch(e){}}function zo(e,t={detail:null}){if("function"==typeof CustomEvent)return new CustomEvent(e,t);const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,t.detail),n}function $o(e,t){window.dispatchEvent(zo(e,t))}const Vo=(e,t)=>{xo((()=>{$o("zoom_chat_custom_event",{detail:{eventType:e,extra:t}})}))};function Ko(e,t,n){n.chatType!==d.DOCSEND_CHAT&&Vo(e,{chat_type:n.chatType,chat_interaction_type:n.chatInteractionType,event_details:t,surface_screen_height:n.surfaceScreenHeight,surface_screen_width:n.surfaceScreenWidth,external_tag:n.externalTag||"",platform:n.platform,time_until_zoom_chat_interaction:n.timeUntilchatInteraction,total_zoom_chat_duration:n.totalChatDurationInSec,engagement_id:n.engagementId||"",sales_exp_variant:n.salesExperimentVariant||""})}function Jo(e){Ko(h.INITIALIZED,"Chat initiation has started",e)}function qo(e){Ko(h.SUCCESS,"Chat initiation successful",e)}function jo(e){Ko(h.FAILED,"Chat initiation failed",e)}function Yo(e){Ko(h.NETWORK_FAILED,"Chat initiation failed due to network issue",e)}function Qo(e){Ko(h.TIMEOUT_FAILED,"Chat initiation failed due to timeout",e)}function er(e){Ko(h.EXPAND,"User clicked on the chat bubble",e)}function tr(e){Ko(h.MINIMIZE,"User clicked on the chat minimize button",e)}function nr(e){Ko(h.END,"The chat engagement was ended",e)}function ir(e){Ko(h.CHATREQUESTED,"User requested a chat",e)}function ar(e){Ko(h.DISPLAYED,"Zoom chat displayed to ther user",e)}function or(e){Ko(h.LOGOUT,"Chat ended by user logout",e)}function rr(e){oi("registerZoomChatConsentDeclinedCallback: User declined the cookie for the chat, Callback is triggered, not initializing zoom_chat_client"),Ko(h.CONSENTDECLINED,"User declined coockie consent, did not load zoom chat",e)}function sr(e){Ko(h.SALESCHAT_DISALLOWED_COUNTRY,"Sales chat is not allowed in the requested country",e)}function lr(e){Ko(h.SALES_EXPERIMENT_PRESENTED,"Sales chat experiment was presented to the user",e)}function dr(e){return null!==si(e)}function cr(e){return null!==si(e)}function ur(e){return null!==si(e)}function hr(t,n){var i;const a=undefined,o=document.cookie.split("; ").find((e=>e.startsWith(`${t}=`)));if(!o)return!1;try{const e=decodeURIComponent(o.split("=")[1]),t=JSON.parse(e);if(!t.hasOwnProperty("categories")||"object"!=typeof t.categories)return!1;if(!t.categories.hasOwnProperty(n))return!1;const a=undefined;return Boolean(null===(i=null==t?void 0:t.categories)||void 0===i?void 0:i[n])}catch(n){return xn(e.Critical,`Error parsing cookie ${t}`,n),!1}}function fr(){const e=undefined;return dr(m)}class Cr{constructor(e){this.args=e,this.el=null,this.isChatIframeReady=!1,this.initTimeout=null,this.chatStartInitTime=null,this.chatEndInitTime=null,this.chatElapsedTime=null,this.externalActionCallbacks={},this.seenActions=new Set,this.handleIframeServiceMessages=e=>{e.action===Pn.getDocsendCurrentUserInfo?this.sendDocsendCurrentUserInfoToIframeService():e.action===Pn.ResponseForIsChattingStatus||(e.action===Pn.getDropboxCurrentUserInfo?this.sendDropboxCurrentUserInfoToIframeService():e.action===Pn.getBrowserPathInfo?this.sendDropboxCurrentPathInfoToIframeService():e.action===Pn.getIsProactiveFeatureStatus?this.sendIsProactiveFeatureStatusToIframeService():e.action===Pn.getHellosignCurrentUserInfo?this.sendHellosignCurrentUserInfoToIframeService():e.action===Pn.getChatTypeInfo?this.sendCurrentChatTypeInfoToIframeService():e.action===Pn.addScriptTagSuccess?this.attachScriptTagSuccessToFrame():e.action===Pn.addScriptTagError?this.attachScriptTagErrorToFrame(e):e.action===Pn.fetchZoomChatCredentials?this.executeAttachZoomChatScriptTagToIframe():e.action===Pn.expandButtonClicked||e.action===Pn.minimizeButtonClicked||e.action===Pn.proactiveEndChatButtonClicked||e.action===Pn.proactiveEndChatButtonAppeared?this.handleChatWidgetInteraction(e):e.action===Pn.chatWidgetLoaded||e.action===Pn.chatWidgetNotLoaded?this.validateChatWidgetLoadStatus(e):e.action===Pn.endChatButtonClicked?this.performCleanUpAsUserEndsTheChat():e.action===Pn.deleteAttachedIframe?this.detachZoomChatIframe():e.action===Pn.getBrowserStatus?this.sendBrowserStatusToIframeService():e.action===Pn.setCookieForDBXSalesChat?this.setCookieForDBXSalesChat():e.action===Pn.getCxChatRequestedLanguageInfo?this.sendDropboxCxChatRequestedInfoToIframeService():e.action===Pn.getUserSelectedProductSupportPackageInfo?this.sendButtonSelectedProductSupportPackageInfoToIframeService():e.action===Pn.initiatedChatFromTransfer&&this.handleInitiatedChatFromTransfer());const t=e.action,n=this.externalActionCallbacks[t];n&&(n(),delete this.externalActionCallbacks[t]),this.seenActions.add(t)},this.iframeEmbedder=new Yi(Ji.ZOOM_CHAT,this.handleIframeServiceMessages,e.iframeSrc,void 0),this.isMobileOrTablet=this.detectMobileOrTablet(),this.registerZoomChatClientReloadCallback(),this.registerLogoutCallback(),this.registerOnActionCallback(),this.registerSwitchCompanyCallback(),this.registerOpenChatWindowCallback(),this.registerInitZoomChatClientReloadCallback(),this.registerAllowDBXSalesChatToLoadCallback(),this.registerZoomChatConsentDeclinedCallback(),this.registerShowHelloSignCxChatCallback(),this.registerIsChattingFromSDK()}registerIsChattingFromSDK(){const e=undefined;if(this.getInitializedChatTypeFromProfile()===d.DBX_SALES_CHAT){const e=undefined;ii().showIsChattingStatus=()=>this.retrieveIsChattingFromIframe()}}registerShowHelloSignCxChatCallback(){const e=undefined;if(this.getInitializedChatTypeFromProfile()===d.HELLOSIGN_CX_CHAT){oi("registerShowHelloSignCxChatCallback: Registered ShowHelloSignCXChat method to display HelloSign CX chat");const e=undefined;ii().showHelloSignCxChat=()=>this.handleShowHelloSignCxChat()}}async handleShowHelloSignCxChat(){oi("handleShowHelloSignCxChat: Checking if chat reload is needed.");const t=document.getElementById(D);if(this.shouldReloadHelloSignCxChat(t)){oi("handleShowHelloSignCxChat: Reloading chat client.");const e=await Li();this.handleReloadResult(e)}else oi("handleShowHelloSignCxChat: Iframe not found or cookie is set, not reloading."),xn(e.Critical,Te.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET)}shouldReloadHelloSignCxChat(e){oi("shouldReloadHelloSignCxChat: Checking reload conditions.");const t=!0===Hn.getStateFromLocalStorage(H),n=!!e&&!document.cookie.includes(m);return oi(`shouldReloadHelloSignCxChat: Logout flag set: ${t}, Iframe reload needed: ${n}`),t&&(oi("shouldReloadHelloSignCxChat: Removing chat session logout flag."),this.removeChatSessionLogoutFlag()),t||n}handleReloadResult(t){oi(`handleReloadResult: Reload success status: ${t}`),t?(oi("handleReloadResult: Updating local storage to reload state."),this.updateLocalStorageToReloadState()):(oi("handleReloadResult: Zoom chat reload failed."),xn(e.Critical,Te.ERROR_ZOOM_CHAT_RELOAD_FAILED))}updateLocalStorageToReloadState(){oi("updateLocalStorageToReloadState: Setting reload flag in local storage.");const e=JSON.parse(localStorage.getItem(v)||"{}");e.reload=!0,localStorage.setItem(v,JSON.stringify(e))}registerZoomChatClientReloadCallback(){const t=undefined;ii().reloadZoomChatClient=async()=>{try{this.seenActions.clear();const t=await this.reInitializeZoomChatClient();if(t)oi("registerZoomChatClientReloadCallback: Re-initialization complete.");else{const n=`registerZoomChatClientReloadCallback: Returned Re-initialization status ${t}`;xn(e.Critical,n)}return t}catch(t){return xn(e.Critical,"reInitializeZoomChatClient is failed",t),!1}}}registerInitZoomChatClientReloadCallback(){const t=undefined;ii().initZoomChatReloadProcess=async()=>{try{return this.seenActions.clear(),await this.startZoomChatIframeReloadProcess(),!0}catch(t){return xn(e.Critical,"Error during Zoom chat reload process.",t),!1}}}static getInstance(e){return Cr.instance||(Cr.instance=new Cr(e)),Cr.instance}updateArgs(e){this.args={...this.args,...e}}clearInitializationTimeout(){try{if(!this.initTimeout)return void oi("clearInitializationTimeout: No active timeout to clear.");clearTimeout(this.initTimeout),this.initTimeout=null,oi("clearInitializationTimeout: Successfully cleared the initialization timeout.")}catch(t){xn(e.Critical,Te.ERROR_CLEARING_TIMEOUT,t)}}static setChatUri(e){Cr.chatUri=e}static setChatApiKey(e){Cr.chatApiKey=e}static setChatDataEnv(e){Cr.chatDataEnv=e}static getChatUri(){return Cr.chatUri}static getChatApiKey(){return Cr.chatApiKey}static getChatDataEnv(){return Cr.chatDataEnv}deleteUnifiedChatCookie(e,t){oi(`deleteUnifiedChatCookie: Removing the Unified Chat Cookie : ${e} `);let n=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;t&&(n+=` domain=${t};`),document.cookie=n}getIsMobileOrTablet(){return this.isMobileOrTablet}detectMobileOrTablet(){return window.matchMedia("(max-width: 1024px)").matches}getScreenHeight(){return`${window.screen.height}px`}getScreenWidth(){return`${window.screen.width}px`}getPlatformInfo(){return navigator.platform}getDelayBetweenChatDisplayAndFirstInteraction(){const e=Hn.getStateFromLocalStorage(w),t=Hn.getStateFromLocalStorage(y);if(!e||!t)return 0;const n=new Date(e),i=new Date(t);return isNaN(n.getTime())||isNaN(i.getTime())?0:(i.getTime()-n.getTime())/1e3}calculateTotalChatDuration(){const e=Hn.getStateFromLocalStorage(y),t=Hn.getStateFromLocalStorage(L);if(!e||!t)return 0;const n=new Date(e),i=new Date(t);return isNaN(n.getTime())||isNaN(i.getTime())?0:(i.getTime()-n.getTime())/1e3}updateChatInteractionType(e){this.args.chatInitProfile&&(this.args.chatInitProfile.chatInteractionType=e)}handleZoomUXAEvent(t){var n,i,a,o,r;oi(`setChatWidgetToWindowMode - handleZoomUXAEvent: ${t} and  ${null===(n=this.args.chatInitProfile)||void 0===n?void 0:n.engagementId}`);const s={chatType:this.getInitializedChatTypeFromProfile(),chatInteractionType:this.getChatInteractionTypeFromProfile(),surfaceScreenHeight:this.getScreenHeight(),surfaceScreenWidth:this.getScreenWidth(),platform:this.getPlatformInfo(),timeUntilchatInteraction:String(this.getDelayBetweenChatDisplayAndFirstInteraction()),totalChatDurationInSec:String(this.calculateTotalChatDuration()),engagementId:null===(i=this.args.chatInitProfile)||void 0===i?void 0:i.engagementId,salesExperimentVariant:null===(r=null===(o=null===(a=this.args)||void 0===a?void 0:a.chatSpecificConfigs)||void 0===o?void 0:o.dbxChatConfigs)||void 0===r?void 0:r.salesExperimentVariant};switch(t){case h.INITIALIZED:Jo(s);break;case h.SUCCESS:qo(s);break;case h.FAILED:jo(s);break;case h.NETWORK_FAILED:Yo(s);break;case h.TIMEOUT_FAILED:Qo(s);break;case h.EXPAND:er(s);break;case h.MINIMIZE:tr(s);break;case h.END:nr(s);break;case h.CHATREQUESTED:ir(s);break;case h.DISPLAYED:ar(s);break;case h.LOGOUT:or(s);break;case h.CONSENTDECLINED:rr(s);break;case h.SALESCHAT_DISALLOWED_COUNTRY:sr(s);break;case h.SALES_EXPERIMENT_PRESENTED:lr(s);break;default:const n=`Unknown Zoom chat UXA event encountered: ${t}`;xn(e.Critical,n)}}isValidSalesChatAppState(){const e=Hn.getStateFromLocalStorage(v);if(oi(`isValidSalesChatAppState: dbxUnifiedChatState : ${e}`),!e||"object"!=typeof e)return oi("isValidSalesChatAppState: No state found in local storage for key: dbx_unified_chat_state"),!1;const t=e.hasOwnProperty("currentIframeState")&&e.hasOwnProperty("currentUserActionState")&&e.hasOwnProperty("currentWidgetState")&&e.hasOwnProperty("currentCompanyState");oi(`isValidSalesChatAppState: hasRequiredProperties : ${t}`);const n=e.hasOwnProperty("pageHistory")||e.hasOwnProperty("reload");return oi(`isValidSalesChatAppState: hasInvalidProperties : ${n}`),oi(`isValidSalesChatAppState: Returning : ${t&&!n}`),t&&!n}cleanUpUnifiedChatState(){const e=this.getInitializedChatTypeFromProfile();if(z.includes(e)){if(e===d.DBX_SALES_CHAT&&!this.isValidSalesChatAppState())return;localStorage.removeItem(v)}}scheduleChatAndIframeToVisible(e,t){this.proceedToDisplayChat(e,t),this.setChatIframeVisibilityAndState()}setIframeVisibilityState(){oi("setIframeVisibilityState: Updating local storage for iframe visibility"),Hn.updateStateInLocalStorage(v,o.Visible,"currentIframeState")}setUserRequestedChatState(e){oi(`setUserRequestedChatState: First-time Initialization Detected: ${e}: Setting CHAT IS REQUESTED`),Hn.updateStateInLocalStorage(v,t.ChatIsRequested,"currentUserActionState")}setChatWidgetWindowState(){Hn.updateStateInLocalStorage(v,r.ChatWindow,"currentWidgetState")}setChatWidgetBubbleState(){Hn.updateStateInLocalStorage(v,r.ChatBubble,"currentWidgetState")}logProactiveStartupTimer(e){oi(`logProactiveStartupTimer: Setting Proactive timer to (${e} seconds)`)}setChatIframeVisibilityAndState(){this.setUnifiedChatIframeToVisible(this.iframeEmbedder.iframe),this.setIframeVisibilityState()}proceedToLoadChatAsProActive(e,t){const n=this.calculateRemainingStartupTime();this.logProactiveStartupTimer(n),0===n?this.scheduleChatAndIframeToVisible(e,t):setTimeout((()=>{this.scheduleChatAndIframeToVisible(e,t),oi(`proceedToLoadChatAsProActive: Scheduled proactive execution finished after (${n} seconds).`)}),1e3*n)}calculateRemainingStartupTime(){var e,t;let n=(null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedChatStartUpTime)||0;const i=parseFloat(((null!==(t=this.chatElapsedTime)&&void 0!==t?t:0)/1e3).toFixed(2));return n=parseFloat((n-i).toFixed(2)),n}handleZoomChatInitialDisplay(){const e=new Date;oi(`chat first displayed time ${e}`),Hn.saveStateToLocalStorage(w,e),this.handleZoomUXAEvent(h.DISPLAYED),this.handleZoomUXAEvent(h.SALES_EXPERIMENT_PRESENTED)}setChatWidgetToWindowMode(e,t){oi(`setChatWidgetToWindowMode: First-time Initialization Detected: ${e} : Setting ChatWidget to window Mode`),this.iframeEmbedder.sendMessage(ua),t.action=Pn.expandButtonClicked}proceedToDisplayChat(e,t){var n,i,a,o,s,l,c,u,f,C;const E=Hn.getStateFromLocalStorage(v),g=undefined;oi(`proceedToDisplayChat : isProactiveMsgFeatureEnabled = ${null===(o=null===(a=null===(i=null===(n=this.args)||void 0===n?void 0:n.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===a?void 0:a.proActiveMessagingConfig)||void 0===o?void 0:o.isEnabled}`);const S=null===(u=null===(c=null===(l=null===(s=this.args)||void 0===s?void 0:s.chatSpecificConfigs)||void 0===l?void 0:l.dbxChatConfigs)||void 0===c?void 0:c.proActiveMessagingConfig)||void 0===u?void 0:u.proActiveMessagingPages;oi(`proceedToDisplayChat : isProactiveMsgFeatureEntryPages = ${S}`);const T=undefined,_=_i(null!==(C=null===(f=this.args.chatInitProfile)||void 0===f?void 0:f.identifiedHref)&&void 0!==C?C:"");e!==d.DBX_SALES_CHAT&&e!==d.HELLOSIGN_CX_CHAT||E.currentWidgetState!==r.ChatBubble||((null==S?void 0:S.includes(_))?oi(`proceedToDisplayChat :  Starting DBX Chat = ${e} with  ProactiveMsgFeature Implementation flow as the current page matches with ProactiveMsgFeature Pages`):(oi(`proceedToDisplayChat :  Starting DBX Chat = ${e} with no ProactiveMsgFeature Implementation flow as the current page not matches with ProactiveMsgFeature Pages`),this.setChatWidgetToWindowMode(e,t),this.setIframePropertiesToMaximizeState(),this.handleZoomChatInitialDisplay())),e!==d.DBX_SALES_CHAT&&e!==d.HELLOSIGN_CX_CHAT&&(oi(`proceedToDisplayChat :  Starting non-DBX Chat = ${e}`),li(e),this.setUserRequestedChatState(e),this.args.chatInitProfile&&(this.args.chatInitProfile.engagementId=t.engagementId),this.handleZoomUXAEvent(h.CHATREQUESTED))}getIdentifiedHost(){var e,t;const n=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedHost)&&void 0!==t?t:null}getInitializedChatTypeFromProfile(){var e,t;const n=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedChat)&&void 0!==t?t:d.UNSUPPORTED_CHAT}getChatInteractionTypeFromProfile(){var e,t;const n=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.chatInteractionType)&&void 0!==t?t:u.UNSUPPORTED_CHAT}createChatTypeInfo(){return{identifiedChat:this.getInitializedChatTypeFromProfile()}}getIdentifiedPathFromProfile(){var e,t;const n=undefined;return{identifiedPath:_i(null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedHref)&&void 0!==t?t:"")}}sendCurrentChatTypeInfoToIframeService(){const e=this.createChatTypeInfo(),t={action:Fn.sendCurrentChatTypeInfo,messageType:ea.REQUEST,dbxCurrentChatTypeInfo:JSON.stringify(e),message:ge.SEND_CURRENT_CHAT_TYPE_INFO};this.iframeEmbedder.sendMessage(t)}sendDropboxCurrentPathInfoToIframeService(){const e=this.getIdentifiedPathFromProfile(),t={action:Fn.sendBrowserPathInfo,messageType:ea.REQUEST,dbxCurrentPathInfo:JSON.stringify(e),message:ge.SEND_BROWSER_PATH_INFO};this.iframeEmbedder.sendMessage(t)}sendIsProactiveFeatureStatusToIframeService(){var e,t,n,i;const a={isProactiveFeatureEnabled:null!==(i=null===(n=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.proActiveMessagingConfig)||void 0===n?void 0:n.isEnabled)&&void 0!==i&&i},o={action:Fn.sendIsProactiveFeatureStatus,message:ge.SEND_BROWSER_STATUS,dbxProactiveFeatureInfo:JSON.stringify(a),messageType:ea.RESPONSE};this.iframeEmbedder.sendMessage(o)}isIdentifiedHostSupportedToLoadChat(){var t,n,i,a,o,r;const s=null===(t=this.args)||void 0===t?void 0:t.chatInitProfile,l=this.getIdentifiedHost();let d=!1;if(null!==l&&(null==s?void 0:s.supportedEntitlements))if(null===(n=s.supportedEntitlements.wwwDbxEntitlements)||void 0===n?void 0:n.includes(l))d=!0;else if(null===(i=s.supportedEntitlements.docsendEntitlements)||void 0===i?void 0:i.includes(l))d=!0;else if(null===(a=s.supportedEntitlements.signCenterEntitlements)||void 0===a?void 0:a.includes(l))d=!0;else if(null===(o=s.supportedEntitlements.dashDbxEntitlements)||void 0===o?void 0:o.includes(l))d=!0;else if(null===(r=s.supportedEntitlements.hellosignEntitlements)||void 0===r?void 0:r.includes(l))d=!0;else{const t=`Identified Host '${l}' is not supported in any entitlements.`;xn(e.Critical,t)}else xn(e.Critical,Te.IDENTIFIED_HOST_OR_SUPPORTED_ENTITLEMENTS_NULL);return d}handleIframeExecutionError(t){xn(e.Critical,Te.IFRAME_EXECUTION_ERROR,t)}handleIframeContentWindowError(){xn(e.Critical,Te.IFRAME_CONTENT_WINDOW_NULL_ERROR)}handleIframeNotFoundError(){xn(e.Critical,Te.IFRAME_NOT_FOUND_ERROR)}attachScriptTagSuccessToFrame(){this.setIframeReadyStatus(!0),this.iframeEmbedder.sendMessage(ca)}attachScriptTagErrorToFrame(t){xn(e.Critical,Te.SCRIPT_TAG_ATTACHMENT_ERROR,t)}handleIframeInitializationError(t){xn(e.Critical,Te.CHAT_CLIENT_SETUP_INITIALIZATION_ERROR,t),this.handleZoomUXAEvent(h.FAILED)}setupInitializationTimeout(){this.chatStartInitTime=performance.now(),oi("setupInitializationTimeout: Setting up timeout for 60 secs to load entire process."),this.initTimeout=setTimeout((()=>{xn(e.Critical,Te.CHAT_IFRAME_LOAD_TIMEOUT_ERROR),this.handleZoomUXAEvent(h.NETWORK_FAILED),xn(e.Critical,"setupInitializationTimeout: zoom_chat_client module Initialization :  [FAILED]")}),6e4)}handleNoCookieOnChatWidgetInit(e){this.cleanUpUnifiedChatState(),this.isIdentifiedHostSupportedToLoadChat()&&(this.setUnifiedChatInitialState(),this.setUnifiedChatIframeToInVisible(e),this.setIframeProperties())}isInitialDbxSalesChatWhenCookieExists(e,t){return null===e&&t===d.DBX_SALES_CHAT&&(oi(`No current state found. Initializing with state: ${JSON.stringify(Bo)}`),Hn.saveStateToLocalStorage(v,Bo),!0)}isChatWidgetHiddenWithoutCompanySwitch(e,t){return e===o.Hiddden&&t===s.UserNotSwtichCompany}isChatWidgetHiddenWithCompanySwitch(e,t){return e===o.Hiddden&&t===s.UserSwtichCompany}isChatWindowVisibleWithRequestedState(e,n,i,a){return e===o.Visible&&n===t.ChatIsRequested&&i===r.ChatWindow&&a===s.UserNotSwtichCompany}isChatBubbleVisibleWithRequestedState(e,n,i,a){return e===o.Visible&&n===t.ChatIsRequested&&i===r.ChatBubble&&a===s.UserNotSwtichCompany}handleCookieOnChatWidgetInit(e){const t=Hn.getStateFromLocalStorage(v),n=this.getInitializedChatTypeFromProfile();if(this.isInitialDbxSalesChatWhenCookieExists(t,n))return;const{currentIframeState:i,currentCompanyState:a,currentUserActionState:o,currentWidgetState:r}=t;this.isChatWidgetHiddenWithoutCompanySwitch(i,a)?this.handleWhenChatWidgetIsInHiddenState(t,e):this.isChatWindowVisibleWithRequestedState(i,o,r,a)?this.handleWhenChatWidgetIsInWindowAndVisibleState(e):this.isChatBubbleVisibleWithRequestedState(i,o,r,a)?this.handleWhenChatWidgetIsInBubbleAndVisibleState(e):this.isChatWidgetHiddenWithCompanySwitch(i,a)&&this.handleCompanySwitch(e,n)}handleCompanySwitch(e,t){t===d.DOCSEND_CHAT&&this.handleCaseWhenUserSwitchesCompany(e)}handleCaseWhenUserSwitchesCompany(e){this.setUnifiedChatIframeToInVisible(e),setTimeout((()=>{this.setUnifiedChatIframeToInVisible(e),this.iframeEmbedder.sendMessage(ia),this.deleteUnifiedChatCookie(m)}),5e3)}handleWhenChatWidgetIsInHiddenState(e,n){e.currentUserActionState===t.ChatIsNotRequested&&(this.setUnifiedChatIframeToInVisible(n),this.saveUnifiedChatState(ko))}handleWhenChatWidgetIsInBubbleAndVisibleState(e){this.setUnifiedChatIframeToVisible(e),this.setIframePropertiesToMinimizeState(),this.saveUnifiedChatState(Mo)}getCookieValue(e){const t=e+"=",n=document.cookie.split(";");for(const e of n){const n=e.trim();if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}handleWhenChatWidgetIsInWindowAndVisibleState(e){this.setUnifiedChatIframeToVisible(e),this.setIframePropertiesToMaximizeState(),this.saveUnifiedChatState(Bo)}handleStateWithPageHistory(){oi("handleStateWithPageHistory: [STARTED]");const e=Hn.getStateFromLocalStorage(v);if(oi(`handleStateWithPageHistory: Retrieved current state: ${JSON.stringify(e)}`),!e){const e={...ko,pageHistory:{previousPage:null,currentPage:window.location.pathname},reload:!1};return oi(`handleStateWithPageHistory: No current state found. Initializing with state: ${JSON.stringify(e)}`),Hn.saveStateToLocalStorage(v,e),void oi("handleStateWithPageHistory: [COMPLETED]")}const t=window.location.pathname;oi(`handleStateWithPageHistory: Real-time current path: ${t}`);const n=e.pageHistory.previousPage,i=e.pageHistory.currentPage,a=undefined;oi(`storedPreviousPage: ${n}, storedCurrentPage: ${i}, storedReloadFlag: ${e.reload}`);let o=!1;null===n&&i?i===t||t.startsWith(i)?(oi("handleStateWithPageHistory: Stored current value and real-time current value are the same. Setting reload to false."),o=!1,e.pageHistory={previousPage:i,currentPage:t}):(oi("handleStateWithPageHistory: Stored currentPage value and real-time currentPage value are different."),oi("handleStateWithPageHistory: Updating previousPage to currentPage and currentPage to realTimeCurrentPath."),o=!0,e.pageHistory={previousPage:i,currentPage:t}):n&&i&&(oi("handleStateWithPageHistory: Both previousPage and currentPage are set. Comparing values."),i===t||t.startsWith(i)?(oi("handleStateWithPageHistory: Real-time current path matches stored currentPage. Setting reload to false."),o=!1):(oi("handleStateWithPageHistory: Real-time current path does not match. Updating page history."),o=!0,e.pageHistory={previousPage:i,currentPage:t})),e.reload=o,Hn.saveStateToLocalStorage(v,e),oi(`handleStateWithPageHistory: Final updated state with reload flag: ${JSON.stringify(e)}`),oi("handleStateWithPageHistory: [COMPLETED]")}async startZoomChatIframeReloadProcess(){oi("startZoomChatIframeReloadProcess: [STARTED]"),oi("startZoomChatIframeReloadProcess: Starting chat termination process."),oi("startZoomChatIframeReloadProcess: Sending message to iframe for ending the current chat session."),this.iframeEmbedder.sendMessage(ia),await this.waitForSessionTermination(),oi("startZoomChatIframeReloadProcess: Timeout reached. Executing reload callback to refresh chat state.");const e=await this.triggerReloadZoomChatClient();return oi("startZoomChatIframeReloadProcess: [COMPLETED]"),e}async waitForSessionTermination(){oi("waitForSessionTermination: Waiting for session termination..."),await new Promise((e=>setTimeout(e,S)))}async triggerReloadZoomChatClient(){oi("triggerReloadZoomChatClient: Starting reload callback execution.");const e=ii();if(!e||"function"!=typeof e.reloadZoomChatClient)return xn(Je.type,Je.message),!1;oi("triggerReloadZoomChatClient: Valid Zoom Chat client detected. Initiating reload.");try{return await e.reloadZoomChatClient(),oi("triggerReloadZoomChatClient: Reload callback executed successfully."),!0}catch(e){const t=undefined;return oi(`triggerReloadZoomChatClient: Reload failed: ${e instanceof Error?e.message:String(e)}`),!1}}removeUnifiedChatDivContainer(){const e=document.querySelector(".dbx-unified-chat-container");e?e.remove():oi("removeUnifiedChatDivContainer: No .dbx-unified-chat-container found. No action taken.")}resetInitialization(){oi("resetInitialization : [STARTED] - Closing and resetting port..."),this.el=null,this.isChatIframeReady=!1,this.initTimeout=null,this.chatStartInitTime=null,this.chatEndInitTime=null,this.chatElapsedTime=null,oi("resetInitialization : [COMPLETED]")}attachMessageListener(){try{window.addEventListener("message",this.handleIframeServiceMessages,{passive:!0})}catch(t){xn(e.Critical,Te.ERROR_ATTACHING_MESSAGE_EVENT_LISTENER,t)}}async reInitChatClient(t){oi("reInitChatClient: [STARTED] Preparing configs to reinitialize the chat client.");try{const e=Cr.getInstance(t);return Cr.setChatUri(t.chatUri),Cr.setChatApiKey(t.chatApiKey),Cr.setChatDataEnv(t.chatDataEnv),oi("reInitChatClient: [COMPLETED] Preparing configs to reinitialize the chat client."),oi("reInitChatClient: *** CALLING initChatClient *** ......."),await e.initChatClient(),oi("reInitChatClient: [COMPLETED] Chat client initialized successfully."),!0}catch(t){return xn(e.Critical,"reInitChatClient failed",t),!1}}async reInitializeZoomChatClient(){oi("reInitializeZoomChatClient: Triggered re-init");try{this.removeUnifiedChatDivContainer(),this.resetInitialization(),oi(`Arguments for re-initialization: ${JSON.stringify(this.args)}`),this.iframeEmbedder=new Yi(Ji.ZOOM_CHAT,this.handleIframeServiceMessages,this.args.iframeSrc,void 0);const e=undefined;if(!await this.reInitChatClient(this.args))throw new Error("Chat client initialization failed.");return!0}catch(t){return xn(e.Critical,"re-initialization failed",t),!1}}isChatReactiveOnCheckoutPage(e){var t,n,i;const a=null===(t=this.args.chatInitProfile)||void 0===t?void 0:t.trustedHost,o=undefined,r=_i(null!==(i=null===(n=this.args.chatInitProfile)||void 0===n?void 0:n.identifiedHref)&&void 0!==i?i:""),s=Hn.getStateFromLocalStorage(U);return oi(`isChatReactiveOnCheckoutPage : isButtonClickedOnCheckoutPage ${s}`),e===d.DBX_SALES_CHAT&&a===l.WWW_DBX_HOST&&r===q&&s}skipZoomChatReload(e,t){oi("skipZoomChatReload : [DONE]");const n=this.isChatReactiveOnCheckoutPage(e);oi(`skipZoomChatReload : isCheckoutSalesChatReactive  and button clicked: ${n}`),n?this.handleDbxSalesCheckoutPageReactiveChat(d.DBX_SALES_CHAT,t):this.proceedToLoadChatAsProActive(e,t)}setUnifiedChatInitialState(){const e=undefined;this.getInitializedChatTypeFromProfile()===d.DBX_SALES_CHAT?this.handleStateWithPageHistory():Hn.saveStateToLocalStorage(v,ko)}setUnifiedChatIframeToInVisible(e){e.style.display="none"}setUnifiedChatIframeToVisible(e){e.style.display=""}setIframeProperties(){this.setIframePropertiesToMinimizeState()}registerOpenChatWindowCallback(){const e=undefined;ii().handleOpenChatWindowCallback=()=>{oi("registerOpenChatWindowCallback: First-time Initialization: Setting ChatWidget to window Mode"),this.iframeEmbedder.sendMessage(ua),this.handleZoomUXAEvent(h.CHATREQUESTED)}}registerZoomChatConsentDeclinedCallback(){const e=undefined;ii().consentNotGrantedDidNotLoadChatClient=()=>{this.handleZoomUXAEvent(h.CONSENTDECLINED)}}registerAllowDBXSalesChatToLoadCallback(){const e=undefined;if(this.getUnifiedChatCookieStatus().currentInitChat!==d.DBX_SALES_CHAT)return;const t=undefined;ii().consentGrantedProceedDBXSalesChatToLoad=()=>{this.handleDBXSalesChatConsent()}}handleDBXSalesChatConsent(){const e=undefined;cr(N)?oi("handleDBXSalesChatConsent: Skipping ZOOM_CHAT_CLIENT initialization - SNAPENGAGE chat already initialized"):(this.deregisterAllowDBXSalesChatToLoadCallback(),oi("handleDBXSalesChatConsent: DBX_SALES_CHAT is loading now, initializing chat client."),this.initChatClient().then(Ai))}deregisterAllowDBXSalesChatToLoadCallback(){const e=ii();e&&"function"==typeof e.consentGrantedProceedDBXSalesChatToLoad?(oi("deregisterAllowDBXSalesChatToLoadCallback: Callback consentGrantedProceedDBXSalesChatToLoad deregistered successfully."),e.consentGrantedProceedDBXSalesChatToLoad=void 0):oi("deregisterAllowDBXSalesChatToLoadCallback: Callback consentGrantedProceedDBXSalesChatToLoad was not registered or already deregistered.")}saveUnifiedChatState(e){Hn.saveStateToLocalStorage(v,e)}isUnifiedChatCookieExists(e){const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const i=undefined;if(e==t[n].split("=")[0].trim())return!0}return!1}setChatSessionLogoutFlag(){const e=this.getUnifiedChatCookieStatus();e.currentInitChat!==d.DBX_SALES_CHAT&&e.currentInitChat!==d.HELLOSIGN_CX_CHAT||localStorage.setItem(H,"true")}removeChatRequestedFlagOnCheckoutPage(){localStorage.removeItem(U)}removeChatSessionLogoutFlag(){localStorage.removeItem(H)}registerLogoutCallback(){const e=undefined;ii().handleOnLogoutCallback=()=>{this.handleLogout()}}registerOnActionCallback(){const e=undefined;ii().onAction=(e,t,n)=>{(null==n?void 0:n.includePreviousActions)&&this.seenActions.has(e)?t():this.externalActionCallbacks[e]=t}}handleLogout(){const e=this.getInitializedChatTypeFromProfile(),t=this.isIOSSafariOrWebView();Hn.deleteUnifiedChatStateFromLocalStorage(P),e===d.HELLOSIGN_CX_CHAT&&this.deleteUnifiedChatCookie(m),t||this.performLogoutActions(v)}performLogoutActions(e){Hn.deleteUnifiedChatStateFromLocalStorage(e),this.setChatSessionLogoutFlag(),this.iframeEmbedder.sendMessage(ia),this.handleZoomUXAEvent(h.LOGOUT)}registerSwitchCompanyCallback(){const e=undefined;ii().handleOnSwitchCompanyCallback=()=>{this.iframeEmbedder.sendMessage(ia),setTimeout((()=>{this.detachZoomChatIframe()}),1e3)}}isIOSSafariOrWebView(){const e=navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),n=/AppleWebKit/.test(e)&&!/Safari/.test(e);return oi(`isIOSSafariOrWebView: isSafari: ${t}, isWebView : ${n}`),t||n}resetChatSessionForIOS(){const e=undefined;if(this.getInitializedChatTypeFromProfile()===d.DOCSEND_CHAT){const e=Hn.getStateFromLocalStorage(P);null===e&&(Hn.saveStateToLocalStorage(P,Fo),setTimeout((()=>{this.iframeEmbedder.sendMessage(ia)}),3e3)),e.currentEndToChatState===a.DoNotTerminateChatSession&&Hn.saveStateToLocalStorage(P,Fo)}}clearChatTimeMetricsFromLocalStorage(){Hn.deleteUnifiedChatStateFromLocalStorage(L),Hn.deleteUnifiedChatStateFromLocalStorage(w),Hn.deleteUnifiedChatStateFromLocalStorage(y)}logCurrentTimeToLocalStorage(e){const t=this.getCurrentTimeAsString();Hn.saveStateToLocalStorage(e,t)}performCleanUpAsUserEndsTheChat(){const e=this.getInitializedChatTypeFromProfile();this.logCurrentTimeToLocalStorage(L),this.handleZoomUXAEvent(h.END),e===d.DBX_SALES_CHAT||e===d.DBX_CX_CHAT?(this.deleteUnifiedChatCookie(m,G),Hn.deleteUnifiedChatStateFromLocalStorage(v),this.clearChatTimeMetricsFromLocalStorage()):e===d.DOCSEND_CHAT?(this.deleteUnifiedChatCookie(m),Hn.deleteUnifiedChatStateFromLocalStorage(v),setTimeout((()=>{this.detachZoomChatIframe(),window.location.reload()}),1e3)):e===d.DASH_SALES_CHAT?(this.deleteUnifiedChatCookie(I,G),Hn.deleteUnifiedChatStateFromLocalStorage(v)):e===d.HELLOSIGN_CX_CHAT&&(this.deleteUnifiedChatCookie(m),Hn.deleteUnifiedChatStateFromLocalStorage(v))}getCurrentTimeAsString(){const e=undefined;return(new Date).toISOString()}getDocsendUserInfoFromWindow(){var e,t,n;const i=undefined;return{id:null===(e=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===e?void 0:e.id,name:null===(t=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===t?void 0:t.name,email:null===(n=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===n?void 0:n.email}}getDbxUserInfoFromWindow(){var e,t,n;const i=null!==(n=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.dbxUserIdentifiers)&&void 0!==n?n:{};return{id:i.id,name:i.name,email:i.email,plan:i.plan,dashPlan:i.dashPlan,supportTier:i.supportTier,language:i.language,country:i.country,pageLoadTs:i.pageLoadTs,chatHmac:i.chatHmac,sessionId:i.sessionId,hasDashPremiumSupport:i.hasDashPremiumSupport,decagonHmac:i.decagonHmac,decagonHmacExpiresAt:i.decagonHmacExpiresAt}}getCxChatRequestedButtonInfoFromWindow(){const e={dbxCxChatButtonLanguage:"",cxChatButtonLanguage:""},t=window;return t.dbxCxChatButtonLanguage&&t.dbxCxChatButtonLanguage.cxChatButtonLanguage&&(e.dbxCxChatButtonLanguage=t.dbxCxChatButtonLanguage.cxChatButtonLanguage),e}getproductSupportPackageInfoFromWindow(){const e={selectedProductSupportPackage:""},t=window;return t.dbxSelectedProductSupportPackage&&t.dbxSelectedProductSupportPackage.selectedProductSupportPackage&&(e.selectedProductSupportPackage=t.dbxSelectedProductSupportPackage.selectedProductSupportPackage),e}getHellosignUserInfoFromWindow(){var e;const t=null===window||void 0===window?void 0:window.signChatInitData,n=null!==(e=null==t?void 0:t.loadChatbot)&&void 0!==e&&e,i=undefined;return{id:null==t?void 0:t.id,name:null==t?void 0:t.name,email:null==t?void 0:t.email,plan:null==t?void 0:t.plan,supportTier:null==t?void 0:t.supportTier,language:null==t?void 0:t.language,skuId:null==t?void 0:t.skuId,pageLoadTs:null==t?void 0:t.pageLoadTs,chatHmac:null==t?void 0:t.chatHmac,sessionId:null==t?void 0:t.sessionId,loadChatbot:n.toString()}}getDbxUserLoggedInStatus(){var e,t,n;return null!==(n=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.isUserLoggedIn)&&void 0!==n&&n}getDbxUserSalesFeatureVariant(){var e,t,n;return null!==(n=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.salesExperimentVariant)&&void 0!==n?n:"OFF"}sendDocsendCurrentUserInfoToIframeService(){const e=this.getDocsendUserInfoFromWindow(),t={action:Fn.sendDocsendCurrentUserInfo,messageType:ea.REQUEST,dsCurrentUserInfo:JSON.stringify(e),message:ge.SEND_DOCSEND_CURRENT_USER_INFO};this.iframeEmbedder.sendMessage(t)}retrieveIsChattingFromIframe(){const e={action:Fn.RequestToGetIsChattingStatus,messageType:ea.REQUEST,message:ge.REQUEST_IS_CHATTING_MESSAGE};this.iframeEmbedder.sendMessage(e)}sendDropboxCurrentUserInfoToIframeService(){const e=this.getDbxUserInfoFromWindow(),t=this.getDbxUserLoggedInStatus(),n=this.getDbxUserSalesFeatureVariant(),i={action:Fn.sendDropboxCurrentUserInfo,messagetype:ea.REQUEST,dbxCurrentUserInfo:JSON.stringify(e),message:ge.SEND_DROPBOX_CURRENT_USER_INFO,isUserLoggedIn:t,salesExperimentVariant:n};this.iframeEmbedder.sendMessage(i)}sendDropboxCxChatRequestedInfoToIframeService(){const e=this.getCxChatRequestedButtonInfoFromWindow(),t={action:Fn.sendCxChatRequestedLanguageInfo,messagetype:ea.REQUEST,cxUserSelectedLanguage:JSON.stringify(e),message:ge.SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO};this.iframeEmbedder.sendMessage(t)}sendButtonSelectedProductSupportPackageInfoToIframeService(){const e=this.getproductSupportPackageInfoFromWindow(),t={action:Fn.sendUserSelectedProductSupportPackageInfo,messagetype:ea.REQUEST,productSupportPackage:JSON.stringify(e),message:ge.SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO};this.iframeEmbedder.sendMessage(t)}sendBrowserStatusToIframeService(){const e={action:Fn.sendBrowserStatus,message:ge.SEND_BROWSER_STATUS,messageData:this.isIOSSafariOrWebView(),messageType:ea.RESPONSE};this.iframeEmbedder.sendMessage(e)}sendHellosignCurrentUserInfoToIframeService(){const e=this.getHellosignUserInfoFromWindow(),t={action:Fn.sendHellosignCurrentUserInfo,messagetype:ea.REQUEST,hellosignCurrentUserInfo:JSON.stringify(e),message:ge.SEND_HELLOSIGN_CURRENT_USER_INFO};this.iframeEmbedder.sendMessage(t)}setCookieForDBXSalesChat(){null==this.getCookieValue(m)&&(li(d.DBX_SALES_CHAT),this.setUserRequestedChatState(d.DBX_SALES_CHAT),this.logCurrentTimeToLocalStorage(y),this.handleZoomUXAEvent(h.CHATREQUESTED))}validateChatWidgetLoadStatus(e){e.status===na.success?this.handleChatWidgetLoadSuccess(e):e.status===na.failure&&this.handleChatWidgetLoadFailure(e)}handleChatWidgetLoadSuccess(t){oi(`handleChatWidgetLoadSuccess: ${t.status}`),null!==this.initTimeout?(this.validateIOSChatEnvironment(),oi(`handleChatWidgetLoadSuccess: Received WidgetStatusUnderIframe: ${t.chatbotbuttonstate}`),this.computeChatWidgetLoadDuration(),this.handleZoomUXAEvent(h.SUCCESS),this.processChatWidgetState(t)):xn(e.Operational,"handleChatWidgetLoadSuccess: Chat widget inside iframe is not fully ready yet.")}handleChatWidgetLoadFailure(t){this.computeChatWidgetLoadDuration(),this.clearInitializationTimeout(),this.detachZoomChatIframe(),xn(e.Critical,Se.CHAT_WIDGET_NOT_LOADED_MAX_RETRY_REACHED)}computeChatWidgetLoadDuration(){this.chatEndInitTime=performance.now(),oi(`computeChatWidgetLoadDuration: The chat is initialized at : ${this.chatEndInitTime}`),null!==this.chatStartInitTime&&(this.chatElapsedTime=this.chatEndInitTime-this.chatStartInitTime,oi(`computeChatWidgetLoadDuration: Total time taken: ${(this.chatElapsedTime/1e3).toFixed(2)} seconds`))}validateIOSChatEnvironment(){this.isIOSSafariOrWebView()&&this.resetChatSessionForIOS()}processChatWidgetState(e){const t=e.chatbotbuttonstate;oi(`processChatWidgetState: State of the chat widget inside the iframe : ${t}`),t===r.ChatBubble?this.onChatLoadedAsBubble(e):t===r.ChatWindow&&this.onChatLoadedAsWindow(e)}onChatLoadedAsBubble(e){this.clearInitializationTimeout(),this.handleChatBubbleStatus(e)}async onChatLoadedAsWindow(e){this.clearInitializationTimeout();const{currentInitChat:t,unifiedChatCookieStatus:n}=this.getUnifiedChatCookieStatus()||{};if(this.shouldHandleChatWindowForSalesChat(t,n)){oi("onChatLoadedAsWindow: Handling chat window process for DBX_SALES_CHAT with no unified chat cookie exists");const t=Hn.getStateFromLocalStorage(v);if(!t)return;const{reload:n,currentCompanyState:i}=t;await this.processZoomChatReload(n,i,e)}else e.action=Pn.expandButtonClicked,this.handleChatWidgetInteraction(e)}shouldHandleChatWindowForSalesChat(e,t){return e===d.DBX_SALES_CHAT&&!t}async processZoomChatReload(t,n,i){oi(`processZoomChatReload: Retrieved reload flag: ${t}, user switch account status: ${n}`);const a=undefined;if(await this.shouldReloadAndHandleAccountSwitch(t,n)){oi("processZoomChatReload: Starting reload process.");const t=undefined;await this.startZoomChatIframeReloadProcess()?oi("processZoomChatReload: Zoom chat reload process completed successfully."):xn(e.Critical,"processZoomChatReload: Zoom chat reload process failed.")}else oi("processZoomChatReload: Reload flag is false. Executing do not reload function."),i.action=Pn.expandButtonClicked,this.handleChatWidgetInteraction(i),this.proceedToLoadChatAsProActive(d.DBX_SALES_CHAT,i)}getUnifiedChatCookieStatus(){const e=this.getInitializedChatTypeFromProfile();let t;return t=V.has(e)?this.isUnifiedChatCookieExists(m):e===d.DASH_SALES_CHAT&&this.isUnifiedChatCookieExists(I),{currentInitChat:e,unifiedChatCookieStatus:t}}handleChatBubbleStatus(e){const t=this.getUnifiedChatCookieStatus(),{unifiedChatCookieStatus:n,currentInitChat:i}=t;oi(`handleChatBubbleStatus: Chat cookie status: ${n}, Current chat type: ${i}`),this.setupBaseChatHandler(i,e,n)}setupBaseChatHandler(e,t,n){var i;const a=null===(i=this.args.chatInitProfile)||void 0===i?void 0:i.trustedHost;oi(`setupBaseChatHandler: Current chat type: ${e}, Trusted host: ${a}, Unified chat cookie status: ${n}`),e===d.DOCSEND_CHAT&&a===l.DOCSEND_HOST?this.handleFirstTimeDoSendChat(t):e===d.DASH_SALES_CHAT&&a===l.DASH_DBX_HOST?this.handleFirstTimeDashChat(e,t):(e!==d.DBX_SALES_CHAT||a!==l.WWW_DBX_HOST||n)&&(e!==d.DBX_SALES_CHAT||a!==l.SIGN_CENTER_HOST||n)?e===d.DBX_CX_CHAT&&a===l.WWW_DBX_HOST?this.handleDbxCXChatFlow(e,t):e===d.HELLOSIGN_CX_CHAT&&a===l.HELLOSIGN_HOST?this.handleHelloSignCXFlow(e,t):a!==l.HELP_CENTER_HOST&&a!==l.EXPERIENCE_HOST&&a!==l.SIGN_CENTER_HOST||e!==d.DBX_SALES_CHAT||!n||this.handleWhenChatWidgetIsInBubbleAndVisibleState(this.iframeEmbedder.iframe):this.handleFirstTimeSalesChatWhenBubble(e,t)}handleDbxCXChatFlow(t,n){var i,a,o;const r=null===(i=this.args.chatInitProfile)||void 0===i?void 0:i.identifiedHref,s=null===(o=null===(a=this.args.chatSpecificConfigs)||void 0===a?void 0:a.dbxChatConfigs)||void 0===o?void 0:o.discoverabilityEntryPagesConfig;if(!r)return;const l=_i(r);this.isPathInHelpEntryPages(l)?this.handleFirstTimeChatLoadOnGetHelpPage(t,n):s&&this.shouldHandleDiscoverabilityPageChat(l,s)?this.handleFirstTimeChatLoadOnDiscoverabilityPage(t,n):(null==s?void 0:s.isEnabled)||xn(e.Operational,`Chat visibility on discovery pages is disabled. Current path: ${l}`)}isPathInHelpEntryPages(e){return Q.includes(e)}shouldHandleDiscoverabilityPageChat(e,t){var n,i;return t.isEnabled&&null!==(i=null===(n=t.discoverabilityEntryPages)||void 0===n?void 0:n.includes(e))&&void 0!==i&&i}handleFirstTimeDoSendChat(e){this.handleChatWidgetInteraction(e)}handleFirstTimeDashChat(e,t){this.proceedToLoadChatAsProActive(e,t)}async handleFirstTimeSalesChatWhenBubble(e,t){var n;const i=undefined;if((null===(n=this.args.chatInitProfile)||void 0===n?void 0:n.trustedHost)===l.WWW_DBX_HOST){const e=undefined;if(!this.canInitiateSalesChatForUser())return void this.handleLoggingForSalesChatDisallowedCountry()}const a=Hn.getStateFromLocalStorage(v),o=Hn.getStateFromLocalStorage(H),r=undefined;if(this.getUnifiedChatCookieStatus().unifiedChatCookieStatus)return void oi("handleFirstTimeSalesChatWhenBubble: Unified chat Cookie found.");if(!a)return void oi("handleFirstTimeSalesChatWhenBubble: No current state found in localStorage.");o&&(oi("handleFirstTimeSalesChatWhenBubble: dbx_unified_chat_session_logout found in localStorage."),oi("handleFirstTimeSalesChatWhenBubble: Starting reload process."),this.removeChatSessionLogoutFlag(),await this.startZoomChatIframeReloadProcess());const{reload:s,currentCompanyState:d}=a;oi(`handleFirstTimeSalesChatWhenBubble: Retrieved reload flag: ${s}, user switch account status: ${d}`);const c=undefined;await this.shouldReloadAndHandleAccountSwitch(s,d)?(oi("handleFirstTimeSalesChatWhenBubble: Starting reload process."),await this.startZoomChatIframeReloadProcess()):(oi("handleFirstTimeSalesChatWhenBubble: No reload needed, proceeding with current chat."),this.skipZoomChatReload(e,t))}async shouldReloadAndHandleAccountSwitch(e,t){oi("Checking if reload or account switch is needed.");const n=e||t===s.UserSwtichCompany;return n?(oi("Reload is required."),t===s.UserSwtichCompany&&(oi("Detected account switch. Performing custom actions."),Hn.deleteUnifiedChatStateFromLocalStorage(v))):oi("No reload or account switch needed."),n}handleFirstTimeChatLoadOnGetHelpPage(e,t){oi(`handleFirstTimeChatLoadOnGetHelpPage: First-time Initialization Detected: ${e}`),this.proceedToLoadChatAsReactive(d.DBX_CX_CHAT,t)}handleHelloSignCXFlow(e,t){oi(`handleHelloSignCXFlow: First-time Initialization Detected: ${e}, Chat is in hidden state`),"true"===this.getHellosignUserInfoFromWindow().loadChatbot?this.proceedToLoadChatAsProActive(d.HELLOSIGN_CX_CHAT,t):this.proceedToLoadChatAsReactive(d.HELLOSIGN_CX_CHAT,t)}handleDbxReactiveChatRequestHandler(e,t){this.handleChatWidgetInteraction(t),e===d.DBX_CX_CHAT||e===d.HELLOSIGN_CX_CHAT?this.initiateChatWindowOnRequested(v,e):e===d.DBX_SALES_CHAT&&this.initiateChatWindowOnRequested(U,e)}initiateChatWindowOnRequested(e,t){const n=Hn.getStateFromLocalStorage(e);t!==d.DBX_CX_CHAT&&t!==d.HELLOSIGN_CX_CHAT||!0!==(null==n?void 0:n.reload)?t===d.DBX_SALES_CHAT&&!0===n&&(this.updateStateToChatWindowRequested(t),this.removeChatRequestedFlagOnCheckoutPage()):(this.updateStateToChatWindowRequested(t),delete n.reload)}updateStateToChatWindowRequested(e){li(e),this.updateChatInteractionType(u.REACTIVE_CHAT),ki(),Hn.saveStateToLocalStorage(v,Bo),this.setUnifiedChatIframeToVisible(this.iframeEmbedder.iframe)}handleDbxSalesCheckoutPageReactiveChat(e,t){this.handleDbxReactiveChatRequestHandler(e,t)}proceedToLoadChatAsReactive(e,t){this.handleDbxReactiveChatRequestHandler(e,t)}handleFirstTimeChatLoadOnDiscoverabilityPage(e,t){oi(`handleFirstTimeChatLoadOnDiscoverabilityPage: First-time Initialization Detected: ${e} on portkey-unifiedchat-discoverability pages`),this.proceedToLoadChatAsProActive(e,t)}setIframePropertiesToMinimizeState(){this.applyMinimizedIframeStyle()}updateIframeSizeForProactiveButtonAppear(){this.applyProActiveButtonExpandedIframeStyle()}updateIframeSizeForProactiveButtonClick(){this.applyMinimizedIframeStyle()}applyMinimizedIframeStyle(){const e=this.iframeEmbedder.iframe.style;e.width="100px",e.height="100px",e.right="20px",e.bottom="26px"}applyProActiveButtonExpandedIframeStyle(){const e=this.iframeEmbedder.iframe.style;e.width="350px",e.height="210px",e.right="20px",e.bottom="26px"}setIframePropertiesToMaximizeState(){const e=this.iframeEmbedder.iframe.style;this.getIsMobileOrTablet()?(e.width="100%",e.height="100%",e.bottom="0",e.right="0"):(e.width="450px",e.height="650px",e.right="20px",e.bottom="26px",e.maxWidth="100%",e.maxHeight="100%")}handleChatWidgetInteraction(e){const t=undefined;switch(e.action){case Pn.expandButtonClicked:this.handleExpandButtonClicked(e);break;case Pn.minimizeButtonClicked:this.handleMinimizeButtonClicked(e);break;case Pn.proactiveEndChatButtonClicked:this.handleProactiveEndChatButtonClicked(e);break;case Pn.proactiveEndChatButtonAppeared:this.handleProactiveEndChatButtonAppeared(e)}}handleExpandButtonClicked(e){this.setChatWidgetWindowState(),this.setIframePropertiesToMaximizeState(),this.args.chatInitProfile&&(this.args.chatInitProfile.engagementId=e.engagementId),this.handleZoomUXAEvent(h.EXPAND)}handleMinimizeButtonClicked(e){this.setChatWidgetBubbleState(),this.setIframePropertiesToMinimizeState(),this.args.chatInitProfile&&(this.args.chatInitProfile.engagementId=e.engagementId),this.handleZoomUXAEvent(h.MINIMIZE)}handleProactiveEndChatButtonClicked(e){this.setChatWidgetBubbleState(),this.updateIframeSizeForProactiveButtonClick(),this.args.chatInitProfile&&(this.args.chatInitProfile.engagementId=e.engagementId),this.handleZoomUXAEvent(h.MINIMIZE)}handleProactiveEndChatButtonAppeared(e){this.setChatWidgetBubbleState(),this.updateIframeSizeForProactiveButtonAppear(),this.args.chatInitProfile&&(this.args.chatInitProfile.engagementId=e.engagementId),this.handleZoomUXAEvent(h.MINIMIZE)}calculateIframeContainerHeight(){var e;const t=document.querySelector(b),n=null===(e=null==t?void 0:t.getBoundingClientRect())||void 0===e?void 0:e.height;return String(n&&n>0?n:48)}createDivContainerForIframe(){const e=undefined;return Object.assign(document.createElement("div"),{className:b})}createIframeForZoomChat(){const e=this.iframeEmbedder.iframe,t=this.calculateIframeContainerHeight();e.setAttribute("id",D),e.setAttribute("height",t),e.setAttribute("sandbox","allow-scripts allow-same-origin allow-downloads allow-popups allow-forms"),e.style.position="fixed",e.style.zIndex="9999",e.style.overflow="scroll",e.style.backgroundColor="transparent";const n=this.getUnifiedChatCookieStatus();return n.unifiedChatCookieStatus?(oi(`createIframeForZoomChat: Chat Type :: ${n.currentInitChat}, Cookie ${n.unifiedChatCookieStatus} exists, proceeding with handleCookieOnChatWidgetInit`),this.handleCookieOnChatWidgetInit(e)):(oi(`createIframeForZoomChat: Chat Type :: ${n.currentInitChat}, Cookie ${n.unifiedChatCookieStatus} not exists, proceeding with handleNoCookieOnChatWidgetInit`),this.handleNoCookieOnChatWidgetInit(e)),e}attachZoomChatIframe(){var e,t;try{oi(" attachZoomChatIframe: [STARTED]");const n=b,i=document.querySelector(n),a=null!==(e=null==i?void 0:i.parentNode)&&void 0!==e?e:document.body,o=this.createDivContainerForIframe(),r=this.createIframeForZoomChat(),s=new Promise(((e,t)=>{r.addEventListener("load",(()=>{e(r)})),r.addEventListener("error",(e=>{t(new Error("Error while attaching Zoom chat iframe to parent window"))}))}));return i&&a.removeChild(i),o.appendChild(r),a.insertBefore(o,null!==(t=null==i?void 0:i.nextSibling)&&void 0!==t?t:a.firstChild),o.style.visibility="",oi(" attachZoomChatIframe: [COMPLETED]"),s}catch(e){return e instanceof Error?Promise.reject(new Error(e.message)):Promise.reject(new Error("An unknown error occurred while attaching Zoom chat iframe to parent window."))}}detachZoomChatIframe(){this.el&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.el=null,this.setIframeReadyStatus(!1))}setIframeReadyStatus(e){this.isChatIframeReady=e}getIframeReadyStatus(){return this.isChatIframeReady}prepareZoomChatCredentialsMsg(){const e=undefined;return{creds:{chatapikey:this.args.chatApiKey,chaturi:this.args.chatUri,chatdataenv:this.args.chatDataEnv},action:Fn.sendZoomChatCredentials,messageType:ea.RESPONSE,message:ge.SEND_ZOOM_CHAT_CREDENTIALS}}executeAttachZoomChatScriptTagToIframe(){if(this.iframeEmbedder.iframe)if(this.iframeEmbedder.iframe.contentWindow)try{const e=this.prepareZoomChatCredentialsMsg();this.iframeEmbedder.sendMessage(e)}catch(e){this.handleIframeExecutionError(e)}else this.handleIframeContentWindowError();else this.handleIframeNotFoundError()}async initChatClient(){try{if(oi("initChatClient: zoom_chat_client module Initialization : [STARTED]"),this.handleZoomUXAEvent(h.INITIALIZED),this.setupInitializationTimeout(),this.getIframeReadyStatus()||this.el)return;this.attachMessageListener(),this.el=await this.attachZoomChatIframe()}catch(e){oi("initChatClient: zoom_chat_client module Initialization : [FAILED]"),this.handleIframeInitializationError(e)}}canInitiateSalesChatForUser(){var e,t;const n=((null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.countryCode)||"UnIdentified_Country").toUpperCase();return!he.includes(n)}handleLoggingForSalesChatDisallowedCountry(){var t,n;const i=undefined,a=`Sales Chat Initialization skipped for the country - ${(null===(n=null===(t=this.args.chatSpecificConfigs)||void 0===t?void 0:t.dbxChatConfigs)||void 0===n?void 0:n.countryCode)||"UnIdentified_Country"}`;xn(e.Operational,a),this.handleZoomUXAEvent(h.SALESCHAT_DISALLOWED_COUNTRY)}handleInitiatedChatFromTransfer(){oi("handleInitiatedChatFromTransfer: Handling chat initiated from transfer");const e=this.getInitializedChatTypeFromProfile();li(e),this.setUserRequestedChatState(e),this.updateChatInteractionType(u.REACTIVE_CHAT),this.handleZoomUXAEvent(h.CHATREQUESTED),this.setUnifiedChatIframeToVisible(this.iframeEmbedder.iframe),this.setIframePropertiesToMaximizeState(),this.setChatWidgetWindowState(),this.setIframeVisibilityState(),this.saveUnifiedChatState(Bo),this.handleZoomChatInitialDisplay(),oi(`handleInitiatedChatFromTransfer: Completed handling transfer for chat type: ${e}`)}}function Er(e){oi("initializeZoomChatClient: Chat configuration was successful. Proceeding with ZOOM_CHAT_CLIENT initialization.");const t=Cr.getInstance(e);Cr.setChatUri(e.chatUri),Cr.setChatApiKey(e.chatApiKey),Cr.setChatApiKey(e.chatDataEnv),t.initChatClient().then(Ai)}function gr(e){Cr.getInstance(e),Cr.setChatUri(e.chatUri),Cr.setChatApiKey(e.chatApiKey),Cr.setChatApiKey(e.chatDataEnv)}function Sr(e,t,n){oi(`handleDocsendChat: Before : ${JSON.stringify(n)}`);const i={identifiedChat:d.DOCSEND_CHAT,chatInteractionType:u.REACTIVE_CHAT,trustedHost:l.DOCSEND_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{docsendEntitlements:n.chatSupportedEntitlements.docsendEntitlements}};return n.chatInitProfile=i,oi(`handleDocsendChat: After : ${JSON.stringify(n)}`),n}function Tr(e){const t=window.location.href,n=undefined,i=undefined;Er(Sr(t,Ti(t),e))}function _r(e){const t=undefined;return e===TrustedHosts.DOCSEND_HOST}function mr(e,t,n){const i={identifiedChat:d.DASH_SALES_CHAT,chatInteractionType:u.PROACTIVE_CHAT,trustedHost:l.DASH_DBX_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{dashDbxEntitlements:n.chatSupportedEntitlements.dashDbxEntitlements},identifiedChatStartUpTime:0};return n.chatInitProfile=i,n}function Ir(e,t){const n=window.location.href,i=undefined,a=mr(n,Ti(n),e);t.isChatEnabledForSubdomains?Er(a):ei(t.isChatEnabledForSubdomains)}function pr(e,t,n){const i={identifiedChat:d.HELLOSIGN_CX_CHAT,chatInteractionType:u.REACTIVE_CHAT,trustedHost:l.HELLOSIGN_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{hellosignEntitlements:n.chatSupportedEntitlements.hellosignEntitlements}};return n.chatInitProfile=i,n}function Nr(e){const t=window.location.href,n=undefined,i=undefined;Er(pr(t,Ti(t),e))}function Or(e){var t;const n=e.chatConfig;if(n){const e=null===(t=n.chatInitProfile)||void 0===t?void 0:t.identifiedChat;if(e===d.DBX_CX_CHAT){if(br(n))return;Dr(n)}else e===d.DBX_SALES_CHAT&&Rr(n)}}function Ar(e){var t,n,i,a;const o=null===(n=null===(t=e.chatSpecificConfigs)||void 0===t?void 0:t.dbxChatConfigs)||void 0===n?void 0:n.disableEntryPageForMobileConfig;if(oi(`shouldDisableChatOnMobile: disableEntryPageForMobileConfig isEnabled :: ${null==o?void 0:o.isEnabled}`),!(null==o?void 0:o.isEnabled))return!1;const r=null!==(a=null===(i=e.chatInitProfile)||void 0===i?void 0:i.identifiedHref)&&void 0!==a?a:"",s=_i(r),l=undefined,d=Ii(mi(r)),c=Vi(),u=undefined,h=(Array.isArray(o.entryPages)?o.entryPages:[]).some((e=>s.startsWith(e)));return oi(`shouldDisableChatOnMobile: currentPath = ${s}`),oi(`shouldDisableChatOnMobile: isOnEntryPage = ${h}`),oi(`shouldDisableChatOnMobile: isMobile = ${c}`),oi(`shouldDisableChatOnMobile: upgradeTriggerPresent = ${d}`),h&&c&&d}function Dr(e){Er(e)}function br(e){var t;const{chatSpecificConfigs:n,chatInitProfile:i}=e,a=null==i?void 0:i.trustedHost,o=null===(t=null==n?void 0:n.dbxChatConfigs)||void 0===t?void 0:t.dbxUserIdentifiers,r=undefined;if(!o)switch(a){case l.WWW_DBX_HOST:return Yn(),!0;case l.SIGN_CENTER_HOST:case l.HELP_CENTER_HOST:return Qn(),!1}return"basic"===(null==o?void 0:o.plan)&&(qn(o.plan),!0)}function Rr(e){var t;const n=null===(t=e.chatInitProfile)||void 0===t?void 0:t.trustedHost;if(n===l.WWW_DBX_HOST||n===l.SIGN_CENTER_HOST){if(n===l.WWW_DBX_HOST&&Ar(e))return void jn();vr(n,e)?(oi("handleSalesChatInitialization: Using new zoom chat cookie consent implementation"),yr(e)):(oi("handleSalesChatInitialization: Using old zoom chat cookie consent implementation"),Hr(e))}else if(n===l.HELP_CENTER_HOST||n===l.EXPERIENCE_HOST){const t=undefined;dr(m)&&(oi("UNIFIED CHAT COOKIE EXISTS/COOKIE CONSENT ALREADY GRANTED FOR SALES CHAT, PROCEEDING WITH INIT OF ZOOM_CHAT_CLIENT"),Er(e))}}function vr(e,t){var n,i,a,o,r,s;return e===l.WWW_DBX_HOST?null!==(a=null===(i=null===(n=null==t?void 0:t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.isCookieValidationFixEnabled)&&void 0!==a&&a:e===l.SIGN_CENTER_HOST&&(null!==(s=null===(r=null===(o=null==t?void 0:t.chatSpecificConfigs)||void 0===o?void 0:o.dbxSignChatConfigs)||void 0===r?void 0:r.isCookieValidationFixEnabled)&&void 0!==s&&s)}function yr(e){const t=dr(m),n=cr(N),i=ur(O);if(oi(`evaluateChatInitialization: isSecureConsentCookieExists=${i}, unifiedChatCookieExists=${t}, snapEngageCookieExists=${n}`),!i)return void wr(t,n,e,!1);const a=hr(O,A);oi(`evaluateChatInitialization: consentCategoryCookieKeyExists=${a}`),wr(t,n,e,a)}function wr(e,t,n,i){if(e||!t){if(e&&!t)return oi("processChatInitialization: UNIFIED CHAT COOKIE EXISTS. Proceeding with ZOOM_CHAT_CLIENT initialization."),void Er(n);if(!i)return oi("processChatInitialization: Waiting for user consent signal before initializing ZOOM_CHAT_CLIENT."),void gr(n);oi(`processChatInitialization: consentCategoryCookieKeyExists=${i}, unifiedChatCookieExists=${e}, snapEngageCookieExists=${t}. [Default+Manual] Proceeding to allow DBX_SALES_CHAT to load. Ignoring further signals and de-registering the callback after triggering the re-consent callback.`),gr(n),Xi()}else oi("processChatInitialization: Skipping ZOOM_CHAT_CLIENT initialization since the user has already initialized SNAPENGAGE chat.")}function Lr(t,n,i){var a,o,r;if((null===(a=null==n?void 0:n.error)||void 0===a?void 0:a.type)!==e.Critical){if(!(null==n?void 0:n.error)&&n.chatConfig){if(null!==(o=(r=n.chatConfig).chatSpecificConfigs)&&void 0!==o||(r.chatSpecificConfigs={}),t===l.HELP_CENTER_HOST)n.chatConfig.chatSpecificConfigs.dbxHelpChatConfigs=i;else{if(t!==l.EXPERIENCE_HOST)return;n.chatConfig.chatSpecificConfigs.dbxExperienceChatConfigs=i}Or(n)}}else Jn()}function Hr(e){const t=dr(m),n=cr(N);oi(`handleSalesChatInitialization : is unifiedChatCookieExists : ${JSON.stringify(t)}`),oi(`handleSalesChatInitialization : is snapEngageCookieExists : ${JSON.stringify(n)}`),t&&!n?(oi("handleSalesChatInitialization: UNIFIED CHAT COOKIE EXISTS/COOKIE CONSENT ALREADY GRANTED FOR SALES CHAT, PROCEEDING WITH INIT OF ZOOM_CHAT_CLIENT"),Er(e)):!t&&n?oi("handleSalesChatInitialization: Skipping ZOOM_CHAT_CLIENT initialization since the user has already initialized SNAPENGAGE chat."):(oi("handleSalesChatInitialization: UNIFIED CHAT COOKIE NOT_EXISTS FOR SALES CHAT, REGISTERED THE CALLBACK, WAITING FOR COOKIE_CONSENT SIGNAL"),gr(e))}function Ur(e,t){var n,i,a;const o=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,r=undefined;return null!==(a=(null!=o?o:K)[e])&&void 0!==a?a:0}function Pr(e,t){var n,i,a;const o=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,r=undefined;return null!==(a=(null!=o?o:j)[e])&&void 0!==a?a:0}function Fr(e){return e.startsWith("/get_help")&&e.endsWith("/contact-us")?Y["/get_help/*/contact-us"]:Y[e]||0}function kr(e){var t,n,i,a;const o=null===(n=null===(t=e.chatSpecificConfigs)||void 0===t?void 0:t.dbxChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,r=null===(a=null===(i=e.chatSpecificConfigs)||void 0===i?void 0:i.dbxSignChatConfigs)||void 0===a?void 0:a.salesEntryPagesConfig,s=null!=o?o:K,d=null!=r?r:j;return{[l.WWW_DBX_HOST]:Object.keys(s),[l.SIGN_CENTER_HOST]:Object.keys(d)}}function Br(){return{[l.WWW_DBX_HOST]:Object.keys(Y)}}function Mr(e,t){if(!e||!Array.isArray(t)||0===t.length)return{status:!1,key:null};const n=_i(e);if(!n)return{status:!1,key:null};for(const{name:e,entriesMap:i}of t)if(i&&"object"==typeof i){for(const e in i)if(n===e||n.startsWith(`${e}/`))return{status:!0,key:e,value:i[e]}}else oi(`findValueInMaps: Skipping invalid map "${e}".`);return{status:!1,key:null}}function Wr(e,t){var n,i,a,o;const r=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,s=null===(o=null===(a=t.chatSpecificConfigs)||void 0===a?void 0:a.dbxChatConfigs)||void 0===o?void 0:o.proActiveMessagingConfig;(null==s?void 0:s.isEnabled)&&Array.isArray(s.proActiveMessagingPages)&&r&&s.proActiveMessagingPages.forEach((e=>{r[e]=0}));const l=undefined,d=e in(null!=r?r:K);return oi(`isDbxSalesEntryPage: Checking for '${e}' - Exists: ${d}`),d}function xr(e,t){var n,i,a,o;if(e.startsWith("/get_help")&&e.endsWith("/contact-us"))return oi(`isDbxCXEntryPage: Checking for '${e}' - Exists: true`),!0;const r=undefined;return null!==(o=null===(a=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.discoverabilityEntryPagesConfig)||void 0===a?void 0:a.isEnabled)&&void 0!==o&&o?(oi(`isDbxCXEntryPage: Checking for '${e}' - Exists: true`),!0):Y.hasOwnProperty(e)}function Xr(e,t){var n,i;const a=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxSignChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,o=undefined,r=e in(null!=a?a:j);return oi(`isSignEntryPage: Checking for '${e}' - Exists: ${r}`),r}function Gr(e,t,n){try{const[i,a]=$r(e,t,n);return{isValid:i,entryPath:a}}catch(e){return xn(ye.type,ye.message,e),{isValid:!1,entryPath:null}}}function Zr(e,t,n){const i=undefined,a=undefined;return Gr(e,t,kr(n))}function zr(e,t){const n=undefined;return Gr(e,t,Br())}function $r(e,t,n){let i=null;try{if(i=_i(t),!i)throw new Error(`Invalid path extracted from URL: ${t}`);const a=n[e]||[];0===a.length&&oi(`isCurrentPathSupported: No supported pages found for host: ${e}`);const o=undefined;return[a.some((e=>i&&(i===e||i.startsWith(`${e}/`)))),i]}catch(e){return xn(we.type,we.message,e),[!1,i]}}function Vr(e,t){var n,i,a,o,r,s,l,d;const c=null===(i=null===(n=t.chatSpecificConfigs)||void 0===n?void 0:n.dbxChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,u=null===(o=null===(a=t.chatSpecificConfigs)||void 0===a?void 0:a.dbxChatConfigs)||void 0===o?void 0:o.proActiveMessagingConfig;(null==u?void 0:u.isEnabled)&&Array.isArray(u.proActiveMessagingPages)&&c&&u.proActiveMessagingPages.forEach((e=>{c[e]=0}));const h=null===(s=null===(r=t.chatSpecificConfigs)||void 0===r?void 0:r.dbxSignChatConfigs)||void 0===s?void 0:s.salesEntryPagesConfig,f=null!=c?c:K,C=null!=h?h:j,E=null===(d=null===(l=t.chatSpecificConfigs)||void 0===l?void 0:l.dbxChatConfigs)||void 0===d?void 0:d.discoverabilityEntryPagesConfig;(null==E?void 0:E.isEnabled)&&Array.isArray(E.discoverabilityEntryPages)&&E.discoverabilityEntryPages.forEach((e=>{Y[e]=0}));const g=undefined;return Mr(e,[{name:"DBX_SALES_ENTRIES",entriesMap:f},{name:"SIGN_SALES_ENTRIES",entriesMap:C},{name:"DBX_CX_ENTRIES",entriesMap:Y}])}function Kr(e){const t=undefined;return Mr(e,[{name:"SIGN_SALES_ENTRIES",entriesMap:j}])}function Jr(e,t,n,i,a){return fs(e,t,n,i,a)}function qr(e,t,n,i,a){return fs(e,t,n,i,a)}function jr(e,t,n,i,a,o){const r=si(t);return r===F?ns(e,d.DBX_SALES_CHAT,n,i,a,o):r===B?ns(e,d.DBX_CX_CHAT,n,i,a,o):r!==B&&r!==F?{error:Oe}:{error:Ae}}function Yr(e,t,n,i,a){const o=Vr(t,i);if(o.status){const r=o.key;if(r){if(Wr(r,i)){if(r===J){const e=undefined;if(!Gi())return Vn(),{error:Ne}}return ns(e,d.DBX_SALES_CHAT,t,n,i,a)}return xr(r,i)?ns(e,d.DBX_CX_CHAT,t,n,i,a):(Zn(r),{error:_e})}return Gn(t),{error:Ie}}return $n(t),{error:pe}}function Qr(e,t,n,i,a){if(!fr())return Xn(a),{error:be};switch(a){case l.HELP_CENTER_HOST:const o=undefined;return qr(e,a,n,t,i)||{error:pe};case l.EXPERIENCE_HOST:const r=undefined;return Jr(e,a,n,t,i)||{error:pe};default:return{error:pe}}}function es(e,t,n){const i=window.location.href,a=Ti(i),o=dr(m);if(oi(`handleChatForDropboxSubdomain: Handling chat setup configurations for: '${t}'.`),vi(o,e,t),o){const e=hi();if(!e)return Xn(t),{error:Oe};const o=ui(e);return o!==d.UNSUPPORTED_CHAT?(oi(`handleChatForDropboxSubdomain: Proceeding to prepare chat configurations for ${o}.`),localStorage.setItem(v,JSON.stringify(Bo)),Qr(o,i,a,n,t)):(Kn(t),{error:De})}return Xn(t),{error:be}}function ts(t,n,i,a,o,r){switch(r){case l.WWW_DBX_HOST:return is(t,n,i,a,o,r);case l.SIGN_CENTER_HOST:return as(t,n,i,a,o,r);default:return{error:{type:e.Critical,message:`No handler for domain ${r}`}}}}function ns(e,t,n,i,a,o){const r=undefined;return ts(e,t,n,i,a,o)}function is(e,t,n,i,a,o){return t===d.DBX_SALES_CHAT?rs(e,o,n,i,t,a):t===d.DBX_CX_CHAT?ss(e,o,n,i,t,a):{error:De}}function as(e,t,n,i,a,o){const r=si(m);return e?r===F?ds(t,n,i,a,o,0):r===B?cs(t,n,i,a,o,0):{error:Ae}:{error:be}}function os(e,t,n,i,a,o,r,s,l,d){const c=r(t,a);return d(m)?l(e,o,i,n,a):s(e,o,i,n,a,c)}function rs(e,t,n,i,a,o){if(e&&t===l.WWW_DBX_HOST&&si(m)===F)return Es(a,t,i,n,o,0);{const e=Zr(t,n,o);return null===e.entryPath?(ni(l.WWW_DBX_HOST,n),{error:me}):e.isValid?os(a,e.entryPath,n,i,o,t,Ur,Cs,fs,dr):{error:me}}}function ss(e,t,n,i,a,o){if(e&&t===l.WWW_DBX_HOST&&si(m)===B)return Es(a,t,i,n,o,0);{const e=zr(t,n);return null===e.entryPath?(ni(l.WWW_DBX_HOST,n),{error:me}):e.isValid?os(a,e.entryPath,n,i,o,t,Fr,Cs,fs,dr):{error:me}}}function ls(e,t,n,i){if(Mi())return zn(),{error:Pe};const a=Kr(e);if(a.status){const o=a.key;if(o){if(Xr(o,n)){const a=undefined,o=Pr(_i(e),n);return ds(d.DBX_SALES_CHAT,e,t,n,i,o)}return Zn(o),{error:_e}}return Gn(e),{error:Ie}}return $n(e),{error:pe}}function ds(e,t,n,i,a,o){return Cs(e,a,n,t,i,o)}function cs(e,t,n,i,a,o){return Cs(e,a,n,t,i,o)}function us(e,t,n,i,a,o,r){return{identifiedChat:e,chatInteractionType:t,trustedHost:n,identifiedHost:i,identifiedHref:a,supportedEntitlements:o,identifiedChatStartUpTime:r}}function hs(t,n,i,a,o,r){const s=Di(n);if(s===c.UNSUPPORTED_ENTITLEMENTS)return xn(Ue.type,Ue.message,void 0),{error:Ue};let d;try{d=bi(s,o)}catch(t){return xn(e.Critical,Re.message,t),{error:Re}}return s!==c.HELP_CENTER_ENTITLEMENTS&&s!==c.EXPERIENCE_ENTITLEMENTS||(r=0),n===l.WWW_DBX_HOST?us(t,u.PROACTIVE_CHAT,l.WWW_DBX_HOST,i,a,d,r):n===l.HELP_CENTER_HOST||n===l.EXPERIENCE_HOST?us(t,u.PROACTIVE_CHAT,n,i,a,d,r):n===l.SIGN_CENTER_HOST?us(t,u.PROACTIVE_CHAT,l.SIGN_CENTER_HOST,i,a,d,r):{error:ve}}function fs(e,t,n,i,a){return Cs(e,t,n,i,a,0)}function Cs(e,t,n,i,a,o){const r=hs(e,t,n,i,a.chatSupportedEntitlements,o);return"error"in r?{error:r.error}:(a.chatInitProfile=r,{chatConfig:a})}function Es(t,n,i,a,o,r){return 0===r?Cs(t,n,i,a,o,r):{error:{type:e.Operational,message:`Proactive chat timer is not 0. Timer value: ${r}.`}}}function gs(e,t,n){const i=undefined;Lr(e,Ss(m,e,t),n)}function Ss(e,t,n){return es(e,t,n)}function Ts(e,t,n){const i=undefined;Lr(e,_s(m,e,t),n)}function _s(e,t,n){return es(e,t,n)}function ms(t,n,i){var a;n.chatSpecificConfigs||(n.chatSpecificConfigs={}),n.chatSpecificConfigs.dbxSignChatConfigs||(n.chatSpecificConfigs.dbxSignChatConfigs={...i});const o=Is(m,t,n);(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.type)!==e.Critical?(null==o?void 0:o.error)||Or(o):Jn()}function Is(e,t,n){const i=yi(),a=Ti(i),o=dr(m);return o?(Hn.saveStateToLocalStorage(v,Bo),jr(o,e,i,a,n,t)):ls(i,a,n,t)}function ps(t,n,i){var a;n.chatSpecificConfigs||(n.chatSpecificConfigs={}),n.chatSpecificConfigs.dbxChatConfigs||(n.chatSpecificConfigs.dbxChatConfigs={...i});const o=Ns(m,t,n);(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.type)!==e.Critical?(null==o?void 0:o.error)||Or(o):Jn()}function Ns(e,t,n){const i=yi(),a=Ti(i),o=dr(m);return o?jr(o,e,i,a,n,t):Yr(o,i,a,n,t)}function Os(){const e=undefined,t=undefined,n=undefined,i=undefined,a=undefined,o=undefined,r=undefined,s=undefined,l=undefined,d=undefined,c=undefined,u=undefined,h=undefined;return{iframeSrc:window.dbxPithosConfig.zoom_chat_manager_init_data.iframeSrc,iframeOrigin:window.dbxPithosConfig.zoom_chat_manager_init_data.iframeOrigin,chatUri:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiProtocol+"://"+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiSubdomain+"."+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiDomain+"."+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiTopleveldomain+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiPathname+"/"+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiExtJsFileName,chatApiKey:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiApiKey,chatDataEnv:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiDataEnv,chatSupportedEntitlements:window.dbxPithosConfig.zoom_chat_manager_init_data.chatSupportedEntitlements}}function As(){var e,t,n,i,a,o,r,s,l,d;const c=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxChatConfigs;return{discoverabilityEntryPagesConfig:null!==(n=null==c?void 0:c.discoverabilityEntryPagesConfig)&&void 0!==n?n:null,salesEntryPagesConfig:null!==(i=null==c?void 0:c.salesEntryPagesConfig)&&void 0!==i?i:null,disableEntryPageForMobileConfig:null!==(a=null==c?void 0:c.disableEntryPageForMobileConfig)&&void 0!==a?a:null,dbxUserIdentifiers:null!==(o=null==c?void 0:c.dbxUserIdentifiers)&&void 0!==o?o:null,isUserLoggedIn:null!==(r=null==c?void 0:c.isUserLoggedIn)&&void 0!==r&&r,salesExperimentVariant:null!==(s=null==c?void 0:c.salesExperimentVariant)&&void 0!==s?s:"",isCookieValidationFixEnabled:null!==(l=null==c?void 0:c.isCookieValidationFixEnabled)&&void 0!==l&&l,proActiveMessagingConfig:null!==(d=null==c?void 0:c.proActiveMessagingConfig)&&void 0!==d?d:null,countryCode:null==c?void 0:c.countryCode}}function Ds(){var e,t,n;const i=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxHelpChatConfigs;return{isChatEnabledForSubdomains:null!==(n=null==i?void 0:i.isChatEnabledForSubdomains)&&void 0!==n&&n}}function bs(){var e,t,n,i,a;const o=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxSignChatConfigs;return{isChatEnabledForSubdomains:null!==(n=null==o?void 0:o.isChatEnabledForSubdomains)&&void 0!==n&&n,isCookieValidationFixEnabled:null!==(i=null==o?void 0:o.isCookieValidationFixEnabled)&&void 0!==i&&i,salesEntryPagesConfig:null!==(a=null==o?void 0:o.salesEntryPagesConfig)&&void 0!==a?a:null}}function Rs(){var e,t,n;const i=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxDashChatConfigs;return{isChatEnabledForSubdomains:null!==(n=null==i?void 0:i.isChatEnabledForSubdomains)&&void 0!==n&&n}}function vs({baseChatConfigs:e}){const t=undefined,n=undefined,i=Ei(Ti(window.location.href),e.chatSupportedEntitlements);if(i===l.WWW_DBX_HOST){const t=undefined;ps(i,e,As())}else if(i===l.SIGN_CENTER_HOST){const t=undefined;ms(i,e,bs())}else if(i===l.HELP_CENTER_HOST){const t=undefined;Ts(i,e,Ds())}else if(i===l.EXPERIENCE_HOST){const t=undefined;gs(i,e,Ds())}else if(i===l.DASH_DBX_HOST){const t=undefined;Ir(e,Rs())}else i===l.DOCSEND_HOST?Tr(e):i===l.HELLOSIGN_HOST?Nr(e):i===l.UNSUPPORTED_HOST&&ti()}Cr.chatUri="",Cr.chatApiKey="",Cr.chatDataEnv="",Cr.instance=null,ai();const ys=Os();oi(`Reading [Pre-configured] baseChatConfigs: ${JSON.stringify(ys)}`);const ws=undefined;vs({baseChatConfigs:ys})})(),i})()));
})();
//# debugId=051168fe-eb2e-33c5-8816-72f41d331000