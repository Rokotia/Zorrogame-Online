!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cbff2a19-9b00-3393-8e31-816f77461f4b")}catch(e){}}();
define(["require","exports","./c_api_v2_client_base","./c_memoize-one","./c_chat_chat_constants","./c_init_data_debug_panel","./e_file_viewer_static_scl_page_file","./c_spectrum_util_raf_throttle","./e_data_modules_stormcrow","./e_edison","./c_api_v2_routes_password_confirmation_provider","./c_core_i18n","./c_upload_kit_lib_types"],(function(e,r,n,i,a,t,o,s,l,_,d,E,S){"use strict";var T,f,c,O,u,A,g;r.UserFlow=void 0,(T=r.UserFlow||(r.UserFlow={})).TRANSFER_MANAGEMENT_MODAL="transfer_management_modal",T.MANAGEMENT_LIST_VIEW="management_list_view",T.CREATION="creation",T.RECIPIENT="recipient",T.BROWSE="browse",T.TRANSFER_CREATION_MODAL="transfer_creation_modal",r.ModalVisibilityChange=void 0,(f=r.ModalVisibilityChange||(r.ModalVisibilityChange={})).OPEN="open",f.CANCEL="cancel",f.OK="ok",r.SettingsVisibilityChange=void 0,(c=r.SettingsVisibilityChange||(r.SettingsVisibilityChange={})).OPEN="open",c.CLOSE="close",r.TransferListView=void 0,(O=r.TransferListView||(r.TransferListView={}))[O.Active=0]="Active",O[O.Expired=1]="Expired",O[O.All=2]="All",r.Actions=void 0,(u=r.Actions||(r.Actions={})).ChangeSettingsModalState="FileTransfers/ChangeSettingsModalState",u.ChangeConfirmTransferDeletionModalState="FileTransfers/ChangeConfirmTransferDeletionModalState",u.LogCopyTransferLink="FileTransfers/LogCopyTransferLink",u.DeleteTransferSummary="FileTransfers/DeleteTransferSummary",u.ExpireTransferSummary="FileTransfers/ExpireTransferSummary",u.ReactivateTransferSummary="FileTransfers/ReactivateTransferSummary",u.FinishedEditing="FileTransfers/FinishedEditing",u.HideOnboardingStep="FileTransfers/HideOnboardingStep",u.InitApp="FileTransfers/InitApp",u.LogAllItemsUploaded="FileTransfers/LogAllItemsUploaded",u.LogAutoDownload="FileTransfers/LogAutoDownload",u.LogOnboarding="FileTransfers/LogOnboarding",u.LogEmailFeedback="FileTransfers/LogEmailFeedback",u.LogUpsell="FileTransfers/LogUpsell",u.MarkOnboardingStepComplete="FileTransfers/MarkOnboardingStepComplete",u.MarkServerRestrictedFiles="FileTransfers/MarkServerRestrictedFiles",u.MetadataUpdated="FileTransfers/MetadataUpdated",u.SendTransferViaEmail="FileTransfers/SendTransferViaEmail",u.ReceivedTransferRowClick="FileTransfers/ReceivedTransferRowClick",u.TransferManagementTabClick="FileTransfers/TransferManagementTabClick",u.SetActiveUserId="FileTransfers/SetActiveUserId",u.SetBackground="FileTransfers/SetBackground",u.SetBackgroundPreview="FileTransfers/SetBackroundPreview",u.SetLogo="FileTransfers/SetLogo",u.SaveLogo="FileTransfers/SaveLogo",u.SetCurrentTransfer="FileTransfers/SetCurrentTransfer",u.SetExpiration="FileTransfers/SetExpiration",u.SetIsShared="FileTransfers/SetShareStatus",u.SetIsShareComplete="FileTransfer/SetShareComplete",u.ChangeManagementModalState="FileTransfers/ChangeManagementModalState",u.SetProductConfig="FileTransfers/SetProductConfig",u.SetRecipients="FileTransfers/SetRecipients",u.SetShareUrl="FileTransfers/SetShareUrl",u.SetFileTransfersUserMetadata="FileTransfers/SetFileTransfersUserMetadata",u.UpdateTransferSummaries="FileTransfers/UpdateTransferSummaries",u.UpdateReceivedTransferSummaries="FileTransfers/UpdateReceivedTransferSummaries",u.ViewFeedbackForm="FileTransfers/ViewFeedbackForm",u.TemporarilySaveEmailFormInfo="FileTransfers/TemporarilySaveEmailFormInfo",u.ClearSavedEmailFormInfo="FileTransfers/ClearSavedEmailFormInfo",u.LogInternetDisconnected="FileTransfers/LogInternetDisconnected",u.LogOnboardingStepShown="FileTransfers/LogOnboardingStepShown",u.MarkOnboardingStepShown="FileTransfers/MarkOnboardingStepShown",u.LogShareError="FileTransfers/LogShareError",u.UpdateSettingsFromManagementModal="FileTransfers/UpdateSettingsFromManagementModal",u.LogSettingsClicked="LogSettingsClicked",u.RemoveReceivedTransferFromList="FileTransfers/RemoveReceivedTransferFromList",u.LogRemoveReceivedTransferClicked="FileTransfers/LogRemoveReceivedTransferClicked",u.LogViewReplayFileTransferPrompt="FileTransfers/ViewReplayFileTransferPrompt",u.LogClickReplayFileTransferPrompt="FileTransfers/ClickReplayFileTransferPrompt",u.LogClickDownloadSUSIFooter="FileTransfers/LogClickDownloadSUSIFooter",u.LogHeadlessBrowserDetected="FileTransfers/LogHeadlessBrowserDetected",r.ExpirationOption=void 0,(A=r.ExpirationOption||(r.ExpirationOption={}))[A.SEVEN_DAYS=7]="SEVEN_DAYS",A[A.THIRTY_DAYS=30]="THIRTY_DAYS",A[A.NINETY_DAYS=90]="NINETY_DAYS",A[A.CUSTOM=0]="CUSTOM",function(e){e.EXPIRED="expired",e.SHARED="shared"}(g||(g={}));var F,p,m;r.ExpirationOption.SEVEN_DAYS,r.ExpirationOption.SEVEN_DAYS,r.ExpirationOption.THIRTY_DAYS,function(e){e.WAITING="waiting",e.FAILED="failed",e.UPLOADING="uploading",e.COMPLETED="completed"}(F||(F={})),s.computeDomains(null!==(p=window.__DEV_SERVER_HOSTNAME__)&&void 0!==p?p:"")[0].WEB_STATIC_CLOUDFLARE_CDN_HOST,s.computeDomains(null!==(m=window.__DEV_SERVER_HOSTNAME__)&&void 0!==m?m:"")[0].WEB_STATIC_CLOUDFLARE_CDN_HOST;const I="NULL";var R,D,N;!function(e){e.CUSTOMIZE_DESIGN="customize_design",e.DOWNLOAD_ALL="download_all",e.DISABLE_DOWNLOAD_NOTIFICATIONS="disable_download_notifications",e.EMAIL_JUST_VERIFIED="email_just_verified",e.EMAIL_TYPE="email_type",e.FEEDBACK="feedback",e.LIKE_EMAIL="like_email",e.RECP_TRACKING="ftref",e.SAVE_TO_DROPBOX="s2d",e.SEND_REMINDERS="send_reminders",e.MANAGEMENT_RECEIVED_DOWNLOAD="management_received_download"}(R||(R={})),function(e){e[e.ADD_FILES=0]="ADD_FILES",e[e.UPLOAD_PROGRESS=1]="UPLOAD_PROGRESS",e[e.REDESIGNED_EMAIL_SENT_CONFIRMATION=2]="REDESIGNED_EMAIL_SENT_CONFIRMATION",e[e.REDESIGNED_SHARE_LINK_CONFIRMATION=3]="REDESIGNED_SHARE_LINK_CONFIRMATION"}(D||(D={})),function(e){e[e.VIEW_FILES=0]="VIEW_FILES",e[e.DOWNLOAD_CONFIRMATION=1]="DOWNLOAD_CONFIRMATION"}(N||(N={}));var L;!function(e){e.CUSTOM_BACKGROUND="custom_background",e.EXPIRATION="expiration",e.EXPIRED_TRANSFERS="expired_transfers",e.OVER_LIMIT="over_limit",e.PASSWORD="password",e.TRANSFER_LOGO="transfer_logo",e.SHOW_WHO_HAS_DOWNLOADED="show_who_has_downloaded",e.MANAGE_PAGE_UPSELL_BANNER="manage_page_upsell_banner",e.SHARING_SETTINGS_UPSELL_BANNER="sharing_settings_upsell_banner"}(L||(L={}));var C,M;o.format_bytes(107374182400,0),o.format_bytes(268435456e3,0),function(e){e.ABOUT_PAGE="about",e.CREATE_PAGE="create",e.VIEW_PAGE="view",e.VIEW_EXPIRED_PAGE="view_expired",e.VIEW_DELETED_PAGE="view_deleted",e.LIST_PAGE="list"}(C||(C={})),function(e){e.TRY_PROFESSIONAL="try_professional",e.BUY_PROFESSIONAL="buy_professional",e.CONTACT_ADMIN="contact_admin",e.TRY_BUSINESS_ADVANCED="try_business_advanced",e.BUY_TRANSFER="buy_transfer"}(M||(M={}));var v,h,w,U,P,b;r.UploadStatus=void 0,(v=r.UploadStatus||(r.UploadStatus={}))[v.Waiting=0]="Waiting",v[v.Uploading=1]="Uploading",v[v.Success=2]="Success",v[v.Error=3]="Error",function(e){e.Dropbox="dropbox",e.Computer="computer",e.Transfer="transfer"}(h||(h={})),r.OriginalFileSource=void 0,(w=r.OriginalFileSource||(r.OriginalFileSource={})).Dropbox="dropbox",w.Computer="computer",w.Unknown="unknown",function(e){e.DRAG_DROP="drag_drop",e.DROPBOX_CHOOSER_ADDITIONAL="dropbox_chooser_additional",e.DROPBOX_CHOOSER_INITIAL="dropbox_chooser_initial",e.UPLOAD_BUTTON_ADDITIONAL="upload_button_additional",e.UPLOAD_BUTTON_INITIAL="upload_button_initial",e.DESKTOP_CONTEXT_MENU="desktop_context_menu",e.PAGELET_ON_LOAD="pagelet_on_load",e.TRANSFER_CREATION_MODAL_ON_LOAD="transfer_creation_modal_on_load"}(U||(U={})),function(e){e.EmptyFile="empty_file",e.IgnoredFile="ignored_file",e.OverMaxFileSize="over_max_file_size",e.PointerFile="pointer_file",e.TemporaryFile="temporary_file",e.InvalidChar="invalid_char",e.TimeOut="time_out",e.NotFound="not_found",e.NoPermission="no_permission",e.Restricted="restricted",e.InvalidArgs="invalid_args",e.Unknown="unknown"}(P||(P={})),function(e){e.CancelButton="cancel_button",e.WindowClose="window_close"}(b||(b={}));var y;function k(e){return r=>function(e){return e.value?e.value[".tag"]:"other"}(r)===e}!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DOWNLOADING=1]="DOWNLOADING",e[e.ERROR=2]="ERROR",e[e.PAUSED=3]="PAUSED",e[e.FETCHING_TOKENS=4]="FETCHING_TOKENS",e[e.CANCELED=5]="CANCELED",e[e.COMPLETED=6]="COMPLETED"}(y||(y={}));const V=k("image"),B=k("video");r.COMPLETED_TRANSFER_BROWSE_ENTRY_ONBOARDING="completedTransferBrowseEntryOnboarding",r.CUSTOM_BACKGROUND_ID="custom",r.CUSTOM_LOGO_ID="custom_logo",r.NULL_FILE_TRANSFER_KEY=I,r.asyncShowBrowseEntryPointOnboardingModal=r=>{new Promise((function(r,n){e(["./c_file_transfers_containers_browse_entry_point_onboarding_modal"],r,n)})).then((({showBrowseEntryPointOnboardingModal:e})=>e(r)))},r.folderEligibleForTransfer=e=>!o.File.isNoAccessSharedFolder(e),r.getLocalStorageBooleanValueForKey=function(e){const r=localStorage.getItem(e);return null===r?null:"true"===r},r.getTransferFilesKey=function(e){return e||I},r.isAtRoot=function(e){return null===function(e){let r;if("dest"in e)r=e.dest;else if("fullPath"in e){if(!e.fullPath)return null;r=e.fullPath,"/"===r.charAt(0)&&(r=e.fullPath.substring(1))}else{if(!("path"in e))throw new Error("file must be either PluploadFile, StateFileInfo, or FileSystemEntry");if(!e.path)return null;r=e.path}const n=r.split("/");if(n.length<=1)return null;return n[0]}(e)},r.isColorBackground=function(e){return!!e.color_hex&&!e.asset},r.isImageBackground=function(e){return!!e.asset&&V(e.asset)},r.isVideoBackground=function(e){return!!e.asset&&B(e.asset)},r.redirectToCreateTransferWithFiles=(e,r)=>{const n=function(e){return e.map((e=>e.file_id.replace("id:",""))).join(".")}(e);var i;o.Snackbar.sync(E.intl.formatMessage({id:"EmOY+w",defaultMessage:"Creating new transfer..."}),!1,"create-transfer"),o.redirect((i={referrer:r,fileids:n},new t.URI({scheme:"https",authority:s.getDomains().WEBSERVER,path:"/transfer",query:i}).toString()))},r.setLocalStorageValueForKey=function(e,r){localStorage.setItem(e,r.toString())},r.shouldShowTransferInSplitShare=(e,r)=>e&&r.length>0&&!r.some((e=>e.is_cloud_doc))&&!r.some(o.File.isNoAccessSharedFolder)}));
//# sourceMappingURL=c_file_transfers_lib_utils.js-vfl_FxhEW.map

//# debugId=cbff2a19-9b00-3393-8e31-816f77461f4b