!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d24eed4c-f9ba-3a7a-be44-657f98d6cdf0")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./c_core_i18n","./e_core_exception","./c_api_v2_client_base"],(function(e,a,t,s,r){"use strict";function c(e){return e.ns("stacks")}const i=t.defineMessage({id:"uR54m8",defaultMessage:"Adding files to stackâ€¦"}),n=t.defineMessage({id:"SblH86",defaultMessage:"Files added to stack"});const d=t.defineMessage({id:"1X8idd",defaultMessage:"You are not allowed to create stacks"}),o=t.defineMessage({id:"nYWQEx",defaultMessage:"Invalid stack name"}),_=t.defineMessage({id:"gvdY8i",defaultMessage:"Stack data too large"}),l=t.defineMessage({id:"gR/wup",defaultMessage:"Failed to create stack"}),f=t.defineMessage({id:"hL9qv1",defaultMessage:"Failed to add items to stack"}),g=e=>{switch(e){case"not_allowed":return d;case"invalid_name":return o;case"stack_data_too_large":return _;case"enqueue_error":return f;default:return l}};e.GetStacksRoutes=c,e.STACK_SIZE_LIMIT=200,e.addFilesToStack=async(e,t,r,d)=>{a.Snackbar.sync(e.formatMessage(i));try{return await c(new a.ActiveUserApiV2Client).rpc("create_fss_stack_item_batch_async",{parent_ns_id:r.namespace_id,item_list:d},{}),a.Snackbar.complete(e.formatMessage(n)),t(`/stacks/${r.sharing_id}`),!0}catch(t){return s.reportException({err:t,tags:["add-to-stack"]}),a.Snackbar.fail(e.formatMessage(f)),!1}},e.canAddToStack=e=>e.length<=200,e.createStackAndAddFiles=async function(e,t,d,o){var _,l;a.Snackbar.sync(e.formatMessage(i));const f=c(new a.ActiveUserApiV2Client);try{const{stack:s}=await f.rpc("create_stack",{stack_data:{...o,creation_type:{".tag":"fss_stack"}}},{});if(!s||!s.sharing_id||!s.namespace_id){const e=new r.ApiError;throw e.error={".tag":"other"},e}return await f.rpc("create_fss_stack_item_batch_async",{parent_ns_id:s.namespace_id,item_list:d},{}),a.Snackbar.complete(e.formatMessage(n)),t(`/stacks/${s.sharing_id}`),!0}catch(t){s.reportException({err:t,tags:["create-stack-and-add-files"]});const c=null===(l=null===(_=r.filterApiError(t))||void 0===_?void 0:_.error)||void 0===l?void 0:l.tag;return a.Snackbar.fail(e.formatMessage(g(c))),!1}},e.isContentEligibleForStack=function(e){return e.is_dir&&!e.is_encrypted}}));
//# sourceMappingURL=c_stacks_lib_api.js-vflZUloOR.map

//# debugId=d24eed4c-f9ba-3a7a-be44-657f98d6cdf0