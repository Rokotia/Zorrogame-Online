!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="01a9727f-b35b-319b-8390-0132ea4e2fcb")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_api_v2_client_base"],(function(e,t,a,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var l=r(t);a.injectInternalStyle("/static/metaserver/static/js/auth/verify_email/content/default.module.out-vflED8wbl.css",(e=>"._resend-button_1k60n_1{color:var(--Primary-On-Surface,#0057e0)}._code-text-input-wrapper_1k60n_5{border-radius:8px;height:80px;padding:0}._code-text-input-wrapper_1k60n_5._code-text-input-wrapper--xsmall_1k60n_15{height:60px}._code-text-input-wrapper_1k60n_5 input._code-text-input_1k60n_5[type=text]{font-size:28px;line-height:1em;padding:var(--dig-spacing__micro__xlarge);text-align:center;width:1ch}._code-text-input-wrapper_1k60n_5 input._code-text-input-small_1k60n_29[type=text]{font-size:28px;line-height:1em;padding:var(--dig-spacing__micro__large);text-align:center;width:1ch}._code-text-input-wrapper_1k60n_5 input._code-text-input-xsmall_1k60n_37[type=text]{font-size:28px;line-height:1em;padding:var(--dig-spacing__micro__medium);text-align:center;width:1ch}@media (max-width:456px){._code-text-input-wrapper_1k60n_5{height:80px}._code-text-input-wrapper_1k60n_5 input._code-text-input_1k60n_5[type=text]{font-size:20px;padding:0 var(--dig-spacing__micro__large)}._verify-email-wrapper_1k60n_55{max-width:456px}}"));var o;function c(e){return{class:"verify_email",action:"start",object:"email_verification_component_code_input",properties:e}}!function(e){e.DEFAULT="default",e.CODE="code"}(o||(o={}));const _=n.intl.formatMessage({id:"HSJula",defaultMessage:"Double-check the code and try again."}),s=n.intl.formatMessage({id:"UDcbjZ",defaultMessage:"Too many attempts. Please try again later."}),d=n.intl.formatMessage({id:"9Hycd5",defaultMessage:"Unable to verify code. Please try again later."});var p;!function(e){e.ATTEMPT_RATE_EXCEEDED="err_attempt_rate_exceeded",e.VERIFICATION_CODE_INVALID="err_verification_code_invalid",e.OTHER="err_other"}(p||(p={}));const u={attempt_rate_exceeded:p.ATTEMPT_RATE_EXCEEDED,verification_code_invalid:p.VERIFICATION_CODE_INVALID,incorrect_email_mfa:p.VERIFICATION_CODE_INVALID};e.CodeInput=e=>{const r=t.useRef(Array.from({length:6},(()=>t.createRef()))),[f,m]=t.useState(Array(6).fill("")),[g,x]=t.useState(null),[E,v]=t.useState(!1),[y,D]=t.useState(!1),h=(e,t)=>{m(f.map(((a,n)=>n===e?t:a)))};t.useEffect((()=>{const t=f.join("");e.onCodeChange&&e.onCodeChange(t),t.length>0&&(D(!1),x(null)),f.every((e=>""!==e))&&C()}),[f]);const C=async()=>{var t,n;if(!E){try{v(!0),x(null),a.UDCL.logStart(c({actionSurface:e.surface,verifyEmailComponent:o.CODE}),{tags:{action_surface:e.surface,verify_email_component:o.CODE}}),await e.onSubmit(f.join("")),a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:o.CODE,eventState:"success"}),{tags:{action_surface:e.surface,verify_email_component:o.CODE}}),D(!1),e.onSuccess&&e.onSuccess()}catch(r){const l=null===(n=null===(t=i.filterApiError(r))||void 0===t?void 0:t.error)||void 0===n?void 0:n[".tag"],f=u[l];f?(a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:o.CODE,eventState:"rejected"}),{tags:{action_surface:e.surface,verify_email_component:o.CODE,verify_email_fail_reason:f}}),f===p.ATTEMPT_RATE_EXCEEDED?x(s):x(_)):(a.UDCL.logEnd(c({actionSurface:e.surface,verifyEmailComponent:o.CODE,eventState:"failed"}),{tags:{action_surface:e.surface,verify_email_component:o.CODE,verify_email_fail_reason:p.OTHER}}),x(d)),e.onError&&e.onError(r),D(!0),m(Array(6).fill("")),k(0)}v(!1)}},k=e=>{if(!(e>=6)&&e<6&&e>=0){const t=r.current[e].current;t.focus(),t.select()}},w=e=>e.replace(/[^\d]/g,""),T="small"===e.size?"small":"medium";return l.default.createElement(a.FormRow,null,l.default.createElement(a.Split,{gap:"small"===e.size?"Micro Small":"xsmall"===e.size?{small:"Micro Large",xsmall:"Micro Small"}:"Micro Large",alignX:"center"},f.map(((t,i)=>l.default.createElement(a.Split.Item,{key:`code-text-input-${i}`},l.default.createElement(a.TextInput,{id:`code-text-input-${i}`,"data-testid":`code-test-input-${i}`,ref:r.current[i],autoFocus:0===i,isInvalid:y,maxLength:1,width:1,size:T,"aria-label":n.intl.formatMessage({id:"eMS4/n",defaultMessage:"Email code verification input field"}),className:"small"===e.size?"_code-text-input-small_1k60n_29":"xsmall"===e.size?"_code-text-input-xsmall_1k60n_37":"_code-text-input_1k60n_5",wrapperProps:{className:a.cx("_code-text-input-wrapper_1k60n_5",{"_code-text-input-wrapper--xsmall_1k60n_15":"xsmall"===e.size})},onChange:t=>((t,a)=>{const n=w(t.target.value);e.logCodeFilled&&e.logCodeFilled(),n.length>0&&(h(a,n),k(a+1))})(t,i),onKeyDown:e=>((e,t)=>{"e"===e.key?e.preventDefault():"Backspace"===e.key?(k(t-1),h(t,""),e.preventDefault()):"ArrowUp"===e.key||"ArrowDown"===e.key?e.preventDefault():"ArrowLeft"===e.key?(k(t-1),e.preventDefault()):"ArrowRight"===e.key?(k(t+1),e.preventDefault()):e.key>="0"&&e.key<="9"&&f[t]===e.key&&(e.preventDefault(),k(t+1))})(e,i),onFocus:e=>e.target.select(),onPaste:e=>((e,t)=>{e.preventDefault();const a=e.clipboardData,n=w(a.getData("Text"));if(0===n.length)return;const i=t+n.length,r=[...f.slice(0,t),...n.split(""),...f.slice(n.length+t)].slice(0,6);m(r),k(i)})(e,i),value:t,autoComplete:"off"}))))),l.default.createElement(l.default.Fragment,null,null!==g&&l.default.createElement(a.Box,{marginTop:"16",paddingTop:"2",paddingBottom:"8",paddingLeft:"12",paddingRight:"12"},l.default.createElement(a.FormHelperText,{variant:"alert"},l.default.createElement(a.Box,{display:"flex",alignItems:"center"},l.default.createElement(a.UIIcon,{src:a.FailLine,size:"medium"}),l.default.createElement(a.Text,{color:"error",size:"medium"},g))))))}}));
//# sourceMappingURL=c_verify_email_content_code_input.js-vfloNWjzX.map

//# debugId=01a9727f-b35b-319b-8390-0132ea4e2fcb