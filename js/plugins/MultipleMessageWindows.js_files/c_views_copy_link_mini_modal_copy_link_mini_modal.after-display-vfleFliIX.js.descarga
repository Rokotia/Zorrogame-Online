!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="64aa8ba5-00c0-3370-9187-35c1729517ab")}catch(e){}}();
define(["exports","react","./c_api_v2_routes_password_confirmation_provider","./e_data_modules_stormcrow","./e_file_viewer_static_scl_page_file","./c_ui_share-blocking-wrapper_share_blocking_wrapper","./c_shared_with_redux_store","./c_core_i18n","./c_init_data_debug_panel","./c_memoize-one","./c_dig-icons_assets_ui-icon_line_team","./c_dig-icons_assets_ui-icon_line_lock","./c_dig-icons_assets_ui-icon_line_upsell","./c_common_components_buttons","./c_lodash-es_lodash","./c_init_data_edison","./c_watermarking_utils_getImageDefaultSizes","./c_src_sink_index","./e_core_exception","./c_api_v2_routes_cloud_docs_provider","./e_edison","./c_chat_chat_constants","./c_react-use_misc_util","./c_api_v2_client_base","./c_spectrum_util_raf_throttle","./c_core_notify","react-dom","./c_spectrum_util_uuid_generator","./c_security_csrf_hmac","./c_ui_locked-state-modal_open_locked_state_modal","./c_trial-plan-card_components_header","./c_dig-components_combinations_index","./c_trial-cards_trial-plan-card2","./c_maestro_nav_shared_code_dropbox_logo","./c_growth-components_partial-bold-text_partial_bold_text","metaserver/static/js/langpack","./c_ui_over-quota-sweep-blocking-modal_over_quota_sweep_blocking_modal_wrapper","./c_hooks_use_query_overquota_data","./c_data_store","./c_upload_kit_lib_types","./c_base64","./c_browse_interface","./c_quota_use_query_quota_upsell_info","./c_react_query_api_helpers_utils","./c_core_transport_rpc_exceptions","./c_dig-content-icons_icons_file-excel-large","./c_dig-content-icons_hooks_useContentIconViewbox","./c_dig-content-icons_icons_file-generic-large","./c_browse_shared_with_api","./c_sharing_avatar_info"],(function(e,t,i,s,n,o,r,a,l,c,d,p,h,_,u,g,m,f,E,L,C,S,I,k,T,A,y,M,O,v,N,b,R,w,P,x,F,D,U,B,H,V,W,q,K,Y,G,z,j,Q){"use strict";function $(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var X=$(t);n.injectInternalStyle("/static/metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal.module.out-vflkGaBpb.css",(e=>"._centered-copy-link-mini-modal_ucip5_2{background-color:var(--dig-color__background__subtle);border-radius:var(--dig-radius__xlarge);padding:12px}._centered-modal-body_ucip5_8{padding:0}._centered-pending-screen_ucip5_13{row-gap:var(--dig-spacing__micro__medium)}._centered-error-screen_ucip5_23,._centered-pending-screen_ucip5_13{align-items:center;display:flex;flex-direction:column;height:133px;justify-content:center}._centered-error-screen_ucip5_23{row-gap:var(--dig-spacing__micro__small)}._centered-error-screen-text_ucip5_32{align-items:center;display:flex;flex-direction:column;text-align:center;width:80%}._centered-error-screen-title-text_ucip5_40{align-items:center;display:flex;flex-direction:column;margin-bottom:0}._centered-header-section_ucip5_48{align-items:center;display:flex;padding:0}._drawer-header-section_ucip5_56,._drawer-modal-body_ucip5_61{padding-left:var(--dig-spacing__micro__large);padding-right:var(--dig-spacing__micro__large)}._centered-header-section-text-container_ucip5_67{line-height:18px;max-width:280px;width:100%}._centered-header-section-primary-text_ucip5_73{font-family:var(--dig-type__family__title)}._centered-link-container_ucip5_78{background-color:var(--dig-color__background__base)}._link-copied-badge_ucip5_82{text-wrap:nowrap;align-items:center;background-color:var(--dig-color__success__surface--state-1);border-radius:var(--dig-radius__small);color:var(--dig-color__success__base);display:flex;font-family:var(--dig-type__family__action);font-size:var(--dig-type__size__action__small);letter-spacing:var(--dig-type__letterspacing__action);margin-right:calc(var(--dig-spacing__micro__xsmall)*-1);padding-left:var(--dig-spacing__micro__small);padding-right:var(--dig-spacing__micro__small);white-space:nowrap;width:fit-content}._link-copied-badge-checkmark_ucip5_102{padding-right:var(--dig-spacing__micro__xsmall)}._link-accessory-button_ucip5_106{margin-right:calc(var(--dig-spacing__micro__xsmall)*-1)}"));const Z="_centered-copy-link-mini-modal_ucip5_2",J="_centered-modal-body_ucip5_8",ee="_centered-header-section_ucip5_48",te="_link-accessory-button_ucip5_106",ie=()=>{const[e,t]=X.useState(!0);if(!e)return null;const i=a.intl.formatMessage({id:"FABv5W",defaultMessage:"Recipients can comment on your files without a Dropbox account."});return X.createElement(n.Box,{borderRadius:"Large",backgroundColor:"Primary Surface",padding:"Micro Medium",marginTop:"Micro Medium",style:{display:"flex",justifyContent:"space-between"}},X.createElement(n.Text,{variant:"paragraph",size:"medium"},i,X.createElement(n.Link,{href:"https://help.dropbox.com/view-edit/turn-off-comment-feature",variant:"monochromatic",isBold:!0,style:{marginLeft:"var(--dig-spacing__micro__xsmall)"},target:"_blank"},a.intl.formatMessage({id:"onr7U5",defaultMessage:"Learn more"}))),X.createElement(n.IconButton,{variant:"transparent",size:"small",onClick:()=>t(!1)},X.createElement(n.UIIcon,{src:n.CloseLine,"aria-label":a.intl.formatMessage({id:"+qEQdA",defaultMessage:"Close"})})))};ie.displayName="LoggedOutCommentingBanner";const se="copy-link-mini-modal__footer";class ne extends X.Component{constructor(){super(...arguments),this.handleManageClick=()=>{n.ShareTibEventLogger.log(this.props.user.id,n.TiburonEventName.ClickManageLinkSettings,n.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_MINI_MODAL,{...n.buildExtraFromLinkMetadata(this.props.sharedLink),fq_path:this.getFqPath()}),this.props.openShareModalSettings(n.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_MINI_MODAL)}}render(){return X.createElement("div",{className:n.cx(se,{"drawer-mode-footer":this.props.isDrawerMode})},X.createElement("div",{className:`${se}-content`},this._renderLinkInfo(),!n.isShortcutFileType(this.getFqPath())&&this._renderManageButton()))}_renderLinkInfo(){return X.createElement(n.Text,{"data-testid":"link-info",style:{display:"flex",alignItems:"flex-start"},color:"subtle",size:this.props.isDrawerMode?"medium":"small"},this.renderAudienceIcon(),this.formatLinkInfoText())}_renderManageButton(){return X.createElement(n.Button,{variant:"transparent",size:this.props.isDrawerMode?"medium":"small",style:{marginLeft:"8px",alignSelf:"flex-start",paddingTop:this.props.isDrawerMode?"":"2px"},onClick:this.handleManageClick},a.intl.formatMessage({id:"6BOuuN",defaultMessage:"Manage"}))}getFqPath(){let e;return this.props.fileInfo?e=this.props.fileInfo.fq_path:this.props.fileUploadInfo?e=this.props.fileUploadInfo.dest+"/"+this.props.fileUploadInfo.name:this.props.browseFileInfo&&(e=this.props.browseFileInfo.fq_path),e}formatLinkInfoText(){return this.props.contentType?"public"===this.props.linkAudience?a.intl.formatMessage({id:"8kew9O",defaultMessage:"Anyone with this link can {canEdit, select, true {edit} other {view}} the {isFolder, select, true {folder} other {file}}"},{canEdit:"editor"===this.props.linkAccessLevel,isFolder:"folder"===this.props.contentType}):"team"===this.props.linkAudience?a.intl.formatMessage({id:"LlzMnS",defaultMessage:"Team members with this link can {canEdit, select, true {edit} other {view}} the {isFolder, select, true {folder} other {file}}"},{canEdit:"editor"===this.props.linkAccessLevel,isFolder:"folder"===this.props.contentType}):"password"===this.props.linkAudience?a.intl.formatMessage({id:"2yevNp",defaultMessage:"People with the password can {canEdit, select, true {edit} other {view}} the {isFolder, select, true {folder} other {file}}"},{canEdit:"editor"===this.props.linkAccessLevel,isFolder:"folder"===this.props.contentType}):"no_one"===this.props.linkAudience?a.intl.formatMessage({id:"iv/o3s",defaultMessage:"Only people invited can {canEdit, select, true {edit} other {view}} the {isFolder, select, true {folder} other {file}}"},{canEdit:"editor"===this.props.linkAccessLevel,isFolder:"folder"===this.props.contentType}):"":"public"===this.props.linkAudience?a.intl.formatMessage({id:"5n50wF",defaultMessage:"Anyone with this link can {canEdit, select, true {edit} other {view}}"},{canEdit:"editor"===this.props.linkAccessLevel}):"team"===this.props.linkAudience?a.intl.formatMessage({id:"HcnRtr",defaultMessage:"Team members with this link can {canEdit, select, true {edit} other {view}}"},{canEdit:"editor"===this.props.linkAccessLevel}):"password"===this.props.linkAudience?a.intl.formatMessage({id:"ego60b",defaultMessage:"People with the password can {canEdit, select, true {edit} other {view}}"},{canEdit:"editor"===this.props.linkAccessLevel}):"no_one"===this.props.linkAudience?a.intl.formatMessage({id:"VUeAlW",defaultMessage:"Only people invited can {canEdit, select, true {edit} other {view}}"},{canEdit:"editor"===this.props.linkAccessLevel}):""}renderAudienceIcon(){let e=null;return"public"===this.props.linkAudience?e=n.GlobeLine:"team"===this.props.linkAudience?e=d.TeamLine:"no_one"===this.props.linkAudience?e=p.LockLine:"password"===this.props.linkAudience&&(e=h.PasswordsLine),null===e?null:X.createElement(n.UIIcon,{"data-testid":"audience-icon",src:e,size:this.props.isDrawerMode?"medium":"small",style:{marginRight:"4px",paddingTop:this.props.isDrawerMode?"":"4px"}})}}ne.displayName="CopyLinkMiniModalFooterComponent";const oe=n.requireCssWithComponent(ne,["/static/metaserver/static/css/dig-components/index.web-vflkUceyC.css","/static/metaserver/static/css/sharing/copy_link_mini_modal-vflzblJLQ.css"]);class re extends X.Component{render(){return this.renderCenteredHeader()}getContentName(){let e;if(this.props.fileInfo?e=this.props.fileInfo.fq_path:this.props.fileUploadInfo?e=this.props.fileUploadInfo.dest+"/"+this.props.fileUploadInfo.name:this.props.browseFileInfo&&(e=this.props.browseFileInfo.fq_path),e){const t=e.split("/");return t[t.length-1]}}renderCenteredHeader(){let e;if(this.props.isTriggeredAsShareModal)e=this.getContentName();else if(this.props.stageType===n.ModalStage.COPY)e=a.intl.formatMessage({id:"UBFgfk",defaultMessage:"Copy link to"});else if(this.props.stageType===n.ModalStage.RESULT)e=(e=>e.formatMessage({id:"Og6X3p",defaultMessage:"Link copied to"}))(a.intl);else{if(this.props.stageType!==n.ModalStage.ERROR_CLIENT)return null;e=((e,t)=>t?e.formatMessage({id:"fLNxZU",defaultMessage:"Couldn’t copy link to comment"}):e.formatMessage({id:"pTCiXO",defaultMessage:"Couldn’t copy link to"}))(a.intl,this.props.isLinkToComment)}const t=!this.props.isTriggeredAsShareModal&&X.createElement(X.Fragment,null,X.createElement(n.Text,{size:"small",color:"subtle"},X.createElement(n.Truncate,{location:.5},this.getContentName())));return X.createElement("div",{className:"_centered-header-section-text-container_ucip5_67","data-testid":"clmm-header"},X.createElement(n.Text,{size:"medium",isBold:!0,className:"_centered-header-section-primary-text_ucip5_73"},X.createElement(n.Truncate,{location:.5},e)),t)}}re.displayName="CopyLinkMiniModalHeaderComponent";const ae=n.requireCssWithComponent(re,["/static/metaserver/static/css/dig-components/index.web-vflkUceyC.css","/static/metaserver/static/css/sharing/copy_link_mini_modal-vflzblJLQ.css"]);class le extends X.Component{constructor(){super(...arguments),this.handleCopy=()=>{this.props.onCopyToClipboard(n.CopyLinkMethod.MANUAL)},this.renderRightAccessory=()=>this.props.stage===n.ModalStage.RESULT?X.createElement(n.Text,{className:"_link-copied-badge_ucip5_82",isBold:!0},X.createElement(n.UIIcon,{src:n.CheckmarkLine,className:"_link-copied-badge-checkmark_ucip5_102"}),a.intl.formatMessage({id:"zGjUch",defaultMessage:"Link copied"})):this.props.stage===n.ModalStage.COPY?X.createElement(n.Button,{className:te,variant:"primary",size:"small",onClick:()=>{var e,t;return null===(t=(e=this.props).onClickCopyLink)||void 0===t?void 0:t.call(e,!0)}},(e=>e.formatMessage({id:"4nKHfq",defaultMessage:"Copy link"}))(a.intl)):this.props.stage===n.ModalStage.ERROR_CLIENT?X.createElement(n.Button,{className:te,variant:"primary",size:"small",onClick:()=>{var e,t;return null===(t=(e=this.props).onClickCopyLink)||void 0===t?void 0:t.call(e,!0)}},(e=>e.formatMessage({id:"d5v7fB",defaultMessage:"Try again"}))(a.intl)):null}componentDidMount(){this.props.shouldFocusOnLink&&this.props.focusOnInput()}render(){return X.createElement("div",{className:n.cx("copy-link-mini-modal__link",{"drawer-mode-link":this.props.isDrawerMode})},X.createElement(n.TextInput,{onCopy:this.handleCopy,size:"large","aria-label":a.intl.formatMessage({id:"qx4buj",defaultMessage:"Link for copy link click"}),value:this.props.sharedLink.url,readOnly:!0,onClick:this.props.focusOnInput,ref:this.props.inputRef,wrapperProps:{className:n.cx("link-container","_centered-link-container_ucip5_78")},withRightAccessory:this.renderRightAccessory()}))}}le.displayName="CopyLinkMiniModalLinkComponent";const ce=n.requireCssWithComponent(le,["/static/metaserver/static/css/dig-components/index.web-vflkUceyC.css","/static/metaserver/static/css/sharing/copy_link_mini_modal-vflzblJLQ.css"]),de=({props:e})=>X.createElement(_.HeaderIconButton,{onClick:e.onClick},X.createElement(n.UIIcon,{src:n.CloseLine,"aria-label":e.ariaLabel}));de.displayName="CloseButton";class pe extends X.default.Component{constructor(e){super(e),this.onWindowResize=u.throttle((()=>{this.props.isCenteredDisplayed||this.props.anchorRef.current||this.props.closeButtonHandler()}),500),this.handleClick=e=>{e.stopPropagation()},this.overlayRef=X.default.createRef(),this.tabRef=X.default.createRef(),this.state={tabIndex:0}}componentDidMount(){window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}componentDidUpdate(){var e;null===(e=this.overlayRef.current)||void 0===e||e.update()}render(){const{inputRef:e,stage:t,closeButtonHandler:i,linkAccessLevel:s,sharedLink:o,shouldFocusOnLink:r,focusOnInput:l,actionHandler:c,onCopyToClipboard:d,zIndexOverride:p,fileInfo:h,fileUploadInfo:_,browseFileInfo:u,linkAudience:g,user:m,isLoggedOutCommentingEnabled:f,openShareModalSettings:E,isLinkToComment:L,isTriggeredAsShareModal:C}=this.props,S=n.isDrawerMode(this.props.sm24MobileWebVariant),I=X.default.createElement(ae,{stageType:t,isLinkToComment:L,fileInfo:h,fileUploadInfo:_,browseFileInfo:u,isTriggeredAsShareModal:C});let k=X.default.createElement(X.default.Fragment,null);o&&l&&e&&(k=X.default.createElement(ce,{sharedLink:o,focusOnInput:l,inputRef:e,onClickCopyLink:c,shouldFocusOnLink:r,onCopyToClipboard:d,stage:t,isDrawerMode:S}));let T=X.default.createElement(X.default.Fragment,null);if(o&&!C&&(t===n.ModalStage.RESULT||t===n.ModalStage.COPY||t===n.ModalStage.ERROR_CLIENT)){let e;"object"==typeof o&&".tag"in o&&(e=o[".tag"]),e||(e=o.file_type),T=X.default.createElement(oe,{linkAccessLevel:s,linkAudience:g,contentType:e,fileInfo:h,fileUploadInfo:_,browseFileInfo:u,user:m,sharedLink:o,openShareModalSettings:E,isDrawerMode:S})}if(this.props.isCenteredDisplayed){const e=X.default.createElement(X.default.Fragment,null,this.renderCenteredPendingScreen(),this.renderCenteredErrorScreen(),k,T,f&&X.default.createElement(ie,null)),s=t===n.ModalStage.PENDING?()=>{}:i;return S?X.default.createElement(n.Drawer.ModalDrawer,{onRequestClose:s,"aria-label":"copy-link-mini-modal-drawer",isOpen:!0,alignment:"bottom",height:"100%",shouldAnimate:!0},X.default.createElement(n.Drawer.Container,null,X.default.createElement(n.Drawer.Header,{className:"_drawer-header-section_ucip5_56"},X.default.createElement(n.Drawer.Layout,null,X.default.createElement(n.Drawer.LayoutItem,{width:"fill"},X.default.createElement(n.Drawer.Layout,null,I,X.default.createElement("div",{style:{marginLeft:"auto"}},X.default.createElement(de,{props:{onClick:s,ariaLabel:"Close"}})))))),X.default.createElement(n.Drawer.Body,{className:"_drawer-modal-body_ucip5_61"},e))):X.default.createElement(n.Modal$1,{open:!0,isCentered:!0,width:442,onRequestClose:s,withCloseButton:(A=a.intl,A.formatMessage({id:"QKIeC9",defaultMessage:"Close"})),closeButtonProps:{disabled:t===n.ModalStage.PENDING}},X.default.createElement("div",{className:Z},X.default.createElement(n.Modal$1.Header,{className:ee},I),X.default.createElement(n.Modal$1.Body,{className:J},e)))}var A;const y=X.default.createElement(n.IconButton,{"aria-label":"close","data-testid":"clmm-close-button",onClick:i,variant:"transparent",style:{position:"absolute",top:"8px",right:"8px"},disabled:t===n.ModalStage.PENDING},X.default.createElement(n.UIIcon,{src:n.CloseLine,"aria-label":""}));return X.default.createElement(n.LayerContext.Provider,{value:{zIndex:p||20}},X.default.createElement(n.ClickOutside,{isActive:!0,onClickOutside:t===n.ModalStage.PENDING?void 0:i,shouldPropagateMouseEvents:!1,isBlock:!0,shouldClickOutsideWhenDefaultPrevented:!0},X.default.createElement(n.Overlay,{className:"copy-link-mini-modal__overlay",anchorRef:this.props.anchorRef,placement:this.props.placement||"bottom",auto:!0,offsetDistance:null!=this.props.yOffsetDistance?this.props.yOffsetDistance:4,onClick:this.handleClick,ref:this.overlayRef,style:{width:442,padding:0},onKeyDown:e=>{if(this.overlayRef.current){if("Escape"===e.key)return this.props.closeButtonHandler(),e.preventDefault(),void e.nativeEvent.stopImmediatePropagation();if("Tab"===e.key){if(!this.tabRef||!this.tabRef.current)return;e.preventDefault();const t=this.tabRef.current.querySelectorAll('button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled])');let i,s=this.state.tabIndex;for(let e=0;e<t.length;e++){if(t[e]===document.activeElement){s=e;break}}i=e.shiftKey?(s-1+t.length)%t.length:(s+1)%t.length,t[i].focus(),this.setState({tabIndex:i})}}}},X.default.createElement("div",{className:Z,ref:this.tabRef},y,X.default.createElement(n.Modal$1.Header,{className:ee},I),X.default.createElement(n.Modal$1.Body,{className:J},this.renderCenteredPendingScreen(),this.renderCenteredErrorScreen(),k,T,f&&X.default.createElement(ie,null))))))}renderCenteredPendingScreen(){return this.props.stage===n.ModalStage.PENDING?X.default.createElement(n.Box,{className:"_centered-pending-screen_ucip5_13"},X.default.createElement(n.Spinner,null),X.default.createElement(n.Text,{color:"subtle"},a.intl.formatMessage({id:"Fd4Wq1",defaultMessage:"Getting the link"}))):null}renderCenteredErrorScreen(){return this.props.stage===n.ModalStage.ERROR_SERVER?X.default.createElement(n.Box,{className:"_centered-error-screen_ucip5_23"},X.default.createElement(n.UIIcon,{src:n.FailPictogram,size:"large"}),X.default.createElement(n.Box,{className:"_centered-error-screen-text_ucip5_32"},X.default.createElement(n.Title,{className:"_centered-error-screen-title-text_ucip5_40",weightVariant:"emphasized",size:"small"},a.intl.formatMessage({id:"TffHle",defaultMessage:"Couldn’t copy link"})),X.default.createElement(n.Text,{color:"subtle"},this.props.errorMessage))):null}}pe.displayName="CopyLinkMiniModalOverlayComponent";const he=n.requireCssWithComponent(pe,["/static/metaserver/static/css/sharing/copy_link_mini_modal-vflzblJLQ.css","/static/metaserver/static/css/dig-components/index.web-vflkUceyC.css"]);class _e extends X.default.Component{constructor(e){super(e),this.logPAPAsShareModal=e=>{var t,i;const s=this.loggingKey,o="start"===e.loggingAction?n.UDCL.logStart:n.UDCL.logEnd,r="end"===e.loggingAction?e.eventState:void 0,a={actionElement:this.actionElement,actionSurface:null!==(t=this.actionSurface)&&void 0!==t?t:"unknown",isDir:"false",screen:null!==(i=this.screen)&&void 0!==i?i:"unknown"};o("ops.sm24.browse_load",{tags:a,key:s,eventState:r}),o(n.PAP_Load_ShareModal({eventState:r,actionElement:this.actionElement,actionSurface:this.actionSurface,contentAction:"share",sharedObjType:"file",fileExtension:this.props.file?n.getExtension(this.props.file):"",isDir:!1,screen:this.screen}),{tags:a,key:s})},this.getScreen=()=>this.props.isTriggeredAsShareModal?"pointer_modal_screen":this.props.isFromShareMe24Modal?"share_screen":void 0,this.getPAPLoggerContent=()=>this.props.file?n.getContentFromFile(this.props.file):this.props.browseFile?n.getContentFromFile(this.props.browseFile):this.props.fileUpload?n.getContentFromFileUpload(this.props.fileUpload):void 0,this.appendSenderTrackeyToLink=()=>{var e;this.sharedLink&&this.sharedLink.url&&!n.isShortcutFileType(null===(e=this.props.file)||void 0===e?void 0:e.fq_path)&&(this.sharedLink=n.getNewLinkMetadataWithSenderTrackeyURL(this.sharedLink,this.senderTrackey))},this.appendCommentIdToLink=()=>{this.sharedLink&&this.sharedLink.url&&this.props.commentId&&(this.sharedLink=n.getNewLinkMetadataWithUrlFragment(this.sharedLink,"comment_id="+this.props.commentId))},this.handleClipboardWriterCopyLinkToClipboard=()=>{var e;this.appendSenderTrackeyToLink(),this.appendCommentIdToLink(),null===(e=this.props.clipboardWriter)||void 0===e||e.write(this.sharedLink.url),this.handleClipboardSuccess(n.CopyLinkMethod.CLIPBOARD_API)},this.handleCopyLinkToClipboard=(e=!1)=>{e&&n.logPAPCopySharedLinkEvent({eventState:"start",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),metadata:this.sharedLink,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen}),this.appendSenderTrackeyToLink(),this.appendCommentIdToLink(),n.copyToClipboard(this.sharedLink.url,(()=>{this.handleClipboardSuccess(n.CopyLinkMethod.EXEC_COMMAND)}),this.handleClipboardFailure)},this.handleClipboardSuccess=e=>{e!==n.CopyLinkMethod.MANUAL&&(this.setState({stage:n.ModalState.RESULT}),this.focusOnInput(),setTimeout((()=>{this.setState({stage:n.ModalState.COPY})}),5e3)),this.logEvent(n.TiburonEventName.CopySharedLink,{created_new_link:this.isLinkNewlyCreated,copy_method:e,access:this.getAccessLevel(),timing:this.getLinkActionTTI(this.startCopyLinkTime),sender_trackey:this.senderTrackey,commentId:this.props.commentId}),n.logPAPCopySharedLinkEvent({eventState:"success",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),metadata:this.sharedLink,httpCode:this.httpCode,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen})},this.handleOnCopyToClipboard=e=>{n.logPAPCopySharedLinkEvent({eventState:"start",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),metadata:this.sharedLink,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen}),this.handleClipboardSuccess(e)},this.handleClipboardFailure=()=>{this.copyLinkToClipboardNewAPI()},this.copyLinkToClipboardNewAPI=()=>{if(navigator.clipboard){const e=this.sharedLink.url;navigator.clipboard.writeText(e).then((()=>{this.handleClipboardSuccess(n.CopyLinkMethod.CLIPBOARD_API)}),(()=>{this.handleClipboardFailureNewAPI()}))}else this.handleClipboardFailureNewAPI()},this.handleClipboardFailureNewAPI=()=>{this.exceptionType=n.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,this.failToFetchCopyLinkHelper()},this.getLinkActionTTI=e=>Date.now()-e,this.onClose=()=>{this.props.isFromShareMe24Modal&&"browse_screen"===this.actionSurface&&"browse_directory_row"===this.actionElement&&n.trackUserLeapEvent(n.SharingUserLeapEvent.SM24_OOB_SHARE_COMPLETE_CLMM_CLOSED,this.origin),this.props.setIsCreatingSharedLink(!1,this.fileIdOrPath),this.props.userActionSource===n.ActionSourceValue.BUTTON&&this.props.onHoverLocked&&this.props.onHoverLocked({isOpen:!1}),this.props.onActionFlowComplete&&this.props.onActionFlowComplete(),this.setState({isOpen:!1})},this.focusOnInput=()=>{this.inputRef.current&&this.inputRef.current.select()},this.openShareModalSettings=e=>{const t={origin:e,initialScreen:"settings",initialTab:"editor"===this.getAccessLevel()?"edit_link_settings":"view_link_settings"};if(this.props.file)n.asyncShowShareModal(this.props.user,this.props.file,t);else if(this.props.fileUpload)n.asyncShowShareModal(this.props.user,{fqPath:this.props.fileUpload.dest+"/"+this.props.fileUpload.name,isFolder:!1},t);else{if(!this.props.browseFile)return void n.sharingNotificationError((i=a.intl,i.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."})));n.asyncShowShareModal(this.props.user,this.props.browseFile,t)}var i;this.onClose()},this.inputRef=X.default.createRef(),this.state={isOpen:!0,stage:n.ModalState.PENDING},this.fileIdOrPath=this.getFileIdOrPath(),this.loggingKey=n.UUID.v4();const{actionSurface:t,actionElement:i,origin:s,contentAction:o}=this.getOriginAndAction();this.actionSurface=t,this.actionElement=i,this.contentAction=o,this.origin=s,this.requestedAccessLevel="default",this.screen=this.getScreen(),this.senderTrackey=n.vendSenderTrackey()}componentDidMount(){n.logPAPCreateSharedLinkEvent({eventState:"start",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,screen:this.screen}),n.logPAPCopySharedLinkEvent({eventState:"start",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen}),this.props.isTriggeredAsShareModal&&this.logPAPAsShareModal({loggingAction:"start"}),this.createSharedLink()}componentDidUpdate(e,t){!this.props.isTriggeredAsShareModal||t.stage!==n.ModalState.PENDING||this.state.stage!==n.ModalState.RESULT&&this.state.stage!==n.ModalState.COPY||this.logPAPAsShareModal({loggingAction:"end",eventState:"success"}),this.props.isTriggeredAsShareModal&&t.stage!==n.ModalState.ERROR&&this.state.stage===n.ModalState.ERROR&&this.logPAPAsShareModal({loggingAction:"end",eventState:"failed"})}createSharedLink(){this.props.setIsCreatingSharedLink(!0,this.fileIdOrPath),this.props.userActionSource===n.ActionSourceValue.BUTTON&&this.props.onHoverLocked&&this.props.onHoverLocked({isOpen:!0}),this.startCreateLinkTime=Date.now();const e=n.getApiClient(this.props.user),t=this.requestedAccessLevel;e.createSharedLinkNonAlpha({fileIdOrPath:this.fileIdOrPath,settings:{access:t}}).then((e=>{this.startCopyLinkTime=Date.now(),this.succeedToFetchLinkHelper(e,!0),this.logEvent(n.TiburonEventName.AttemptCreateSharedLinkWithSettings,{access:this.getAccessLevel(),commentId:this.props.commentId})})).catch((e=>{this.startCopyLinkTime=Date.now(),e.error[".tag"]===n.CopyLinkException.SHARED_LINK_ALREADY_EXISTS?this.succeedToFetchLinkHelper(e.error.shared_link_already_exists.metadata,!1,e):e.error[".tag"]===n.CopyLinkException.ACCESS_DENIED?(this.exceptionType=n.CopyLinkException.ACCESS_DENIED,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===n.CopyLinkException.SETTINGS_ERROR&&e.error.settings_error[".tag"]===n.CopyLinkException.NOT_AUTHORIZED?(this.exceptionType=n.CopyLinkException.NOT_AUTHORIZED,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===n.CopyLinkException.PATH&&e.error.path[".tag"]===n.CopyLinkException.NOT_FOUND?(this.exceptionType=n.CopyLinkException.NOT_FOUND,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===n.CopyLinkException.EMAIL_NOT_VERIFIED?(this.exceptionType=n.CopyLinkException.EMAIL_NOT_VERIFIED,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===n.CopyLinkException.BANNED_MEMBER?(this.exceptionType=n.CopyLinkException.BANNED_MEMBER,this.userMessage=e.message,this.failToFetchCopyLinkHelper(e)):(this.exceptionType=e.error[".tag"]?e.error[".tag"]:n.CopyLinkException.UNDEFINED_ERROR,this.failToFetchCopyLinkHelper(e)),this.logEvent(n.TiburonEventName.AttemptCreateSharedLinkWithSettings,{access:t,timing:this.getLinkActionTTI(this.startCopyLinkTime),commentId:this.props.commentId})}))}succeedToFetchLinkHelper(e,t,i){this.sharedLink=e,this.isLinkNewlyCreated=t,this.httpCode=t?200:i&&i.raw&&i.raw.status,this.logEvent(n.TiburonEventName.SucceedCreateSharedLinkWithSettings,{created_new_link:t,http_status_code:this.httpCode,response_status:"success",is_alpha:!1,access:this.getAccessLevel(),timing:this.getLinkActionTTI(this.startCreateLinkTime),commentId:this.props.commentId}),n.logPAPCreateSharedLinkEvent({eventState:"success",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),metadata:e,httpCode:this.httpCode,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,screen:this.screen}),t&&this.props.file&&!this.props.isSearchMode&&r.getStoreForSharedWith().dispatch(r.sharedLinkDataOutOfDate(this.props.file.fq_path)),n.isBrowserCopyEnabled()?this.handleCopyLinkToClipboard():this.props.clipboardWriter?this.handleClipboardWriterCopyLinkToClipboard():(this.setState({stage:n.ModalState.COPY}),n.logPAPCopySharedLinkEvent({eventState:"canceled",actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),metadata:e,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen})),n.publishEvent(n.CampaignEvents.FILE_SHARE_SUCCESS,{context:{file_name:this.props.file?n.getFilename(this.props.file):"",file_extension:this.props.file?n.getExtension(this.props.file):"",file_path:this.props.file?this.props.file.fq_path:""}})}failToFetchCopyLinkHelper(e){e&&(this.logEvent(n.TiburonEventName.FailCreateSharedLinkWithSettings,{error_message:this.exceptionType,http_status_code:e.raw&&e.raw.status,is_alpha:!1,timing:this.getLinkActionTTI(this.startCreateLinkTime),commentId:this.props.commentId}),n.logPAPCreateSharedLinkEvent({eventState:n.getErrorState(this.exceptionType),actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),httpCode:e&&e.raw&&e.raw.status,exception:this.exceptionType,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,screen:this.screen})),this.setState({stage:n.ModalState.ERROR}),this.logEvent(n.TiburonEventName.CopySharedLinkFailure,{error:this.exceptionType,timing:this.getLinkActionTTI(this.startCopyLinkTime),commentId:this.props.commentId}),n.logPAPCopySharedLinkEvent({eventState:n.getErrorState(this.exceptionType),actionSurface:this.actionSurface,actionElement:this.actionElement,contentAction:this.contentAction,requestedAccessLevel:this.requestedAccessLevel,fileIdOrPath:this.fileIdOrPath,content:this.getPAPLoggerContent(),httpCode:e&&e.raw&&e.raw.status,exception:this.exceptionType,metadata:this.sharedLink?this.sharedLink:void 0,isSm24:this.props.isFromShareMe24Modal,loggingKey:this.loggingKey,commentId:this.props.commentId,screen:this.screen})}getFileIdOrPath(){var e,t;return(null===(e=this.props.file)||void 0===e?void 0:e.file_id)||(null===(t=this.props.file)||void 0===t?void 0:t.fq_path)||this.props.filePath}getAccessLevel(){const e=this.sharedLink?this.sharedLink.link_permissions.link_access_level:void 0;let t="viewer";return e&&(t=e.hasOwnProperty(".tag")?e[".tag"]:e),t}getLinkVisibilityMapping(e){switch(e){case"public":case"password":case"no_one":return e;case"team_only":return"team";case"team_and_password":return"password";case"shared_folder_only":case"only_you":return"no_one"}}getLinkAudience(){if(!this.sharedLink)return;let e;const t=this.sharedLink.link_permissions;if(t.effective_audience)e=t.effective_audience,"object"==typeof e&&".tag"in e&&(e=e[".tag"]);else{let i;i=t.resolved_visibility,"object"==typeof i&&".tag"in i&&(i=i[".tag"]),e=this.getLinkVisibilityMapping(i)}return e}logEvent(e,t){var s,o;let r=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON;this.props.isFromShareMe24Modal?r=this.props.origin:this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.RIGHT_SIDEBAR?r=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS_BUTTON:this.props.userActionSource===n.ActionSourceValue.OVERFLOW_MENU?r=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU:this.props.userActionSource===n.ActionSourceValue.COPY_LINK_FROM_UPLOAD_MODAL?r=n.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_FROM_UPLOAD_MODAL:this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.PREVIEW_TITLEBAR?r=n.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE_TITLEBAR:this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.CONTENT_TILE?r=this.props.isSearchMode?n.SHARE_ACTION_ORIGIN_TYPE.SEARCH_CONTENT_TILE_BUTTON:n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_CONTENT_TILE_BUTTON:this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE?r=this.props.isSearchMode?n.SHARE_ACTION_ORIGIN_TYPE.QUICK_VIEW_SEARCH_CONTENT_TILE:n.SHARE_ACTION_ORIGIN_TYPE.QUICK_VIEW_BROWSE_CONTENT_TILE:this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.COMMENTS_SIDEBAR&&(r=n.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_COMMENTS_SIDEBAR);const a=i.get_browser_info();n.ShareTibEventLogger.log(this.props.user.id,e,r,{...n.buildExtraFromLinkMetadata(this.sharedLink),file_id:null===(s=this.props.file)||void 0===s?void 0:s.file_id,fq_path:(null===(o=this.props.file)||void 0===o?void 0:o.fq_path)||this.props.filePath,browser:a.browser,browser_version:a.version,...t}),e===n.TiburonEventName.CopySharedLink&&n.trackUserLeapEvent(n.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,r)}getOriginAndAction(){let e=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON,t="browse_screen",i="browse_directory_row";const s=this.props.isTriggeredAsShareModal?"share":"copy_link";return this.props.isFromShareMe24Modal?(e=this.props.origin,t=this.props.actionSurface,i=this.props.actionElement):this.props.isSearchMode?(t="search",i="search_directory_row",this.props.userActionSource===n.ActionSourceValue.OVERFLOW_MENU?i="content_overflow_menu":this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.CONTENT_TILE?(e=n.SHARE_ACTION_ORIGIN_TYPE.SEARCH_CONTENT_TILE_BUTTON,i="content_tile"):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE&&(e=n.SHARE_ACTION_ORIGIN_TYPE.QUICK_VIEW_SEARCH_CONTENT_TILE,t="search_quick_view",i=n.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE)):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.RIGHT_SIDEBAR?(e=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,i="action_bar_overflow_menu"):this.props.userActionSource===n.ActionSourceValue.OVERFLOW_MENU?this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.FOLDER_SETTINGS_MENU?(e=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS,i="context_menu"):(e=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU,i="content_overflow_menu"):this.props.userActionSource===n.ActionSourceValue.COPY_LINK_FROM_UPLOAD_MODAL?(e=n.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_FROM_UPLOAD_MODAL,i="upload_modal"):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.PREVIEW_TITLEBAR?(e=n.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE_TITLEBAR,t="previews",i="preview_titlebar"):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.CONTENT_TILE?(e=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_CONTENT_TILE_BUTTON,t="browse_screen",i="content_tile"):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE?(e=n.SHARE_ACTION_ORIGIN_TYPE.QUICK_VIEW_BROWSE_CONTENT_TILE,t="browse_quick_view",i=n.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE):this.props.userActionSurfaceLogValue===n.ActionSurfaceLogValue.COMMENTS_SIDEBAR&&(e=n.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_COMMENTS_SIDEBAR,t="previews",i="comment"),{origin:e,actionSurface:t,actionElement:i,contentAction:s}}render(){if(!this.state.isOpen)return null;this.appendSenderTrackeyToLink(),this.appendCommentIdToLink();const e=this.props.isCenteredDisplayed?{isCenteredDisplayed:!0}:{isCenteredDisplayed:!1,anchorRef:this.props.anchorRef,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement};switch(this.state.stage){case n.ModalState.PENDING:return X.default.createElement(he,{stage:n.ModalStage.PENDING,closeButtonHandler:this.onClose,zIndexOverride:this.props.zIndexOverride,isLinkToComment:!!this.props.commentId,...e,sm24MobileWebVariant:this.props.sm24MobileWebVariant});case n.ModalState.COPY:return X.default.createElement(he,{stage:n.ModalStage.COPY,linkAccessLevel:this.getAccessLevel(),actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,shouldFocusOnLink:!1,onCopyToClipboard:this.handleOnCopyToClipboard,zIndexOverride:this.props.zIndexOverride,fileInfo:this.props.file,fileUploadInfo:this.props.fileUpload,browseFileInfo:this.props.browseFile,linkAudience:this.getLinkAudience(),user:this.props.user,openShareModalSettings:this.openShareModalSettings,isLinkToComment:!!this.props.commentId,isTriggeredAsShareModal:this.props.isTriggeredAsShareModal,...e,sm24MobileWebVariant:this.props.sm24MobileWebVariant});case n.ModalState.ERROR:if(this.exceptionType!==n.CopyLinkException.FAILED_COPY_TO_CLIPBOARD){if(this.exceptionType===n.CopyLinkException.BANNED_MEMBER&&this.userMessage)return this.onClose(),n.failBannerWithHelpCenter(this.userMessage,n.ABUSE_HELP_ARTICLE_LINK),null;const t=((e,t)=>{switch(t){case n.CopyLinkException.ACCESS_DENIED:case n.CopyLinkException.NOT_AUTHORIZED:return e.formatMessage({id:"kyPbwf",defaultMessage:"You don’t have permission to create a link to this content"});case n.CopyLinkException.NOT_FOUND:return e.formatMessage({id:"Sh48Q6",defaultMessage:"We can’t find this file anymore. Try checking activity or folder history to see what happened."});case n.CopyLinkException.EMAIL_NOT_VERIFIED:return e.formatMessage({id:"JaPuez",defaultMessage:"You can’t share until you verify your email address"});default:return e.formatMessage({id:"Xfj5ph",defaultMessage:"Try reloading the page or asking us for <l>help</l>"},{l:e=>X.default.createElement(n.Link,{href:"https://help.dropbox.com",target:"_blank",rel:"noopener noreferrer"},e)})}})(a.intl,this.exceptionType);return X.default.createElement(he,{stage:n.ModalStage.ERROR_SERVER,closeButtonHandler:this.onClose,errorMessage:t,zIndexOverride:this.props.zIndexOverride,isLinkToComment:!!this.props.commentId,...e,sm24MobileWebVariant:this.props.sm24MobileWebVariant})}return X.default.createElement(he,{stage:n.ModalStage.ERROR_CLIENT,linkAccessLevel:this.getAccessLevel(),actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleOnCopyToClipboard,zIndexOverride:this.props.zIndexOverride,fileInfo:this.props.file,fileUploadInfo:this.props.fileUpload,browseFileInfo:this.props.browseFile,linkAudience:this.getLinkAudience(),user:this.props.user,openShareModalSettings:this.openShareModalSettings,isLinkToComment:!!this.props.commentId,...e,sm24MobileWebVariant:this.props.sm24MobileWebVariant});case n.ModalState.RESULT:return X.default.createElement(he,{stage:n.ModalStage.RESULT,linkAccessLevel:this.getAccessLevel(),actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleOnCopyToClipboard,zIndexOverride:this.props.zIndexOverride,fileInfo:this.props.file,fileUploadInfo:this.props.fileUpload,browseFileInfo:this.props.browseFile,linkAudience:this.getLinkAudience(),user:this.props.user,openShareModalSettings:this.openShareModalSettings,isLinkToComment:!!this.props.commentId,isTriggeredAsShareModal:this.props.isTriggeredAsShareModal,...e,sm24MobileWebVariant:this.props.sm24MobileWebVariant})}}}_e.displayName="CopyLinkMiniModalComponent";const ue=e=>{const t=n.useExperimentVariant("sm24_mobile_web").variant;return X.default.createElement(_e,{...e,sm24MobileWebVariant:t})};ue.displayName="CopyLinkMiniModalWithHooks";const ge=e=>X.default.createElement(s.QueryClientProvider,{client:s.queryClient},X.default.createElement(fe,{copyLinkMiniModalProps:e},(t=>X.default.createElement(o.ShareBlockingWrapper,{withLockedStateModal:e.withLockedStateModal,action:n.LockedStateModalAction.SHARE_LINK,onStatusChange:t=>{var i,s;if(t===n.Status.USER_ABORTED_ACTION){const t=(null===(i=e.file)||void 0===i?void 0:i.file_id)||(null===(s=e.file)||void 0===s?void 0:s.fq_path)||e.filePath;e.setIsCreatingSharedLink(!1,t)}}},X.default.createElement(ue,{...e,...t})))));ge.displayName="CopyLinkMiniModalWithProviders";const me=n.requireCssWithComponent(ge,["/static/metaserver/static/css/sharing/copy_link_mini_modal-vflzblJLQ.css","/static/metaserver/static/css/dig-components/index.web-vflkUceyC.css"]);me.show=(e,t)=>{n.Modal.showInstance(X.default.createElement(me,{...e}),!0,t)};const fe=({copyLinkMiniModalProps:e,children:t})=>{const[i,s]=X.default.useState(null),n=e.isCenteredDisplayed?void 0:e.anchorRef.current;return X.default.useEffect((()=>{if(!n)return;const e=n.getBoundingClientRect(),t=new DOMRect(e.x,e.y,e.width,e.height);s({current:{getBoundingClientRect:()=>t}})}),[n]),e.isCenteredDisplayed?X.default.createElement(X.default.Fragment,null,t({})):X.default.createElement(X.default.Fragment,null,i&&t({anchorRef:i}))};fe.displayName="DisplayPropsWrapper",e.CopyLinkMiniModal=me,e.CopyLinkMiniModalComponent=_e}));
//# sourceMappingURL=c_views_copy_link_mini_modal_copy_link_mini_modal.after-display.js-vflNyDFVm.map

//# debugId=64aa8ba5-00c0-3370-9187-35c1729517ab